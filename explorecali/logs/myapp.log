2023-01-29T00:00:56.770-03:00  INFO 28112 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 28112 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:00:56.771-03:00 DEBUG 28112 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:00:56.772-03:00  INFO 28112 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:00:57.463-03:00  INFO 28112 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:00:57.521-03:00  INFO 28112 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2023-01-29T00:00:58.587-03:00  INFO 28112 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:00:58.597-03:00  INFO 28112 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:00:58.598-03:00  INFO 28112 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:00:58.689-03:00  INFO 28112 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:00:58.690-03:00  INFO 28112 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1900 ms
2023-01-29T00:00:58.798-03:00  INFO 28112 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:00:58.951-03:00  INFO 28112 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:32e016a0-fea8-4354-b8d7-cabd7f86d965 user=SA
2023-01-29T00:00:58.952-03:00  INFO 28112 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:00:59.094-03:00  INFO 28112 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:00:59.137-03:00  INFO 28112 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:00:59.176-03:00  WARN 28112 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:00:59.290-03:00  INFO 28112 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:00:59.878-03:00  INFO 28112 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:00:59.885-03:00  INFO 28112 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:00:59.899-03:00  INFO 28112 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:01:00.453-03:00  WARN 28112 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:01:01.297-03:00  INFO 28112 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3fe70a2d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@79f6b43a, org.springframework.security.web.context.SecurityContextHolderFilter@3d287f7c, org.springframework.security.web.header.HeaderWriterFilter@280cb0b4, org.springframework.security.web.authentication.logout.LogoutFilter@d45acab, com.example.ec.security.JwtTokenFilter@7b80ac30, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@19598b38, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5d16bb07, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8d0253b, org.springframework.security.web.session.SessionManagementFilter@9be2897, org.springframework.security.web.access.ExceptionTranslationFilter@457547a1, org.springframework.security.web.access.intercept.AuthorizationFilter@5ce34685]
2023-01-29T00:01:01.784-03:00  INFO 28112 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54441 (http) with context path ''
2023-01-29T00:01:01.793-03:00  INFO 28112 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.225 seconds (process running for 6.177)
2023-01-29T00:01:01.986-03:00  INFO 28112 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:01:01.987-03:00  INFO 28112 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:01:01.988-03:00  INFO 28112 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2023-01-29T00:01:01.996-03:00  INFO 28112 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:01:02.017-03:00  INFO 28112 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTYxMjYxLCJleHAiOjE2NzQ5NjE4NjF9.siTcIOzvSbM7bica0QxuSPEylTIx5q8l27W2AiW7dzE]
2023-01-29T00:01:02.081-03:00 ERROR 28112 --- [http-nio-auto-1-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

java.lang.RuntimeException: User already exists
	at com.example.ec.web.UserController.lambda$signup$1(UserController.java:35)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.signup(UserController.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:01:02.124-03:00  INFO 28112 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:01:02.127-03:00  INFO 28112 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:01:02.128-03:00  INFO 28112 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:01:16.288-03:00  INFO 21388 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 21388 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:01:16.289-03:00 DEBUG 21388 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:01:16.289-03:00  INFO 21388 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:01:16.939-03:00  INFO 21388 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:01:16.998-03:00  INFO 21388 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2023-01-29T00:01:18.019-03:00  INFO 21388 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:01:18.030-03:00  INFO 21388 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:01:18.030-03:00  INFO 21388 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:01:18.125-03:00  INFO 21388 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:01:18.125-03:00  INFO 21388 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1820 ms
2023-01-29T00:01:18.214-03:00  INFO 21388 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:01:18.368-03:00  INFO 21388 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:b84070a0-92c0-460c-84ce-3ce524092422 user=SA
2023-01-29T00:01:18.370-03:00  INFO 21388 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:01:18.513-03:00  INFO 21388 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:01:18.562-03:00  INFO 21388 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:01:18.600-03:00  WARN 21388 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:01:18.725-03:00  INFO 21388 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:01:19.307-03:00  INFO 21388 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:01:19.314-03:00  INFO 21388 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:01:19.328-03:00  INFO 21388 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:01:19.930-03:00  WARN 21388 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:01:20.783-03:00  INFO 21388 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@297bbd41, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b5f72fa, org.springframework.security.web.context.SecurityContextHolderFilter@57f31caf, org.springframework.security.web.header.HeaderWriterFilter@eb65fc8, org.springframework.security.web.authentication.logout.LogoutFilter@3edb09b9, com.example.ec.security.JwtTokenFilter@67c2ff5d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4bda93f1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@45bde54d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@29e8c09c, org.springframework.security.web.session.SessionManagementFilter@5e2abb58, org.springframework.security.web.access.ExceptionTranslationFilter@54455c8d, org.springframework.security.web.access.intercept.AuthorizationFilter@1b513ce8]
2023-01-29T00:01:21.255-03:00  INFO 21388 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54461 (http) with context path ''
2023-01-29T00:01:21.263-03:00  INFO 21388 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.158 seconds (process running for 6.117)
2023-01-29T00:01:21.455-03:00  INFO 21388 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:01:21.456-03:00  INFO 21388 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:01:21.457-03:00  INFO 21388 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2023-01-29T00:01:21.466-03:00  INFO 21388 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:01:21.487-03:00  INFO 21388 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjEyODEsImV4cCI6MTY3NDk2MTg4MX0.Fac6ap16Cl6wBnmMeflcRv1ivSPrVfnuZ81ochc7dLw]
2023-01-29T00:01:21.611-03:00  INFO 21388 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:01:21.613-03:00  INFO 21388 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:01:21.615-03:00  INFO 21388 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:01:59.849-03:00  INFO 1848 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 1848 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:01:59.850-03:00 DEBUG 1848 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:01:59.850-03:00  INFO 1848 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:02:00.501-03:00  INFO 1848 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:02:00.558-03:00  INFO 1848 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 51 ms. Found 5 JPA repository interfaces.
2023-01-29T00:02:01.548-03:00  INFO 1848 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:02:01.557-03:00  INFO 1848 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:02:01.557-03:00  INFO 1848 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:02:01.658-03:00  INFO 1848 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:02:01.658-03:00  INFO 1848 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1791 ms
2023-01-29T00:02:01.749-03:00  INFO 1848 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:02:01.895-03:00  INFO 1848 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:7c8e3df2-530c-4202-ad94-602ec8df0b7b user=SA
2023-01-29T00:02:01.897-03:00  INFO 1848 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:02:02.035-03:00  INFO 1848 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:02:02.082-03:00  INFO 1848 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:02:02.122-03:00  WARN 1848 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:02:02.241-03:00  INFO 1848 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:02:02.799-03:00  INFO 1848 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:02:02.806-03:00  INFO 1848 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:02:02.820-03:00  INFO 1848 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:02:03.385-03:00  WARN 1848 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:02:04.221-03:00  INFO 1848 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@738da6f2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1b513ce8, org.springframework.security.web.context.SecurityContextHolderFilter@1c4335c8, org.springframework.security.web.header.HeaderWriterFilter@b61aa50, org.springframework.security.web.authentication.logout.LogoutFilter@27115d45, com.example.ec.security.JwtTokenFilter@17596317, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@943d0c2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@529b8e41, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@375f276e, org.springframework.security.web.session.SessionManagementFilter@109a462e, org.springframework.security.web.access.ExceptionTranslationFilter@3612a60d, org.springframework.security.web.access.intercept.AuthorizationFilter@7b7268db]
2023-01-29T00:02:04.737-03:00  INFO 1848 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54486 (http) with context path ''
2023-01-29T00:02:04.748-03:00  INFO 1848 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.099 seconds (process running for 6.051)
2023-01-29T00:02:04.960-03:00  INFO 1848 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:02:04.961-03:00  INFO 1848 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:02:04.962-03:00  INFO 1848 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:02:04.970-03:00  INFO 1848 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:04.992-03:00  INFO 1848 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjEzMjQsImV4cCI6MTY3NDk2MTkyNH0.LoDz-hgWjayP9CVxDzDM6jeIGFSCOj3rnNeuCduSI-k]
2023-01-29T00:02:05.100-03:00  INFO 1848 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:02:05.102-03:00  INFO 1848 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:02:05.104-03:00  INFO 1848 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:02:29.924-03:00  INFO 23632 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 23632 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:02:29.925-03:00 DEBUG 23632 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:02:29.926-03:00  INFO 23632 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:02:30.590-03:00  INFO 23632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:02:30.651-03:00  INFO 23632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2023-01-29T00:02:31.153-03:00  INFO 23632 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:02:31.323-03:00  INFO 23632 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:ac876aaf-6ffc-4d43-8c8d-2cfd73733ce1 user=SA
2023-01-29T00:02:31.325-03:00  INFO 23632 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:02:31.483-03:00  INFO 23632 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:02:31.529-03:00  INFO 23632 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:02:31.566-03:00  WARN 23632 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:02:31.679-03:00  INFO 23632 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:02:32.251-03:00  INFO 23632 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:02:32.258-03:00  INFO 23632 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:02:32.274-03:00  INFO 23632 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:02:32.895-03:00  WARN 23632 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:02:33.755-03:00  INFO 23632 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4848681d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7712c315, org.springframework.security.web.context.SecurityContextHolderFilter@50cadbae, org.springframework.security.web.header.HeaderWriterFilter@54d6f172, org.springframework.security.web.authentication.logout.LogoutFilter@4cd13fad, com.example.ec.security.JwtTokenFilter@5a9a187b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@65689000, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@441d3ddf, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5529fd4e, org.springframework.security.web.session.SessionManagementFilter@6c3830ed, org.springframework.security.web.access.ExceptionTranslationFilter@a6fc2e1, org.springframework.security.web.access.intercept.AuthorizationFilter@645b67d6]
2023-01-29T00:02:34.202-03:00  INFO 23632 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.474 seconds (process running for 5.744)
2023-01-29T00:02:34.226-03:00  INFO 23632 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:02:34.232-03:00  INFO 23632 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T00:02:34.347-03:00  INFO 23632 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:02:34.352-03:00  INFO 23632 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T00:02:34.362-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:02:34.388-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:02:34.393-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T00:02:34.401-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:02:34.414-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:02:34.424-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:02:34.432-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:02:34.435-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:02:34.441-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:02:34.444-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T00:02:34.445-03:00 DEBUG 23632 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T00:02:34.446-03:00 DEBUG 23632 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T00:02:34.446-03:00 DEBUG 23632 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T00:02:34.447-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:02:34.453-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:02:34.615-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:02:34.620-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T00:02:34.628-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T00:02:34.630-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T00:02:34.632-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T00:02:34.633-03:00 DEBUG 23632 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T00:02:34.633-03:00 DEBUG 23632 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T00:02:34.635-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T00:02:34.637-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:02:34.685-03:00  INFO 23632 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T00:02:34.687-03:00  INFO 23632 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:02:34.688-03:00  INFO 23632 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T00:02:34.692-03:00  INFO 23632 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:02:34.696-03:00  INFO 23632 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:02:35.816-03:00  INFO 23632 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:02:35.824-03:00  INFO 23632 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T00:02:35.845-03:00  INFO 23632 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 23632 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:02:35.845-03:00 DEBUG 23632 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:02:35.845-03:00  INFO 23632 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:02:36.010-03:00  INFO 23632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:02:36.021-03:00  INFO 23632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T00:02:36.195-03:00  INFO 23632 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:02:36.204-03:00  INFO 23632 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:02:36.205-03:00  INFO 23632 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:02:36.281-03:00  INFO 23632 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:02:36.282-03:00  INFO 23632 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 436 ms
2023-01-29T00:02:36.366-03:00  INFO 23632 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T00:02:36.375-03:00  INFO 23632 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:8f92a988-7901-4be3-855c-38ce0c53fb62 user=SA
2023-01-29T00:02:36.376-03:00  INFO 23632 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T00:02:36.419-03:00  INFO 23632 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:02:36.422-03:00  WARN 23632 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:02:36.426-03:00  INFO 23632 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:02:36.476-03:00  INFO 23632 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:02:36.476-03:00  INFO 23632 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:02:36.480-03:00  INFO 23632 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:02:36.598-03:00  WARN 23632 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:02:37.057-03:00  INFO 23632 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7c8ec235, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@76145ef9, org.springframework.security.web.context.SecurityContextHolderFilter@441eae0b, org.springframework.security.web.header.HeaderWriterFilter@47ce44ab, org.springframework.security.web.authentication.logout.LogoutFilter@798e73de, com.example.ec.security.JwtTokenFilter@279afa4e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@26562718, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1388c465, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@519f1a7d, org.springframework.security.web.session.SessionManagementFilter@48f27e0b, org.springframework.security.web.access.ExceptionTranslationFilter@7d33e32b, org.springframework.security.web.access.intercept.AuthorizationFilter@3b89bf47]
2023-01-29T00:02:37.387-03:00  INFO 23632 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54505 (http) with context path ''
2023-01-29T00:02:37.391-03:00  INFO 23632 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.564 seconds (process running for 8.933)
2023-01-29T00:02:37.520-03:00  INFO 23632 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:02:37.520-03:00  INFO 23632 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:02:37.522-03:00  INFO 23632 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:02:37.528-03:00  INFO 23632 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:37.529-03:00  INFO 23632 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:02:37.549-03:00  INFO 23632 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T00:02:37.613-03:00  INFO 23632 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:37.613-03:00  INFO 23632 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:02:37.614-03:00  INFO 23632 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T00:02:37.623-03:00  INFO 23632 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:02:37.624-03:00  INFO 23632 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T00:02:37.630-03:00  INFO 23632 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:37.630-03:00  INFO 23632 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:02:37.633-03:00  INFO 23632 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T00:02:37.642-03:00  INFO 23632 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:37.642-03:00  INFO 23632 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:02:37.649-03:00  INFO 23632 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T00:02:37.677-03:00  INFO 23632 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:37.677-03:00  INFO 23632 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:02:37.712-03:00  INFO 23632 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T00:02:37.720-03:00  INFO 23632 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:37.720-03:00  INFO 23632 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:02:37.724-03:00  INFO 23632 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T00:02:37.729-03:00  INFO 23632 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:37.729-03:00  INFO 23632 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:02:37.730-03:00  INFO 23632 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T00:02:37.738-03:00  INFO 23632 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:37.739-03:00  INFO 23632 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:02:37.741-03:00  INFO 23632 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T00:02:37.753-03:00  INFO 23632 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:37.753-03:00  INFO 23632 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:02:37.755-03:00  INFO 23632 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T00:02:37.761-03:00  INFO 23632 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:02:37.761-03:00  INFO 23632 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T00:02:37.775-03:00  INFO 23632 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 23632 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:02:37.775-03:00 DEBUG 23632 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:02:37.775-03:00  INFO 23632 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:02:37.927-03:00  INFO 23632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:02:37.936-03:00  INFO 23632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T00:02:38.006-03:00  INFO 23632 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:02:38.007-03:00  INFO 23632 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:02:38.007-03:00  INFO 23632 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:02:38.029-03:00  INFO 23632 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T00:02:38.029-03:00  INFO 23632 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 253 ms
2023-01-29T00:02:38.063-03:00  INFO 23632 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T00:02:38.076-03:00  INFO 23632 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:4517c88f-b2b2-4ee2-8ed5-75cb449cded2 user=SA
2023-01-29T00:02:38.076-03:00  INFO 23632 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T00:02:38.101-03:00  INFO 23632 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:02:38.102-03:00  WARN 23632 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:02:38.105-03:00  INFO 23632 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:02:38.147-03:00  INFO 23632 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:02:38.147-03:00  INFO 23632 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:02:38.150-03:00  INFO 23632 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:02:38.245-03:00  WARN 23632 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:02:39.106-03:00  INFO 23632 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6e0a0baa, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@88432f5, org.springframework.security.web.context.SecurityContextHolderFilter@6f8aecd3, org.springframework.security.web.header.HeaderWriterFilter@183d22c5, org.springframework.security.web.authentication.logout.LogoutFilter@340a5c52, com.example.ec.security.JwtTokenFilter@374ba9a8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7bfb46b2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@aa16802, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d3fa0e1, org.springframework.security.web.session.SessionManagementFilter@3316aded, org.springframework.security.web.access.ExceptionTranslationFilter@ef342c2, org.springframework.security.web.access.intercept.AuthorizationFilter@1485c961]
2023-01-29T00:02:39.210-03:00  INFO 23632 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54510 (http) with context path ''
2023-01-29T00:02:39.214-03:00  INFO 23632 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.448 seconds (process running for 10.755)
2023-01-29T00:02:39.239-03:00  INFO 23632 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:02:39.239-03:00  INFO 23632 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:02:39.240-03:00  INFO 23632 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:02:39.240-03:00  INFO 23632 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:39.256-03:00  INFO 23632 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTYxMzU5LCJleHAiOjE2NzQ5NjE5NTl9.7He9_d2s-UP9YU9t6qCOSwYlkTqjEfHEM90AOea9KAE]
2023-01-29T00:02:39.263-03:00 ERROR 23632 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

java.lang.RuntimeException: User already exists
	at com.example.ec.web.UserController.lambda$signup$1(UserController.java:35)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.signup(UserController.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:02:39.277-03:00  INFO 23632 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:39.277-03:00  INFO 23632 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:02:39.281-03:00 ERROR 23632 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:02:39.289-03:00  INFO 23632 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:39.292-03:00  INFO 23632 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjEzNTksImV4cCI6MTY3NDk2MTk1OX0.LJRlMABDBPLu5oTic6zifIOTa1BKfwWiEWoO4zqOaK0]
2023-01-29T00:02:39.302-03:00  INFO 23632 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:02:39.305-03:00  INFO 23632 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjEzNTksImV4cCI6MTY3NDk2MTk1OX0.LJRlMABDBPLu5oTic6zifIOTa1BKfwWiEWoO4zqOaK0]
2023-01-29T00:02:39.354-03:00  INFO 23632 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:02:39.355-03:00  INFO 23632 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:02:39.409-03:00  INFO 23632 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:02:39.445-03:00  INFO 23632 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:02:39.445-03:00  INFO 23632 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T00:02:39.478-03:00  INFO 23632 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T00:02:39.487-03:00  INFO 23632 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:02:39.488-03:00  INFO 23632 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T00:02:39.519-03:00  INFO 23632 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T00:03:07.791-03:00  INFO 4688 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 4688 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:03:07.791-03:00 DEBUG 4688 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:03:07.792-03:00  INFO 4688 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:03:08.442-03:00  INFO 4688 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:03:08.498-03:00  INFO 4688 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49 ms. Found 5 JPA repository interfaces.
2023-01-29T00:03:09.502-03:00  INFO 4688 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:03:09.513-03:00  INFO 4688 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:03:09.514-03:00  INFO 4688 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:03:09.619-03:00  INFO 4688 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:03:09.619-03:00  INFO 4688 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1811 ms
2023-01-29T00:03:09.709-03:00  INFO 4688 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:03:09.857-03:00  INFO 4688 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:405ca6e3-7518-4531-a0af-a27816224591 user=SA
2023-01-29T00:03:09.859-03:00  INFO 4688 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:03:10.006-03:00  INFO 4688 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:03:10.050-03:00  INFO 4688 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:03:10.085-03:00  WARN 4688 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:03:10.205-03:00  INFO 4688 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:03:10.779-03:00  INFO 4688 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:03:10.785-03:00  INFO 4688 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:03:10.800-03:00  INFO 4688 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:03:11.352-03:00  WARN 4688 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:03:12.205-03:00  INFO 4688 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1d0590bc, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d4dac56, org.springframework.security.web.context.SecurityContextHolderFilter@121fe002, org.springframework.security.web.header.HeaderWriterFilter@7f794b0f, org.springframework.security.web.authentication.logout.LogoutFilter@b257072, com.example.ec.security.JwtTokenFilter@2ce7d43, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2778a7c3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@94ba90a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@30fba306, org.springframework.security.web.session.SessionManagementFilter@4bda93f1, org.springframework.security.web.access.ExceptionTranslationFilter@302692b1, org.springframework.security.web.access.intercept.AuthorizationFilter@67c2ff5d]
2023-01-29T00:03:12.705-03:00  INFO 4688 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54534 (http) with context path ''
2023-01-29T00:03:12.713-03:00  INFO 4688 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.114 seconds (process running for 6.093)
2023-01-29T00:03:12.891-03:00  INFO 4688 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:03:12.891-03:00  INFO 4688 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:03:12.893-03:00  INFO 4688 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-01-29T00:03:12.902-03:00  INFO 4688 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:03:12.923-03:00  INFO 4688 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjEzOTIsImV4cCI6MTY3NDk2MTk5Mn0.3oYlVVGfQJ9cxZYeJDKQz3wZa4GnfzoJXJToNJEAkiU]
2023-01-29T00:03:13.032-03:00  INFO 4688 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:03:13.034-03:00  INFO 4688 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:03:13.036-03:00  INFO 4688 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:03:52.625-03:00  INFO 26464 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 26464 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:03:52.626-03:00 DEBUG 26464 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:03:52.627-03:00  INFO 26464 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:03:53.332-03:00  INFO 26464 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:03:53.394-03:00  INFO 26464 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 56 ms. Found 5 JPA repository interfaces.
2023-01-29T00:03:54.414-03:00  INFO 26464 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:03:54.425-03:00  INFO 26464 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:03:54.427-03:00  INFO 26464 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:03:54.527-03:00  INFO 26464 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:03:54.527-03:00  INFO 26464 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1883 ms
2023-01-29T00:03:54.615-03:00  INFO 26464 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:03:54.758-03:00  INFO 26464 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:c7f82f61-48c1-4776-a076-6b96044e0a8b user=SA
2023-01-29T00:03:54.759-03:00  INFO 26464 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:03:54.913-03:00  INFO 26464 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:03:54.961-03:00  INFO 26464 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:03:55.006-03:00  WARN 26464 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:03:55.124-03:00  INFO 26464 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:03:55.709-03:00  INFO 26464 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:03:55.716-03:00  INFO 26464 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:03:55.732-03:00  INFO 26464 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:03:56.315-03:00  WARN 26464 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:03:57.237-03:00  INFO 26464 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@738da6f2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1b513ce8, org.springframework.security.web.context.SecurityContextHolderFilter@1c4335c8, org.springframework.security.web.header.HeaderWriterFilter@b61aa50, org.springframework.security.web.authentication.logout.LogoutFilter@27115d45, com.example.ec.security.JwtTokenFilter@17596317, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@943d0c2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@529b8e41, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@375f276e, org.springframework.security.web.session.SessionManagementFilter@109a462e, org.springframework.security.web.access.ExceptionTranslationFilter@3612a60d, org.springframework.security.web.access.intercept.AuthorizationFilter@7b7268db]
2023-01-29T00:03:57.732-03:00  INFO 26464 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54561 (http) with context path ''
2023-01-29T00:03:57.740-03:00  INFO 26464 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.309 seconds (process running for 6.264)
2023-01-29T00:03:57.907-03:00  INFO 26464 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:03:57.907-03:00  INFO 26464 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:03:57.908-03:00  INFO 26464 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:03:57.917-03:00  INFO 26464 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:03:57.938-03:00  INFO 26464 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTYxNDM3LCJleHAiOjE2NzQ5NjIwMzd9.Sd7kewQli876XiRMU1SMq2yjS0dfEbzZ-diSf1kKiWQ]
2023-01-29T00:03:58.002-03:00 ERROR 26464 --- [http-nio-auto-1-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

java.lang.RuntimeException: User already exists
	at com.example.ec.web.UserController.lambda$signup$1(UserController.java:35)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.signup(UserController.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:03:58.051-03:00  INFO 26464 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:03:58.053-03:00  INFO 26464 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:03:58.055-03:00  INFO 26464 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:04:41.082-03:00  INFO 29224 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 29224 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:04:41.083-03:00 DEBUG 29224 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:04:41.083-03:00  INFO 29224 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:04:41.731-03:00  INFO 29224 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:04:41.786-03:00  INFO 29224 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49 ms. Found 5 JPA repository interfaces.
2023-01-29T00:04:42.796-03:00  INFO 29224 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:04:42.812-03:00  INFO 29224 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:04:42.812-03:00  INFO 29224 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:04:42.910-03:00  INFO 29224 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:04:42.910-03:00  INFO 29224 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1811 ms
2023-01-29T00:04:43.001-03:00  INFO 29224 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:04:43.151-03:00  INFO 29224 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:520dd3f1-ee04-48ac-a2f6-7680694639dd user=SA
2023-01-29T00:04:43.152-03:00  INFO 29224 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:04:43.290-03:00  INFO 29224 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:04:43.342-03:00  INFO 29224 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:04:43.379-03:00  WARN 29224 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:04:43.490-03:00  INFO 29224 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:04:44.079-03:00  INFO 29224 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:04:44.086-03:00  INFO 29224 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:04:44.102-03:00  INFO 29224 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:04:44.675-03:00  WARN 29224 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:04:45.549-03:00  INFO 29224 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@efe75a2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@a49cdd6, org.springframework.security.web.context.SecurityContextHolderFilter@528070fe, org.springframework.security.web.header.HeaderWriterFilter@51039ec9, org.springframework.security.web.authentication.logout.LogoutFilter@b61aa50, com.example.ec.security.JwtTokenFilter@109a462e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@53741683, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@36134f3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@258e5601, org.springframework.security.web.session.SessionManagementFilter@5e8633da, org.springframework.security.web.access.ExceptionTranslationFilter@267a0b6a, org.springframework.security.web.access.intercept.AuthorizationFilter@302692b1]
2023-01-29T00:04:46.050-03:00  INFO 29224 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54592 (http) with context path ''
2023-01-29T00:04:46.058-03:00  INFO 29224 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.162 seconds (process running for 6.137)
2023-01-29T00:04:46.242-03:00  INFO 29224 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:04:46.242-03:00  INFO 29224 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:04:46.243-03:00  INFO 29224 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:04:46.255-03:00  INFO 29224 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:04:46.275-03:00  INFO 29224 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTYxNDg2LCJleHAiOjE2NzQ5NjIwODZ9.mA7txsnCsQnUl8HLp4uJ0jLVd_9wsVxyrViTlQzp-t8]
2023-01-29T00:04:46.344-03:00 ERROR 29224 --- [http-nio-auto-1-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

java.lang.RuntimeException: User already exists
	at com.example.ec.web.UserController.lambda$signup$1(UserController.java:35)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.signup(UserController.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:04:46.390-03:00  INFO 29224 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:04:46.392-03:00  INFO 29224 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:04:46.394-03:00  INFO 29224 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:06:55.356-03:00  INFO 23020 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 23020 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:06:55.357-03:00 DEBUG 23020 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:06:55.358-03:00  INFO 23020 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:06:56.006-03:00  INFO 23020 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:06:56.065-03:00  INFO 23020 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2023-01-29T00:06:57.100-03:00  INFO 23020 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:06:57.111-03:00  INFO 23020 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:06:57.112-03:00  INFO 23020 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:06:57.228-03:00  INFO 23020 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:06:57.228-03:00  INFO 23020 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1855 ms
2023-01-29T00:06:57.318-03:00  INFO 23020 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:06:57.465-03:00  INFO 23020 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:ba302fda-d15c-4227-902f-e0a59ff56db6 user=SA
2023-01-29T00:06:57.467-03:00  INFO 23020 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:06:57.601-03:00  INFO 23020 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:06:57.648-03:00  INFO 23020 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:06:57.683-03:00  WARN 23020 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:06:57.799-03:00  INFO 23020 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:06:58.369-03:00  INFO 23020 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:06:58.376-03:00  INFO 23020 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:06:58.392-03:00  INFO 23020 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:06:58.939-03:00  WARN 23020 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:06:59.751-03:00  INFO 23020 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@29e8c09c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5d8de155, org.springframework.security.web.context.SecurityContextHolderFilter@45bde54d, org.springframework.security.web.header.HeaderWriterFilter@302692b1, org.springframework.security.web.authentication.logout.LogoutFilter@7b7268db, com.example.ec.security.JwtTokenFilter@1d0590bc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@121fe002, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@d45acab, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6d4dac56, org.springframework.security.web.session.SessionManagementFilter@57f31caf, org.springframework.security.web.access.ExceptionTranslationFilter@5cd5e1b6, org.springframework.security.web.access.intercept.AuthorizationFilter@297bbd41]
2023-01-29T00:07:00.226-03:00  INFO 23020 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54675 (http) with context path ''
2023-01-29T00:07:00.236-03:00  INFO 23020 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.076 seconds (process running for 6.064)
2023-01-29T00:07:00.423-03:00  INFO 23020 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:07:00.423-03:00  INFO 23020 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:07:00.424-03:00  INFO 23020 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:07:00.432-03:00  INFO 23020 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:07:00.453-03:00  INFO 23020 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTYxNjIwLCJleHAiOjE2NzQ5NjIyMjB9.FRi_6WTaV_y4r0tdHI-o2PwZa_O4xKoMwG_k-rXbw4I]
2023-01-29T00:07:00.513-03:00 ERROR 23020 --- [http-nio-auto-1-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

java.lang.RuntimeException: User already exists
	at com.example.ec.web.UserController.lambda$signup$1(UserController.java:35)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.signup(UserController.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:07:00.561-03:00  INFO 23020 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:07:00.563-03:00  INFO 23020 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:07:00.565-03:00  INFO 23020 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:07:24.426-03:00  INFO 26552 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 26552 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:07:24.426-03:00 DEBUG 26552 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:07:24.427-03:00  INFO 26552 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:07:25.092-03:00  INFO 26552 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:07:25.150-03:00  INFO 26552 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 51 ms. Found 5 JPA repository interfaces.
2023-01-29T00:07:26.184-03:00  INFO 26552 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:07:26.194-03:00  INFO 26552 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:07:26.194-03:00  INFO 26552 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:07:26.294-03:00  INFO 26552 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:07:26.295-03:00  INFO 26552 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1849 ms
2023-01-29T00:07:26.386-03:00  INFO 26552 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:07:26.531-03:00  INFO 26552 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:467a6104-03ea-42bf-9a09-e8d8e003e3af user=SA
2023-01-29T00:07:26.532-03:00  INFO 26552 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:07:26.672-03:00  INFO 26552 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:07:26.727-03:00  INFO 26552 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:07:26.764-03:00  WARN 26552 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:07:26.873-03:00  INFO 26552 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:07:27.449-03:00  INFO 26552 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:07:27.455-03:00  INFO 26552 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:07:27.471-03:00  INFO 26552 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:07:28.051-03:00  WARN 26552 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:07:28.891-03:00  INFO 26552 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2e29a7d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4af8ff3, org.springframework.security.web.context.SecurityContextHolderFilter@efe75a2, org.springframework.security.web.header.HeaderWriterFilter@19598b38, org.springframework.security.web.authentication.logout.LogoutFilter@349504d5, com.example.ec.security.JwtTokenFilter@7b7268db, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@109a462e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@258e5601, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1d8230cd, org.springframework.security.web.session.SessionManagementFilter@302692b1, org.springframework.security.web.access.ExceptionTranslationFilter@3d287f7c, org.springframework.security.web.access.intercept.AuthorizationFilter@5fbb2e1c]
2023-01-29T00:07:29.356-03:00  INFO 26552 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54697 (http) with context path ''
2023-01-29T00:07:29.364-03:00  INFO 26552 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.123 seconds (process running for 6.084)
2023-01-29T00:07:29.537-03:00  INFO 26552 --- [http-nio-auto-1-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:07:29.537-03:00  INFO 26552 --- [http-nio-auto-1-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:07:29.538-03:00  INFO 26552 --- [http-nio-auto-1-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:07:29.547-03:00  INFO 26552 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:07:29.570-03:00  INFO 26552 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjE2NDksImV4cCI6MTY3NDk2MjI0OX0.WTTov83pbMFhbtm4YDtcjiXYHBSGve-Myx7Xf4d6jbI]
2023-01-29T00:07:29.665-03:00  INFO 26552 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:07:29.667-03:00  INFO 26552 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:07:29.669-03:00  INFO 26552 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:07:58.331-03:00  INFO 22516 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 22516 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:07:58.331-03:00 DEBUG 22516 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:07:58.332-03:00  INFO 22516 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:07:58.974-03:00  INFO 22516 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:07:59.033-03:00  INFO 22516 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2023-01-29T00:08:00.026-03:00  INFO 22516 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:08:00.036-03:00  INFO 22516 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:08:00.036-03:00  INFO 22516 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:08:00.127-03:00  INFO 22516 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:08:00.127-03:00  INFO 22516 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1779 ms
2023-01-29T00:08:00.226-03:00  INFO 22516 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:08:00.393-03:00  INFO 22516 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:bae71f87-21b9-489c-952b-cfc375425995 user=SA
2023-01-29T00:08:00.395-03:00  INFO 22516 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:08:00.530-03:00  INFO 22516 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:08:00.576-03:00  INFO 22516 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:08:00.609-03:00  WARN 22516 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:08:00.721-03:00  INFO 22516 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:08:01.289-03:00  INFO 22516 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:08:01.296-03:00  INFO 22516 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:08:01.314-03:00  INFO 22516 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:08:01.858-03:00  WARN 22516 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:08:02.740-03:00  INFO 22516 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3b5f72fa, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@67c2ff5d, org.springframework.security.web.context.SecurityContextHolderFilter@5c088d72, org.springframework.security.web.header.HeaderWriterFilter@5cd5e1b6, org.springframework.security.web.authentication.logout.LogoutFilter@2e29a7d, com.example.ec.security.JwtTokenFilter@29e8c09c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@45bde54d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@ae49f31, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5d8de155, org.springframework.security.web.session.SessionManagementFilter@943d0c2, org.springframework.security.web.access.ExceptionTranslationFilter@80347b2, org.springframework.security.web.access.intercept.AuthorizationFilter@17596317]
2023-01-29T00:08:03.210-03:00  INFO 22516 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54726 (http) with context path ''
2023-01-29T00:08:03.219-03:00  INFO 22516 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.132 seconds (process running for 6.116)
2023-01-29T00:08:03.391-03:00  INFO 22516 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:08:03.392-03:00  INFO 22516 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:08:03.393-03:00  INFO 22516 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:08:03.401-03:00  INFO 22516 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:08:03.425-03:00  INFO 22516 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTYxNjgzLCJleHAiOjE2NzQ5NjIyODN9.hA47um8Pbv6bgQ4Fy5wiIr-FSzIq3orFF2pMB3CvXZ8]
2023-01-29T00:08:03.489-03:00 ERROR 22516 --- [http-nio-auto-1-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

java.lang.RuntimeException: User already exists
	at com.example.ec.web.UserController.lambda$signup$1(UserController.java:35)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.signup(UserController.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:08:03.541-03:00  INFO 22516 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:08:03.543-03:00  INFO 22516 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:08:03.545-03:00  INFO 22516 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:09:14.182-03:00  INFO 10892 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 10892 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:09:14.183-03:00 DEBUG 10892 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:09:14.183-03:00  INFO 10892 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:09:14.851-03:00  INFO 10892 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:09:14.915-03:00  INFO 10892 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 56 ms. Found 5 JPA repository interfaces.
2023-01-29T00:09:15.999-03:00  INFO 10892 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:09:16.008-03:00  INFO 10892 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:09:16.008-03:00  INFO 10892 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:09:16.112-03:00  INFO 10892 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:09:16.112-03:00  INFO 10892 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1910 ms
2023-01-29T00:09:16.203-03:00  INFO 10892 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:09:16.341-03:00  INFO 10892 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:141b0b68-6242-48e4-b307-ef3e64533a83 user=SA
2023-01-29T00:09:16.342-03:00  INFO 10892 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:09:16.481-03:00  INFO 10892 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:09:16.528-03:00  INFO 10892 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:09:16.564-03:00  WARN 10892 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:09:16.690-03:00  INFO 10892 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:09:17.266-03:00  INFO 10892 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:09:17.274-03:00  INFO 10892 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:09:17.288-03:00  INFO 10892 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:09:17.853-03:00  WARN 10892 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:09:18.749-03:00  INFO 10892 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@261d7ee2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@724a80d2, org.springframework.security.web.context.SecurityContextHolderFilter@2e04dbc1, org.springframework.security.web.header.HeaderWriterFilter@53cdfb09, org.springframework.security.web.authentication.logout.LogoutFilter@5c088d72, com.example.ec.security.JwtTokenFilter@5ce34685, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@9be2897, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e1c566d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@54aacbc7, org.springframework.security.web.session.SessionManagementFilter@12ff3df, org.springframework.security.web.access.ExceptionTranslationFilter@36134f3, org.springframework.security.web.access.intercept.AuthorizationFilter@94ba90a]
2023-01-29T00:09:19.219-03:00  INFO 10892 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54764 (http) with context path ''
2023-01-29T00:09:19.227-03:00  INFO 10892 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.229 seconds (process running for 6.182)
2023-01-29T00:09:19.413-03:00  INFO 10892 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:09:19.413-03:00  INFO 10892 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:09:19.414-03:00  INFO 10892 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:09:19.422-03:00  INFO 10892 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:09:19.444-03:00  INFO 10892 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjE3NTksImV4cCI6MTY3NDk2MjM1OX0.WzoIK4WlRJG8ow0jZbg0GqvzA2IKAMK-WVZWUz0RqaM]
2023-01-29T00:09:19.549-03:00  INFO 10892 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:09:19.551-03:00  INFO 10892 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:09:19.553-03:00  INFO 10892 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:09:43.538-03:00  INFO 25108 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 25108 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:09:43.539-03:00 DEBUG 25108 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:09:43.540-03:00  INFO 25108 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:09:43.541-03:00  INFO 28424 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 28424 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:09:43.542-03:00 DEBUG 28424 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:09:43.542-03:00  INFO 28424 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:09:44.396-03:00  INFO 28424 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:09:44.399-03:00  INFO 25108 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:09:44.457-03:00  INFO 28424 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 53 ms. Found 5 JPA repository interfaces.
2023-01-29T00:09:44.464-03:00  INFO 25108 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2023-01-29T00:09:45.934-03:00  INFO 28424 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:09:45.946-03:00  INFO 28424 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:09:45.947-03:00  INFO 28424 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:09:45.954-03:00  INFO 25108 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:09:45.966-03:00  INFO 25108 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:09:45.967-03:00  INFO 25108 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:09:46.062-03:00  INFO 28424 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:09:46.062-03:00  INFO 28424 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2502 ms
2023-01-29T00:09:46.069-03:00  INFO 25108 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:09:46.070-03:00  INFO 25108 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2512 ms
2023-01-29T00:09:46.183-03:00  INFO 28424 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:09:46.199-03:00  INFO 25108 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:09:46.360-03:00  INFO 28424 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:b6b76586-130b-44dc-8e40-f05bdc9abce7 user=SA
2023-01-29T00:09:46.362-03:00  INFO 28424 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:09:46.375-03:00  INFO 25108 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:dea976be-4fd8-4ebf-b75b-8d4f24e18cbd user=SA
2023-01-29T00:09:46.377-03:00  INFO 25108 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:09:46.548-03:00  INFO 28424 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:09:46.559-03:00  INFO 25108 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:09:46.612-03:00  INFO 28424 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:09:46.621-03:00  INFO 25108 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:09:46.666-03:00  WARN 28424 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:09:46.674-03:00  WARN 25108 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:09:46.813-03:00  INFO 28424 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:09:46.815-03:00  INFO 25108 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:09:47.437-03:00  INFO 25108 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:09:47.444-03:00  INFO 25108 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:09:47.459-03:00  INFO 28424 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:09:47.462-03:00  INFO 25108 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:09:47.467-03:00  INFO 28424 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:09:47.487-03:00  INFO 28424 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:09:48.253-03:00  WARN 25108 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:09:48.264-03:00  WARN 28424 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:09:49.675-03:00  INFO 25108 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3de507af, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@349504d5, org.springframework.security.web.context.SecurityContextHolderFilter@6347ebbc, org.springframework.security.web.header.HeaderWriterFilter@7b381066, org.springframework.security.web.authentication.logout.LogoutFilter@724a80d2, com.example.ec.security.JwtTokenFilter@347770a9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@77c4aeb6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@54455c8d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@218e28d9, org.springframework.security.web.session.SessionManagementFilter@5d16bb07, org.springframework.security.web.access.ExceptionTranslationFilter@2ce7ec5f, org.springframework.security.web.access.intercept.AuthorizationFilter@8d0253b]
2023-01-29T00:09:49.693-03:00  INFO 28424 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@57f31caf, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c088d72, org.springframework.security.web.context.SecurityContextHolderFilter@795ce9b5, org.springframework.security.web.header.HeaderWriterFilter@6019ce4b, org.springframework.security.web.authentication.logout.LogoutFilter@7f794b0f, com.example.ec.security.JwtTokenFilter@4bda93f1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@108b2321, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7f2c36de, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@45bde54d, org.springframework.security.web.session.SessionManagementFilter@207e3ffd, org.springframework.security.web.access.ExceptionTranslationFilter@6dd8ac29, org.springframework.security.web.access.intercept.AuthorizationFilter@5e2abb58]
2023-01-29T00:09:50.409-03:00  INFO 25108 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54790 (http) with context path ''
2023-01-29T00:09:50.418-03:00  INFO 28424 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54791 (http) with context path ''
2023-01-29T00:09:50.421-03:00  INFO 25108 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 7.099 seconds (process running for 8.157)
2023-01-29T00:09:50.432-03:00  INFO 28424 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 7.1 seconds (process running for 8.148)
2023-01-29T00:09:50.644-03:00  INFO 25108 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:09:50.644-03:00  INFO 25108 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:09:50.647-03:00  INFO 25108 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:09:50.649-03:00  INFO 28424 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:09:50.650-03:00  INFO 28424 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:09:50.651-03:00  INFO 28424 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:09:50.659-03:00  INFO 25108 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:09:50.662-03:00  INFO 28424 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:09:50.685-03:00  INFO 25108 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjE3OTAsImV4cCI6MTY3NDk2MjM5MH0.VE7JmtUaPLF4C9y3Qtcxr4tvUB8vzGI65OhBdwxVbFE]
2023-01-29T00:09:50.687-03:00  INFO 28424 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjE3OTAsImV4cCI6MTY3NDk2MjM5MH0.VE7JmtUaPLF4C9y3Qtcxr4tvUB8vzGI65OhBdwxVbFE]
2023-01-29T00:09:50.777-03:00  INFO 25108 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:09:50.780-03:00  INFO 25108 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:09:50.783-03:00  INFO 28424 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:09:50.786-03:00  INFO 28424 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:09:50.786-03:00  INFO 25108 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:09:50.790-03:00  INFO 28424 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:09:53.280-03:00  INFO 29276 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 29276 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:09:53.280-03:00 DEBUG 29276 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:09:53.280-03:00  INFO 29276 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:09:53.922-03:00  INFO 29276 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:09:53.978-03:00  INFO 29276 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49 ms. Found 5 JPA repository interfaces.
2023-01-29T00:09:54.999-03:00  INFO 29276 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:09:55.008-03:00  INFO 29276 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:09:55.009-03:00  INFO 29276 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:09:55.114-03:00  INFO 29276 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:09:55.115-03:00  INFO 29276 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1818 ms
2023-01-29T00:09:55.213-03:00  INFO 29276 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:09:55.362-03:00  INFO 29276 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:63a866ed-edfa-4c04-a7b2-64ebfa81a3c9 user=SA
2023-01-29T00:09:55.364-03:00  INFO 29276 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:09:55.515-03:00  INFO 29276 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:09:55.568-03:00  INFO 29276 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:09:55.605-03:00  WARN 29276 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:09:55.724-03:00  INFO 29276 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:09:56.304-03:00  INFO 29276 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:09:56.312-03:00  INFO 29276 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:09:56.329-03:00  INFO 29276 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:09:56.908-03:00  WARN 29276 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:09:57.804-03:00  INFO 29276 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4af8ff3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7b7268db, org.springframework.security.web.context.SecurityContextHolderFilter@a49cdd6, org.springframework.security.web.header.HeaderWriterFilter@5d16bb07, org.springframework.security.web.authentication.logout.LogoutFilter@347770a9, com.example.ec.security.JwtTokenFilter@1d8230cd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@258e5601, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@58a06477, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@b257072, org.springframework.security.web.session.SessionManagementFilter@c52c362, org.springframework.security.web.access.ExceptionTranslationFilter@45aa02de, org.springframework.security.web.access.intercept.AuthorizationFilter@138d85f8]
2023-01-29T00:09:58.292-03:00  INFO 29276 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54810 (http) with context path ''
2023-01-29T00:09:58.301-03:00  INFO 29276 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.211 seconds (process running for 6.16)
2023-01-29T00:09:58.487-03:00  INFO 29276 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:09:58.487-03:00  INFO 29276 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:09:58.488-03:00  INFO 29276 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:09:58.500-03:00  INFO 29276 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:09:58.523-03:00  INFO 29276 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTYxNzk4LCJleHAiOjE2NzQ5NjIzOTh9.BrsxMWK-vE_Ho6CeXBtriCckn-XmmzYHwjAsLYl39BA]
2023-01-29T00:09:58.607-03:00 ERROR 29276 --- [http-nio-auto-1-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

java.lang.RuntimeException: User already exists
	at com.example.ec.web.UserController.lambda$signup$1(UserController.java:35)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.signup(UserController.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:09:58.658-03:00  INFO 29276 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:09:58.660-03:00  INFO 29276 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:09:58.662-03:00  INFO 29276 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:10:03.349-03:00  INFO 24860 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 24860 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:10:03.349-03:00 DEBUG 24860 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:10:03.350-03:00  INFO 24860 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:10:04.018-03:00  INFO 24860 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:10:04.072-03:00  INFO 24860 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 48 ms. Found 5 JPA repository interfaces.
2023-01-29T00:10:05.113-03:00  INFO 24860 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:10:05.123-03:00  INFO 24860 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:10:05.124-03:00  INFO 24860 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:10:05.241-03:00  INFO 24860 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:10:05.241-03:00  INFO 24860 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1874 ms
2023-01-29T00:10:05.373-03:00  INFO 24860 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:10:05.544-03:00  INFO 24860 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:c6beb561-25a3-4251-9848-21d338cf35e6 user=SA
2023-01-29T00:10:05.546-03:00  INFO 24860 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:10:05.685-03:00  INFO 24860 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:10:05.737-03:00  INFO 24860 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:10:05.772-03:00  WARN 24860 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:10:05.894-03:00  INFO 24860 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:10:06.472-03:00  INFO 24860 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:10:06.478-03:00  INFO 24860 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:10:06.494-03:00  INFO 24860 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:10:07.095-03:00  WARN 24860 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:10:07.968-03:00  INFO 24860 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@57f31caf, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c088d72, org.springframework.security.web.context.SecurityContextHolderFilter@795ce9b5, org.springframework.security.web.header.HeaderWriterFilter@6019ce4b, org.springframework.security.web.authentication.logout.LogoutFilter@7f794b0f, com.example.ec.security.JwtTokenFilter@4bda93f1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@108b2321, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7f2c36de, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@45bde54d, org.springframework.security.web.session.SessionManagementFilter@207e3ffd, org.springframework.security.web.access.ExceptionTranslationFilter@6dd8ac29, org.springframework.security.web.access.intercept.AuthorizationFilter@5e2abb58]
2023-01-29T00:10:08.442-03:00  INFO 24860 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54826 (http) with context path ''
2023-01-29T00:10:08.450-03:00  INFO 24860 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.284 seconds (process running for 6.218)
2023-01-29T00:10:08.614-03:00  INFO 24860 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:10:08.614-03:00  INFO 24860 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:10:08.615-03:00  INFO 24860 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:10:08.624-03:00  INFO 24860 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:10:08.646-03:00  INFO 24860 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjE4MDgsImV4cCI6MTY3NDk2MjQwOH0.JyK_YtD6lmvT_9szEZn7VJxLMijotd2ZSKpSD_nGlJM]
2023-01-29T00:10:08.740-03:00  INFO 24860 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:10:08.741-03:00  INFO 24860 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:10:08.743-03:00  INFO 24860 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:10:12.094-03:00  INFO 29312 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 29312 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:10:12.094-03:00 DEBUG 29312 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:10:12.095-03:00  INFO 29312 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:10:12.768-03:00  INFO 29312 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:10:12.829-03:00  INFO 29312 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2023-01-29T00:10:13.853-03:00  INFO 29312 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:10:13.863-03:00  INFO 29312 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:10:13.864-03:00  INFO 29312 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:10:13.969-03:00  INFO 29312 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:10:13.970-03:00  INFO 29312 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1858 ms
2023-01-29T00:10:14.058-03:00  INFO 29312 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:10:14.209-03:00  INFO 29312 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:ade48953-483c-42ab-9801-92de58768a0a user=SA
2023-01-29T00:10:14.210-03:00  INFO 29312 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:10:14.351-03:00  INFO 29312 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:10:14.396-03:00  INFO 29312 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:10:14.436-03:00  WARN 29312 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:10:14.556-03:00  INFO 29312 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:10:15.129-03:00  INFO 29312 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:10:15.136-03:00  INFO 29312 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:10:15.149-03:00  INFO 29312 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:10:15.732-03:00  WARN 29312 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:10:16.611-03:00  INFO 29312 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5d8de155, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1d0590bc, org.springframework.security.web.context.SecurityContextHolderFilter@ae49f31, org.springframework.security.web.header.HeaderWriterFilter@c52c362, org.springframework.security.web.authentication.logout.LogoutFilter@1d8230cd, com.example.ec.security.JwtTokenFilter@6d4dac56, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@d45acab, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2778a7c3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2ce7d43, org.springframework.security.web.session.SessionManagementFilter@5c088d72, org.springframework.security.web.access.ExceptionTranslationFilter@220a7f95, org.springframework.security.web.access.intercept.AuthorizationFilter@3b5f72fa]
2023-01-29T00:10:17.073-03:00  INFO 29312 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54840 (http) with context path ''
2023-01-29T00:10:17.082-03:00  INFO 29312 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.185 seconds (process running for 6.133)
2023-01-29T00:10:17.256-03:00  INFO 29312 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:10:17.256-03:00  INFO 29312 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:10:17.257-03:00  INFO 29312 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:10:17.266-03:00  INFO 29312 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:10:17.287-03:00  INFO 29312 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjE4MTcsImV4cCI6MTY3NDk2MjQxN30.atATlcZ4O4XQUwIdpMPhshv7_5QbuW5yDIz4Me1Z0C4]
2023-01-29T00:10:17.391-03:00  INFO 29312 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:10:17.393-03:00  INFO 29312 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:10:17.396-03:00  INFO 29312 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:13:36.680-03:00  INFO 18564 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 18564 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:13:36.681-03:00 DEBUG 18564 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:13:36.682-03:00  INFO 18564 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:13:37.496-03:00  INFO 18564 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:13:37.562-03:00  INFO 18564 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 60 ms. Found 5 JPA repository interfaces.
2023-01-29T00:13:38.152-03:00  INFO 18564 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:13:38.298-03:00  INFO 18564 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:f0d9a1e2-8877-4096-ab0d-c93096ae83ef user=SA
2023-01-29T00:13:38.300-03:00  INFO 18564 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:13:38.448-03:00  INFO 18564 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:13:38.494-03:00  INFO 18564 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:13:38.531-03:00  WARN 18564 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:13:38.636-03:00  INFO 18564 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:13:39.247-03:00  INFO 18564 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:13:39.253-03:00  INFO 18564 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:13:39.268-03:00  INFO 18564 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:13:39.901-03:00  WARN 18564 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:13:40.890-03:00  INFO 18564 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@52d9a150, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@476a38d9, org.springframework.security.web.context.SecurityContextHolderFilter@65630116, org.springframework.security.web.header.HeaderWriterFilter@53b81a55, org.springframework.security.web.authentication.logout.LogoutFilter@4f66f2dd, com.example.ec.security.JwtTokenFilter@79a12552, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@fee1e32, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2d2710a8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5120886f, org.springframework.security.web.session.SessionManagementFilter@6afdb486, org.springframework.security.web.access.ExceptionTranslationFilter@53ccbc15, org.springframework.security.web.access.intercept.AuthorizationFilter@5dc90de7]
2023-01-29T00:13:41.396-03:00  INFO 18564 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.928 seconds (process running for 6.371)
2023-01-29T00:13:41.424-03:00  INFO 18564 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:13:41.432-03:00  INFO 18564 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T00:13:41.566-03:00  INFO 18564 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:13:41.572-03:00  INFO 18564 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T00:13:41.583-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:13:41.612-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:13:41.617-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T00:13:41.625-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:13:41.638-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:13:41.649-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:13:41.657-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:13:41.661-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:13:41.665-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:13:41.669-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T00:13:41.669-03:00 DEBUG 18564 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T00:13:41.670-03:00 DEBUG 18564 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T00:13:41.671-03:00 DEBUG 18564 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T00:13:41.671-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:13:41.676-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:13:41.824-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:13:41.828-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T00:13:41.836-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T00:13:41.839-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T00:13:41.844-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T00:13:41.844-03:00 DEBUG 18564 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T00:13:41.844-03:00 DEBUG 18564 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T00:13:41.847-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T00:13:41.850-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:13:41.912-03:00  INFO 18564 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T00:13:41.915-03:00  INFO 18564 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:13:41.917-03:00  INFO 18564 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T00:13:41.923-03:00  INFO 18564 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:13:41.927-03:00  INFO 18564 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:13:43.096-03:00  INFO 18564 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:13:43.105-03:00  INFO 18564 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T00:13:43.129-03:00  INFO 18564 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 18564 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:13:43.129-03:00 DEBUG 18564 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:13:43.129-03:00  INFO 18564 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:13:43.333-03:00  INFO 18564 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:13:43.347-03:00  INFO 18564 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 5 JPA repository interfaces.
2023-01-29T00:13:43.543-03:00  INFO 18564 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:13:43.553-03:00  INFO 18564 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:13:43.553-03:00  INFO 18564 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:13:43.623-03:00  INFO 18564 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:13:43.623-03:00  INFO 18564 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 492 ms
2023-01-29T00:13:43.710-03:00  INFO 18564 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T00:13:43.718-03:00  INFO 18564 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:872d2578-d46f-4806-8e7a-58cd51d0abbf user=SA
2023-01-29T00:13:43.718-03:00  INFO 18564 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T00:13:43.764-03:00  INFO 18564 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:13:43.766-03:00  WARN 18564 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:13:43.770-03:00  INFO 18564 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:13:43.837-03:00  INFO 18564 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:13:43.838-03:00  INFO 18564 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:13:43.844-03:00  INFO 18564 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:13:43.980-03:00  WARN 18564 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:13:44.916-03:00  INFO 18564 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6cd9cafb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3da20c42, org.springframework.security.web.context.SecurityContextHolderFilter@519f1a7d, org.springframework.security.web.header.HeaderWriterFilter@76145ef9, org.springframework.security.web.authentication.logout.LogoutFilter@56e0e953, com.example.ec.security.JwtTokenFilter@16209621, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5b0af511, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@fbd9b1f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6e9e4332, org.springframework.security.web.session.SessionManagementFilter@279afa4e, org.springframework.security.web.access.ExceptionTranslationFilter@7c8ec235, org.springframework.security.web.access.intercept.AuthorizationFilter@39c821c6]
2023-01-29T00:13:45.290-03:00  INFO 18564 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54923 (http) with context path ''
2023-01-29T00:13:45.294-03:00  INFO 18564 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 2.185 seconds (process running for 10.269)
2023-01-29T00:13:45.426-03:00  INFO 18564 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:13:45.426-03:00  INFO 18564 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:13:45.428-03:00  INFO 18564 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-01-29T00:13:45.435-03:00  INFO 18564 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:45.435-03:00  INFO 18564 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:13:45.457-03:00  INFO 18564 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T00:13:45.520-03:00  INFO 18564 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:45.521-03:00  INFO 18564 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:13:45.521-03:00  INFO 18564 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T00:13:45.530-03:00  INFO 18564 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:13:45.532-03:00  INFO 18564 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T00:13:45.539-03:00  INFO 18564 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:45.539-03:00  INFO 18564 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:13:45.543-03:00  INFO 18564 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T00:13:45.555-03:00  INFO 18564 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:45.555-03:00  INFO 18564 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:13:45.561-03:00  INFO 18564 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T00:13:45.588-03:00  INFO 18564 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:45.588-03:00  INFO 18564 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:13:45.624-03:00  INFO 18564 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T00:13:45.636-03:00  INFO 18564 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:45.636-03:00  INFO 18564 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:13:45.639-03:00  INFO 18564 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T00:13:45.648-03:00  INFO 18564 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:45.648-03:00  INFO 18564 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:13:45.650-03:00  INFO 18564 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T00:13:45.660-03:00  INFO 18564 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:45.660-03:00  INFO 18564 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:13:45.664-03:00  INFO 18564 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T00:13:45.676-03:00  INFO 18564 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:45.676-03:00  INFO 18564 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:13:45.678-03:00  INFO 18564 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T00:13:45.685-03:00  INFO 18564 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:13:45.686-03:00  INFO 18564 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T00:13:45.702-03:00  INFO 18564 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 18564 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:13:45.702-03:00 DEBUG 18564 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:13:45.702-03:00  INFO 18564 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:13:45.860-03:00  INFO 18564 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:13:45.870-03:00  INFO 18564 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T00:13:45.933-03:00  INFO 18564 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:13:45.934-03:00  INFO 18564 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:13:45.935-03:00  INFO 18564 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:13:45.958-03:00  INFO 18564 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T00:13:45.958-03:00  INFO 18564 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 255 ms
2023-01-29T00:13:46.006-03:00  INFO 18564 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T00:13:46.022-03:00  INFO 18564 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:f576bd14-47de-45af-b0bb-69ca87df76cf user=SA
2023-01-29T00:13:46.023-03:00  INFO 18564 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T00:13:46.048-03:00  INFO 18564 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:13:46.050-03:00  WARN 18564 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:13:46.053-03:00  INFO 18564 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:13:46.110-03:00  INFO 18564 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:13:46.110-03:00  INFO 18564 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:13:46.114-03:00  INFO 18564 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:13:46.258-03:00  WARN 18564 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:13:50.131-03:00  INFO 18564 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7000ceae, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4840e7, org.springframework.security.web.context.SecurityContextHolderFilter@1485c961, org.springframework.security.web.header.HeaderWriterFilter@340a5c52, org.springframework.security.web.authentication.logout.LogoutFilter@d3fa0e1, com.example.ec.security.JwtTokenFilter@6f56e5c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6e0a0baa, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@88432f5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7df7b502, org.springframework.security.web.session.SessionManagementFilter@156542b7, org.springframework.security.web.access.ExceptionTranslationFilter@c5ed57e, org.springframework.security.web.access.intercept.AuthorizationFilter@1a6c32a2]
2023-01-29T00:13:50.266-03:00  INFO 18564 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 54931 (http) with context path ''
2023-01-29T00:13:50.270-03:00  INFO 18564 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 4.581 seconds (process running for 15.245)
2023-01-29T00:13:50.294-03:00  INFO 18564 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:13:50.295-03:00  INFO 18564 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:13:50.295-03:00  INFO 18564 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2023-01-29T00:13:50.296-03:00  INFO 18564 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:50.311-03:00  INFO 18564 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTYyMDMwLCJleHAiOjE2NzQ5NjI2MzB9.cnmePHIsfWGj_pWlu_pshKkR-UTDtQpbQ-SvpolISAY]
2023-01-29T00:13:50.324-03:00 ERROR 18564 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:13:50.338-03:00  INFO 18564 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:50.338-03:00  INFO 18564 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:13:50.342-03:00 ERROR 18564 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:13:50.350-03:00  INFO 18564 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:50.353-03:00  INFO 18564 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjIwMzAsImV4cCI6MTY3NDk2MjYzMH0.xsFrW6lAjbMF_8GDMLc-OZE1y_PSShmi-cgmvImZ3yU]
2023-01-29T00:13:50.365-03:00  INFO 18564 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:13:50.368-03:00  INFO 18564 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjIwMzAsImV4cCI6MTY3NDk2MjYzMH0.xsFrW6lAjbMF_8GDMLc-OZE1y_PSShmi-cgmvImZ3yU]
2023-01-29T00:13:50.461-03:00  INFO 18564 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:13:50.462-03:00  INFO 18564 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:13:50.605-03:00  INFO 18564 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:13:50.629-03:00  INFO 18564 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:13:50.630-03:00  INFO 18564 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T00:13:50.769-03:00  INFO 18564 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T00:13:50.779-03:00  INFO 18564 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:13:50.780-03:00  INFO 18564 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T00:13:50.850-03:00  INFO 18564 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T00:21:07.758-03:00  INFO 28576 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 28576 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:21:07.759-03:00 DEBUG 28576 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:21:07.759-03:00  INFO 28576 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:21:08.446-03:00  INFO 28576 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:21:08.503-03:00  INFO 28576 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 51 ms. Found 5 JPA repository interfaces.
2023-01-29T00:21:09.539-03:00  INFO 28576 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:21:09.548-03:00  INFO 28576 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:21:09.549-03:00  INFO 28576 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:21:09.644-03:00  INFO 28576 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:21:09.645-03:00  INFO 28576 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1868 ms
2023-01-29T00:21:09.748-03:00  INFO 28576 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:21:09.932-03:00  INFO 28576 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:f5598499-2dbe-467f-b8c0-0c9a2ce15d78 user=SA
2023-01-29T00:21:09.934-03:00  INFO 28576 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:21:10.085-03:00  INFO 28576 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:21:10.132-03:00  INFO 28576 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:21:10.169-03:00  WARN 28576 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:21:10.302-03:00  INFO 28576 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:21:10.904-03:00  INFO 28576 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:21:10.911-03:00  INFO 28576 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:21:10.926-03:00  INFO 28576 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:21:11.541-03:00  WARN 28576 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:21:12.447-03:00  INFO 28576 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@67cc5a38, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@23b62cc3, org.springframework.security.web.context.SecurityContextHolderFilter@67c2ff5d, org.springframework.security.web.header.HeaderWriterFilter@7789719e, org.springframework.security.web.authentication.logout.LogoutFilter@6ed78a5e, com.example.ec.security.JwtTokenFilter@f4e235e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5d8de155, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d0590bc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1d82e396, org.springframework.security.web.session.SessionManagementFilter@375f276e, org.springframework.security.web.access.ExceptionTranslationFilter@28ec92c9, org.springframework.security.web.access.intercept.AuthorizationFilter@79864d6]
2023-01-29T00:21:12.979-03:00  INFO 28576 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 55157 (http) with context path ''
2023-01-29T00:21:12.987-03:00  INFO 28576 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.418 seconds (process running for 6.413)
2023-01-29T00:21:13.191-03:00  INFO 28576 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:21:13.191-03:00  INFO 28576 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:21:13.192-03:00  INFO 28576 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:21:13.202-03:00  INFO 28576 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:13.227-03:00  INFO 28576 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjI0NzMsImV4cCI6MTY3NDk2MzA3M30.Lik6tfKI9ierZCv5bJwRHnEwGzTFfiVBCnazNr6keJY]
2023-01-29T00:21:13.341-03:00  INFO 28576 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:21:13.343-03:00  INFO 28576 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:21:13.344-03:00  INFO 28576 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:21:38.889-03:00  INFO 29160 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 29160 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:21:38.890-03:00 DEBUG 29160 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:21:38.891-03:00  INFO 29160 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:21:39.664-03:00  INFO 29160 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:21:39.733-03:00  INFO 29160 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 62 ms. Found 5 JPA repository interfaces.
2023-01-29T00:21:40.359-03:00  INFO 29160 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:21:40.523-03:00  INFO 29160 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:580132f0-b1cd-4a52-a555-ead2073ffb4f user=SA
2023-01-29T00:21:40.525-03:00  INFO 29160 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:21:40.675-03:00  INFO 29160 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:21:40.723-03:00  INFO 29160 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:21:40.771-03:00  WARN 29160 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:21:40.886-03:00  INFO 29160 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:21:41.511-03:00  INFO 29160 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:21:41.518-03:00  INFO 29160 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:21:41.536-03:00  INFO 29160 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:21:42.182-03:00  WARN 29160 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:21:43.122-03:00  INFO 29160 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5120886f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4e6c703a, org.springframework.security.web.context.SecurityContextHolderFilter@2d2710a8, org.springframework.security.web.header.HeaderWriterFilter@61d7df22, org.springframework.security.web.authentication.logout.LogoutFilter@6f87bc6c, com.example.ec.security.JwtTokenFilter@58d635de, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5c85ed05, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@23657729, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@282d1023, org.springframework.security.web.session.SessionManagementFilter@65630116, org.springframework.security.web.access.ExceptionTranslationFilter@75e068dc, org.springframework.security.web.access.intercept.AuthorizationFilter@52d9a150]
2023-01-29T00:21:43.609-03:00  INFO 29160 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.928 seconds (process running for 6.383)
2023-01-29T00:21:43.633-03:00  INFO 29160 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:21:43.641-03:00  INFO 29160 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T00:21:43.766-03:00  INFO 29160 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:21:43.771-03:00  INFO 29160 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T00:21:43.782-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:21:43.813-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:21:43.817-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T00:21:43.826-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:21:43.839-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:21:43.849-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:21:43.856-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:21:43.860-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:21:43.865-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:21:43.868-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T00:21:43.869-03:00 DEBUG 29160 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T00:21:43.870-03:00 DEBUG 29160 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T00:21:43.871-03:00 DEBUG 29160 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T00:21:43.871-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:21:43.877-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:21:44.035-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:21:44.039-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T00:21:44.048-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T00:21:44.050-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T00:21:44.053-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T00:21:44.053-03:00 DEBUG 29160 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T00:21:44.053-03:00 DEBUG 29160 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T00:21:44.056-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T00:21:44.060-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:21:44.107-03:00  INFO 29160 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T00:21:44.110-03:00  INFO 29160 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:21:44.112-03:00  INFO 29160 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T00:21:44.116-03:00  INFO 29160 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:21:44.120-03:00  INFO 29160 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:21:45.254-03:00  INFO 29160 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:21:45.264-03:00  INFO 29160 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T00:21:45.283-03:00  INFO 29160 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 29160 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:21:45.283-03:00 DEBUG 29160 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:21:45.283-03:00  INFO 29160 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:21:45.439-03:00  INFO 29160 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:21:45.452-03:00  INFO 29160 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 5 JPA repository interfaces.
2023-01-29T00:21:45.646-03:00  INFO 29160 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:21:45.654-03:00  INFO 29160 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:21:45.654-03:00  INFO 29160 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:21:45.740-03:00  INFO 29160 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:21:45.740-03:00  INFO 29160 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 455 ms
2023-01-29T00:21:45.801-03:00  INFO 29160 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T00:21:45.806-03:00  INFO 29160 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:0f7fdfca-d178-46eb-a07c-90c2b7ff2ce2 user=SA
2023-01-29T00:21:45.806-03:00  INFO 29160 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T00:21:45.843-03:00  INFO 29160 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:21:45.846-03:00  WARN 29160 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:21:45.850-03:00  INFO 29160 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:21:45.906-03:00  INFO 29160 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:21:45.906-03:00  INFO 29160 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:21:45.910-03:00  INFO 29160 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:21:46.037-03:00  WARN 29160 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:21:46.627-03:00  INFO 29160 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@26562718, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1388c465, org.springframework.security.web.context.SecurityContextHolderFilter@73f937d9, org.springframework.security.web.header.HeaderWriterFilter@71da8575, org.springframework.security.web.authentication.logout.LogoutFilter@47ce44ab, com.example.ec.security.JwtTokenFilter@48d1f239, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@65bd41d8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@40699137, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@798e73de, org.springframework.security.web.session.SessionManagementFilter@620bfd8c, org.springframework.security.web.access.ExceptionTranslationFilter@12008a54, org.springframework.security.web.access.intercept.AuthorizationFilter@441eae0b]
2023-01-29T00:21:46.987-03:00  INFO 29160 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 55177 (http) with context path ''
2023-01-29T00:21:46.990-03:00  INFO 29160 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.722 seconds (process running for 9.764)
2023-01-29T00:21:47.139-03:00  INFO 29160 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:21:47.139-03:00  INFO 29160 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:21:47.141-03:00  INFO 29160 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:21:47.150-03:00  INFO 29160 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:47.151-03:00  INFO 29160 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:21:47.173-03:00  INFO 29160 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T00:21:47.239-03:00  INFO 29160 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:47.240-03:00  INFO 29160 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:21:47.241-03:00  INFO 29160 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T00:21:47.250-03:00  INFO 29160 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:21:47.251-03:00  INFO 29160 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T00:21:47.256-03:00  INFO 29160 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:47.257-03:00  INFO 29160 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:21:47.260-03:00  INFO 29160 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T00:21:47.270-03:00  INFO 29160 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:47.270-03:00  INFO 29160 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:21:47.276-03:00  INFO 29160 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T00:21:47.304-03:00  INFO 29160 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:47.304-03:00  INFO 29160 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:21:47.334-03:00  INFO 29160 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T00:21:47.344-03:00  INFO 29160 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:47.345-03:00  INFO 29160 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:21:47.347-03:00  INFO 29160 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T00:21:47.353-03:00  INFO 29160 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:47.354-03:00  INFO 29160 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:21:47.355-03:00  INFO 29160 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T00:21:47.364-03:00  INFO 29160 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:47.364-03:00  INFO 29160 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:21:47.367-03:00  INFO 29160 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T00:21:47.381-03:00  INFO 29160 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:47.381-03:00  INFO 29160 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:21:47.383-03:00  INFO 29160 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T00:21:47.389-03:00  INFO 29160 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:21:47.391-03:00  INFO 29160 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T00:21:47.406-03:00  INFO 29160 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 29160 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:21:47.407-03:00 DEBUG 29160 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:21:47.407-03:00  INFO 29160 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:21:47.568-03:00  INFO 29160 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:21:47.578-03:00  INFO 29160 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T00:21:47.648-03:00  INFO 29160 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:21:47.649-03:00  INFO 29160 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:21:47.649-03:00  INFO 29160 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:21:47.674-03:00  INFO 29160 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T00:21:47.675-03:00  INFO 29160 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 267 ms
2023-01-29T00:21:47.746-03:00  INFO 29160 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T00:21:47.762-03:00  INFO 29160 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:16986715-f7b8-42d2-ba72-255104ff8883 user=SA
2023-01-29T00:21:47.763-03:00  INFO 29160 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T00:21:47.794-03:00  INFO 29160 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:21:47.796-03:00  WARN 29160 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:21:47.799-03:00  INFO 29160 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:21:47.847-03:00  INFO 29160 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:21:47.847-03:00  INFO 29160 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:21:47.851-03:00  INFO 29160 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:21:47.970-03:00  WARN 29160 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:21:49.507-03:00  INFO 29160 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@abadf5b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ef342c2, org.springframework.security.web.context.SecurityContextHolderFilter@75a37ebb, org.springframework.security.web.header.HeaderWriterFilter@7e9ffdff, org.springframework.security.web.authentication.logout.LogoutFilter@2d05291f, com.example.ec.security.JwtTokenFilter@183d22c5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@703e55da, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@714f3e27, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3316aded, org.springframework.security.web.session.SessionManagementFilter@65cae15a, org.springframework.security.web.access.ExceptionTranslationFilter@3ef77de8, org.springframework.security.web.access.intercept.AuthorizationFilter@27a18433]
2023-01-29T00:21:49.679-03:00  INFO 29160 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 55183 (http) with context path ''
2023-01-29T00:21:49.682-03:00  INFO 29160 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 2.289 seconds (process running for 12.457)
2023-01-29T00:21:49.715-03:00  INFO 29160 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:21:49.715-03:00  INFO 29160 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:21:49.716-03:00  INFO 29160 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:21:49.717-03:00  INFO 29160 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:49.737-03:00  INFO 29160 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTYyNTA5LCJleHAiOjE2NzQ5NjMxMDl9.REcLL1DNUvO39bQvDvBDtF5NINxIct1H2LLzWdvFKhM]
2023-01-29T00:21:49.755-03:00 ERROR 29160 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:21:49.774-03:00  INFO 29160 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:49.774-03:00  INFO 29160 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:21:49.778-03:00 ERROR 29160 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:21:49.786-03:00  INFO 29160 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:49.789-03:00  INFO 29160 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjI1MDksImV4cCI6MTY3NDk2MzEwOX0.mh5nGNnUQoiHccK_ajcFfy3AbpN-AiKCE6ApJykEOA8]
2023-01-29T00:21:49.802-03:00  INFO 29160 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:21:49.805-03:00  INFO 29160 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjI1MDksImV4cCI6MTY3NDk2MzEwOX0.mh5nGNnUQoiHccK_ajcFfy3AbpN-AiKCE6ApJykEOA8]
2023-01-29T00:21:49.884-03:00  INFO 29160 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:21:49.886-03:00  INFO 29160 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:21:49.986-03:00  INFO 29160 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:21:50.001-03:00  INFO 29160 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:21:50.002-03:00  INFO 29160 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T00:21:50.070-03:00  INFO 29160 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T00:21:50.095-03:00  INFO 29160 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:21:50.095-03:00  INFO 29160 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T00:21:50.164-03:00  INFO 29160 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T00:22:30.094-03:00  INFO 25780 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 25780 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:22:30.095-03:00 DEBUG 25780 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:22:30.096-03:00  INFO 25780 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:22:30.792-03:00  INFO 25780 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:22:30.855-03:00  INFO 25780 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2023-01-29T00:22:31.332-03:00  INFO 25780 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:22:31.480-03:00  INFO 25780 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:013c2ad0-5b46-4ad0-8f4d-272d19da0ee2 user=SA
2023-01-29T00:22:31.481-03:00  INFO 25780 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:22:31.628-03:00  INFO 25780 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:22:31.688-03:00  INFO 25780 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:22:31.725-03:00  WARN 25780 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:22:31.832-03:00  INFO 25780 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:22:32.463-03:00  INFO 25780 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:22:32.470-03:00  INFO 25780 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:22:32.487-03:00  INFO 25780 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:22:33.168-03:00  WARN 25780 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:22:34.080-03:00  INFO 25780 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@64d0b8e3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@65d3a83, org.springframework.security.web.context.SecurityContextHolderFilter@6ea1fc9, org.springframework.security.web.header.HeaderWriterFilter@2f4bc3ff, org.springframework.security.web.authentication.logout.LogoutFilter@1b5e6983, com.example.ec.security.JwtTokenFilter@7be9582e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@437a4e61, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@268eefe7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@73ac7716, org.springframework.security.web.session.SessionManagementFilter@e0faed6, org.springframework.security.web.access.ExceptionTranslationFilter@645b67d6, org.springframework.security.web.access.intercept.AuthorizationFilter@5ba7391b]
2023-01-29T00:22:34.508-03:00  INFO 25780 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.656 seconds (process running for 5.976)
2023-01-29T00:22:34.532-03:00  INFO 25780 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:22:34.538-03:00  INFO 25780 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T00:22:34.670-03:00  INFO 25780 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:22:34.676-03:00  INFO 25780 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T00:22:34.686-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:22:34.721-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:22:34.726-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T00:22:34.736-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:22:34.751-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:22:34.761-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:22:34.767-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:22:34.770-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:22:34.776-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:22:34.779-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T00:22:34.780-03:00 DEBUG 25780 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T00:22:34.780-03:00 DEBUG 25780 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T00:22:34.781-03:00 DEBUG 25780 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T00:22:34.781-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:22:34.787-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:22:34.944-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:22:34.950-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T00:22:34.958-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T00:22:34.961-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T00:22:34.964-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T00:22:34.964-03:00 DEBUG 25780 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T00:22:34.964-03:00 DEBUG 25780 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T00:22:34.967-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T00:22:34.970-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:22:35.017-03:00  INFO 25780 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T00:22:35.020-03:00  INFO 25780 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:22:35.022-03:00  INFO 25780 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T00:22:35.025-03:00  INFO 25780 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:22:35.028-03:00  INFO 25780 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:22:36.136-03:00  INFO 25780 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:22:36.145-03:00  INFO 25780 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T00:22:36.166-03:00  INFO 25780 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 25780 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:22:36.166-03:00 DEBUG 25780 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:22:36.166-03:00  INFO 25780 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:22:36.318-03:00  INFO 25780 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:22:36.328-03:00  INFO 25780 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T00:22:36.522-03:00  INFO 25780 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:22:36.532-03:00  INFO 25780 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:22:36.532-03:00  INFO 25780 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:22:36.603-03:00  INFO 25780 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:22:36.603-03:00  INFO 25780 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 435 ms
2023-01-29T00:22:36.666-03:00  INFO 25780 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T00:22:36.669-03:00  INFO 25780 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:008df7eb-6e1a-4cf1-b0d9-e6ab226c64d9 user=SA
2023-01-29T00:22:36.670-03:00  INFO 25780 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T00:22:36.701-03:00  INFO 25780 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:22:36.703-03:00  WARN 25780 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:22:36.706-03:00  INFO 25780 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:22:36.755-03:00  INFO 25780 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:22:36.755-03:00  INFO 25780 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:22:36.759-03:00  INFO 25780 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:22:36.884-03:00  WARN 25780 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:22:37.459-03:00  INFO 25780 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@fbd9b1f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7f85482c, org.springframework.security.web.context.SecurityContextHolderFilter@6ef7e510, org.springframework.security.web.header.HeaderWriterFilter@48d1f239, org.springframework.security.web.authentication.logout.LogoutFilter@279afa4e, com.example.ec.security.JwtTokenFilter@56e0e953, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b89bf47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7c8ec235, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5ace2ce3, org.springframework.security.web.session.SessionManagementFilter@798e73de, org.springframework.security.web.access.ExceptionTranslationFilter@1388c465, org.springframework.security.web.access.intercept.AuthorizationFilter@5b0af511]
2023-01-29T00:22:37.725-03:00  INFO 25780 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 55210 (http) with context path ''
2023-01-29T00:22:37.728-03:00  INFO 25780 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.579 seconds (process running for 9.196)
2023-01-29T00:22:37.857-03:00  INFO 25780 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:22:37.858-03:00  INFO 25780 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:22:37.859-03:00  INFO 25780 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:22:37.867-03:00  INFO 25780 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:37.867-03:00  INFO 25780 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:22:37.888-03:00  INFO 25780 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T00:22:37.949-03:00  INFO 25780 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:37.949-03:00  INFO 25780 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:22:37.950-03:00  INFO 25780 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T00:22:37.959-03:00  INFO 25780 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:22:37.960-03:00  INFO 25780 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T00:22:37.966-03:00  INFO 25780 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:37.966-03:00  INFO 25780 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:22:37.968-03:00  INFO 25780 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T00:22:37.979-03:00  INFO 25780 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:37.979-03:00  INFO 25780 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:22:37.984-03:00  INFO 25780 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T00:22:38.010-03:00  INFO 25780 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:38.010-03:00  INFO 25780 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:22:38.041-03:00  INFO 25780 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T00:22:38.051-03:00  INFO 25780 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:38.051-03:00  INFO 25780 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:22:38.053-03:00  INFO 25780 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T00:22:38.060-03:00  INFO 25780 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:38.060-03:00  INFO 25780 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:22:38.061-03:00  INFO 25780 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T00:22:38.069-03:00  INFO 25780 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:38.069-03:00  INFO 25780 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:22:38.073-03:00  INFO 25780 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T00:22:38.084-03:00  INFO 25780 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:38.084-03:00  INFO 25780 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:22:38.086-03:00  INFO 25780 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T00:22:38.092-03:00  INFO 25780 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:22:38.093-03:00  INFO 25780 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T00:22:38.107-03:00  INFO 25780 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 25780 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:22:38.107-03:00 DEBUG 25780 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:22:38.107-03:00  INFO 25780 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:22:38.236-03:00  INFO 25780 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:22:38.246-03:00  INFO 25780 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T00:22:38.304-03:00  INFO 25780 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:22:38.305-03:00  INFO 25780 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:22:38.306-03:00  INFO 25780 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:22:38.329-03:00  INFO 25780 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T00:22:38.329-03:00  INFO 25780 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 221 ms
2023-01-29T00:22:38.362-03:00  INFO 25780 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T00:22:38.379-03:00  INFO 25780 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:819eaffe-53ef-48bd-96d0-681808a46c01 user=SA
2023-01-29T00:22:38.380-03:00  INFO 25780 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T00:22:38.405-03:00  INFO 25780 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:22:38.408-03:00  WARN 25780 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:22:38.410-03:00  INFO 25780 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:22:38.462-03:00  INFO 25780 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:22:38.462-03:00  INFO 25780 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:22:38.466-03:00  INFO 25780 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:22:38.571-03:00  WARN 25780 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:22:39.470-03:00  INFO 25780 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6e0a0baa, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@88432f5, org.springframework.security.web.context.SecurityContextHolderFilter@6f8aecd3, org.springframework.security.web.header.HeaderWriterFilter@183d22c5, org.springframework.security.web.authentication.logout.LogoutFilter@340a5c52, com.example.ec.security.JwtTokenFilter@374ba9a8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7bfb46b2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@aa16802, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d3fa0e1, org.springframework.security.web.session.SessionManagementFilter@3316aded, org.springframework.security.web.access.ExceptionTranslationFilter@ef342c2, org.springframework.security.web.access.intercept.AuthorizationFilter@1485c961]
2023-01-29T00:22:39.579-03:00  INFO 25780 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 55216 (http) with context path ''
2023-01-29T00:22:39.582-03:00  INFO 25780 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.487 seconds (process running for 11.051)
2023-01-29T00:22:39.607-03:00  INFO 25780 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:22:39.607-03:00  INFO 25780 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:22:39.608-03:00  INFO 25780 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2023-01-29T00:22:39.609-03:00  INFO 25780 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:39.628-03:00  INFO 25780 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTYyNTU5LCJleHAiOjE2NzQ5NjMxNTl9.HO0lga2RxSM1GqGRBIKug4lejBJhtHxR49BOQDNL1jk]
2023-01-29T00:22:39.642-03:00 ERROR 25780 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:22:39.657-03:00  INFO 25780 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:39.657-03:00  INFO 25780 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:22:39.661-03:00 ERROR 25780 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:22:39.671-03:00  INFO 25780 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:39.674-03:00  INFO 25780 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjI1NTksImV4cCI6MTY3NDk2MzE1OX0.BVJofu87TnOjm4YuZcfIuxd-jHx8y-pCAFI_0HQsv18]
2023-01-29T00:22:39.687-03:00  INFO 25780 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:22:39.690-03:00  INFO 25780 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjI1NTksImV4cCI6MTY3NDk2MzE1OX0.BVJofu87TnOjm4YuZcfIuxd-jHx8y-pCAFI_0HQsv18]
2023-01-29T00:22:39.742-03:00  INFO 25780 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:22:39.743-03:00  INFO 25780 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:22:39.801-03:00  INFO 25780 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:22:39.829-03:00  INFO 25780 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:22:39.830-03:00  INFO 25780 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T00:22:39.859-03:00  INFO 25780 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T00:22:39.890-03:00  INFO 25780 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:22:39.890-03:00  INFO 25780 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T00:22:39.917-03:00  INFO 25780 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T00:41:34.034-03:00  INFO 1436 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 1436 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:41:34.035-03:00 DEBUG 1436 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:41:34.036-03:00  INFO 1436 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:41:34.756-03:00  INFO 1436 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:41:34.821-03:00  INFO 1436 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 57 ms. Found 5 JPA repository interfaces.
2023-01-29T00:41:35.308-03:00  INFO 1436 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:41:35.463-03:00  INFO 1436 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:632a8367-b712-46e9-879d-0b6f9893054a user=SA
2023-01-29T00:41:35.465-03:00  INFO 1436 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:41:35.620-03:00  INFO 1436 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:41:35.677-03:00  INFO 1436 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:41:35.716-03:00  WARN 1436 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:41:35.819-03:00  INFO 1436 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:41:36.425-03:00  INFO 1436 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:41:36.434-03:00  INFO 1436 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:41:36.464-03:00  INFO 1436 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:41:37.231-03:00  WARN 1436 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:41:38.211-03:00  INFO 1436 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@509e4d53, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6f915016, org.springframework.security.web.context.SecurityContextHolderFilter@9203db8, org.springframework.security.web.header.HeaderWriterFilter@2d2710a8, org.springframework.security.web.authentication.logout.LogoutFilter@505bc480, com.example.ec.security.JwtTokenFilter@533165e7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@65d3a83, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7be9582e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@324e62e2, org.springframework.security.web.session.SessionManagementFilter@7cd239f6, org.springframework.security.web.access.ExceptionTranslationFilter@755057c7, org.springframework.security.web.access.intercept.AuthorizationFilter@624baf71]
2023-01-29T00:41:38.714-03:00  INFO 1436 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.878 seconds (process running for 6.252)
2023-01-29T00:41:38.745-03:00  INFO 1436 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:41:38.751-03:00  INFO 1436 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T00:41:38.888-03:00  INFO 1436 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:41:38.893-03:00  INFO 1436 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T00:41:38.905-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:41:38.938-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:41:38.945-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T00:41:38.955-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:41:38.970-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:41:38.980-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:41:38.988-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:41:38.993-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:41:38.999-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:41:39.002-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T00:41:39.003-03:00 DEBUG 1436 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T00:41:39.004-03:00 DEBUG 1436 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T00:41:39.005-03:00 DEBUG 1436 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T00:41:39.006-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:41:39.012-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:41:39.163-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:41:39.168-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T00:41:39.174-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T00:41:39.176-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T00:41:39.178-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T00:41:39.178-03:00 DEBUG 1436 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T00:41:39.179-03:00 DEBUG 1436 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T00:41:39.182-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T00:41:39.184-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:41:39.228-03:00  INFO 1436 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T00:41:39.230-03:00  INFO 1436 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:41:39.232-03:00  INFO 1436 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T00:41:39.235-03:00  INFO 1436 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:41:39.238-03:00  INFO 1436 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:41:40.379-03:00  INFO 1436 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:41:40.388-03:00  INFO 1436 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T00:41:40.412-03:00  INFO 1436 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 1436 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:41:40.412-03:00 DEBUG 1436 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:41:40.412-03:00  INFO 1436 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:41:40.573-03:00  INFO 1436 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:41:40.584-03:00  INFO 1436 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T00:41:40.758-03:00  INFO 1436 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:41:40.767-03:00  INFO 1436 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:41:40.767-03:00  INFO 1436 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:41:40.852-03:00  INFO 1436 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:41:40.853-03:00  INFO 1436 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 438 ms
2023-01-29T00:41:40.926-03:00  INFO 1436 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T00:41:40.932-03:00  INFO 1436 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:e862ae0c-1e2e-44f2-b7b9-10d4de24d6cc user=SA
2023-01-29T00:41:40.932-03:00  INFO 1436 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T00:41:40.968-03:00  INFO 1436 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:41:40.971-03:00  WARN 1436 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:41:40.975-03:00  INFO 1436 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:41:41.041-03:00  INFO 1436 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:41:41.041-03:00  INFO 1436 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:41:41.047-03:00  INFO 1436 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:41:41.179-03:00  WARN 1436 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:41:42.390-03:00  INFO 1436 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@48d1f239, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@798e73de, org.springframework.security.web.context.SecurityContextHolderFilter@40699137, org.springframework.security.web.header.HeaderWriterFilter@73f937d9, org.springframework.security.web.authentication.logout.LogoutFilter@441eae0b, com.example.ec.security.JwtTokenFilter@6ef7e510, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7d33e32b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@47ce44ab, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3b89bf47, org.springframework.security.web.session.SessionManagementFilter@65bd41d8, org.springframework.security.web.access.ExceptionTranslationFilter@620bfd8c, org.springframework.security.web.access.intercept.AuthorizationFilter@1388c465]
2023-01-29T00:41:42.843-03:00  INFO 1436 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 55788 (http) with context path ''
2023-01-29T00:41:42.847-03:00  INFO 1436 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 2.454 seconds (process running for 10.385)
2023-01-29T00:41:42.992-03:00  INFO 1436 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:41:42.992-03:00  INFO 1436 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:41:42.994-03:00  INFO 1436 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:41:43.000-03:00  INFO 1436 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:43.001-03:00  INFO 1436 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:41:43.023-03:00  INFO 1436 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T00:41:43.089-03:00  INFO 1436 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:43.089-03:00  INFO 1436 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:41:43.090-03:00  INFO 1436 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T00:41:43.100-03:00  INFO 1436 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:41:43.102-03:00  INFO 1436 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T00:41:43.110-03:00  INFO 1436 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:43.110-03:00  INFO 1436 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:41:43.114-03:00  INFO 1436 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T00:41:43.128-03:00  INFO 1436 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:43.129-03:00  INFO 1436 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:41:43.134-03:00  INFO 1436 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T00:41:43.164-03:00  INFO 1436 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:43.164-03:00  INFO 1436 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:41:43.201-03:00  INFO 1436 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T00:41:43.214-03:00  INFO 1436 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:43.214-03:00  INFO 1436 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:41:43.217-03:00  INFO 1436 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T00:41:43.225-03:00  INFO 1436 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:43.225-03:00  INFO 1436 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:41:43.226-03:00  INFO 1436 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T00:41:43.236-03:00  INFO 1436 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:43.236-03:00  INFO 1436 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:41:43.240-03:00  INFO 1436 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T00:41:43.254-03:00  INFO 1436 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:43.254-03:00  INFO 1436 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:41:43.256-03:00  INFO 1436 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T00:41:43.263-03:00  INFO 1436 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:41:43.264-03:00  INFO 1436 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T00:41:43.280-03:00  INFO 1436 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 1436 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:41:43.281-03:00 DEBUG 1436 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:41:43.281-03:00  INFO 1436 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:41:43.473-03:00  INFO 1436 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:41:43.485-03:00  INFO 1436 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T00:41:43.568-03:00  INFO 1436 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:41:43.569-03:00  INFO 1436 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:41:43.569-03:00  INFO 1436 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:41:43.602-03:00  INFO 1436 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T00:41:43.602-03:00  INFO 1436 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 320 ms
2023-01-29T00:41:43.675-03:00  INFO 1436 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T00:41:43.706-03:00  INFO 1436 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:3f2c6227-f634-4a76-9b68-b56041b66a9b user=SA
2023-01-29T00:41:43.707-03:00  INFO 1436 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T00:41:43.749-03:00  INFO 1436 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:41:43.752-03:00  WARN 1436 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:41:43.756-03:00  INFO 1436 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:41:43.819-03:00  INFO 1436 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:41:43.819-03:00  INFO 1436 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:41:43.824-03:00  INFO 1436 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:41:43.951-03:00  WARN 1436 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:41:45.895-03:00  INFO 1436 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@183d22c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3316aded, org.springframework.security.web.context.SecurityContextHolderFilter@714f3e27, org.springframework.security.web.header.HeaderWriterFilter@75a37ebb, org.springframework.security.web.authentication.logout.LogoutFilter@27a18433, com.example.ec.security.JwtTokenFilter@6f8aecd3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@433dd165, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2d05291f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7bfb46b2, org.springframework.security.web.session.SessionManagementFilter@703e55da, org.springframework.security.web.access.ExceptionTranslationFilter@65cae15a, org.springframework.security.web.access.intercept.AuthorizationFilter@ef342c2]
2023-01-29T00:41:46.022-03:00  INFO 1436 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 55794 (http) with context path ''
2023-01-29T00:41:46.026-03:00  INFO 1436 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 2.76 seconds (process running for 13.565)
2023-01-29T00:41:46.052-03:00  INFO 1436 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:41:46.052-03:00  INFO 1436 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:41:46.053-03:00  INFO 1436 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:41:46.053-03:00  INFO 1436 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:46.068-03:00  INFO 1436 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTYzNzA2LCJleHAiOjE2NzQ5NjQzMDZ9.D2uFTB35Lq2kXGvilPzg3UI7LX4lxxxjjE3hkoohpA4]
2023-01-29T00:41:46.081-03:00 ERROR 1436 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:41:46.096-03:00  INFO 1436 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:46.096-03:00  INFO 1436 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:41:46.101-03:00 ERROR 1436 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:41:46.108-03:00  INFO 1436 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:46.111-03:00  INFO 1436 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjM3MDYsImV4cCI6MTY3NDk2NDMwNn0.tPMLY9pfzCaG4NVG29PSLuNEf2rGlnnuhc4QnmsZ2sw]
2023-01-29T00:41:46.122-03:00  INFO 1436 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:41:46.125-03:00  INFO 1436 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjM3MDYsImV4cCI6MTY3NDk2NDMwNn0.tPMLY9pfzCaG4NVG29PSLuNEf2rGlnnuhc4QnmsZ2sw]
2023-01-29T00:41:46.181-03:00  INFO 1436 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:41:46.183-03:00  INFO 1436 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:41:46.247-03:00  INFO 1436 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:41:46.275-03:00  INFO 1436 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:41:46.275-03:00  INFO 1436 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T00:41:46.328-03:00  INFO 1436 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T00:41:46.352-03:00  INFO 1436 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:41:46.352-03:00  INFO 1436 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T00:41:46.405-03:00  INFO 1436 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T00:42:53.758-03:00  INFO 26388 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 26388 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:42:53.759-03:00 DEBUG 26388 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:42:53.760-03:00  INFO 26388 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:42:54.444-03:00  INFO 26388 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:42:54.507-03:00  INFO 26388 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2023-01-29T00:42:54.985-03:00  INFO 26388 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:42:55.132-03:00  INFO 26388 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:65c2be28-7e2a-4b6b-aad4-67e989bc3b59 user=SA
2023-01-29T00:42:55.133-03:00  INFO 26388 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:42:55.275-03:00  INFO 26388 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:42:55.317-03:00  INFO 26388 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:42:55.356-03:00  WARN 26388 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:42:55.465-03:00  INFO 26388 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:42:56.036-03:00  INFO 26388 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:42:56.043-03:00  INFO 26388 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:42:56.061-03:00  INFO 26388 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:42:56.671-03:00  WARN 26388 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:42:57.555-03:00  INFO 26388 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5dc90de7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3071d086, org.springframework.security.web.context.SecurityContextHolderFilter@6afdb486, org.springframework.security.web.header.HeaderWriterFilter@61c98f5, org.springframework.security.web.authentication.logout.LogoutFilter@6153aca1, com.example.ec.security.JwtTokenFilter@20711b02, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@598f6c93, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@65630116, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@52d9a150, org.springframework.security.web.session.SessionManagementFilter@4d62bb8b, org.springframework.security.web.access.ExceptionTranslationFilter@13231e7b, org.springframework.security.web.access.intercept.AuthorizationFilter@178f5b5b]
2023-01-29T00:42:57.951-03:00  INFO 26388 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.389 seconds (process running for 5.717)
2023-01-29T00:42:57.978-03:00  INFO 26388 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:42:57.988-03:00  INFO 26388 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T00:42:58.109-03:00  INFO 26388 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:42:58.114-03:00  INFO 26388 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T00:42:58.124-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:42:58.152-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:42:58.158-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T00:42:58.166-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:42:58.179-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:42:58.188-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:42:58.194-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:42:58.197-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:42:58.203-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:42:58.206-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T00:42:58.207-03:00 DEBUG 26388 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T00:42:58.208-03:00 DEBUG 26388 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T00:42:58.208-03:00 DEBUG 26388 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T00:42:58.208-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:42:58.214-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:42:58.373-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:42:58.378-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T00:42:58.385-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T00:42:58.387-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T00:42:58.390-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T00:42:58.390-03:00 DEBUG 26388 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T00:42:58.391-03:00 DEBUG 26388 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T00:42:58.396-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T00:42:58.399-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:42:58.450-03:00  INFO 26388 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T00:42:58.453-03:00  INFO 26388 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:42:58.454-03:00  INFO 26388 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T00:42:58.458-03:00  INFO 26388 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:42:58.460-03:00  INFO 26388 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:42:59.449-03:00  WARN 26388 --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23505, SQLState: 23505
2023-01-29T00:42:59.449-03:00 ERROR 26388 --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.SECURITY_USER(ID) ( /* key:1 */ CAST(1 AS BIGINT), 'admin', '$2a$12$ZhGS.zcWt1gnZ9xRNp7inOvo5hIT0ngN7N.pN939cShxKvaQYHnnu', 'Administrator', 'Adminstrator')"; SQL statement:
insert into security_user (id, first_name, last_name, password, username) values (default, ?, ?, ?, ?) [23505-214]
2023-01-29T00:42:59.579-03:00  INFO 26388 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:42:59.588-03:00  INFO 26388 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T00:42:59.610-03:00  INFO 26388 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 26388 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:42:59.611-03:00 DEBUG 26388 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:42:59.611-03:00  INFO 26388 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:42:59.781-03:00  INFO 26388 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:42:59.792-03:00  INFO 26388 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T00:42:59.957-03:00  INFO 26388 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:42:59.965-03:00  INFO 26388 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:42:59.965-03:00  INFO 26388 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:43:00.042-03:00  INFO 26388 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:43:00.043-03:00  INFO 26388 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 431 ms
2023-01-29T00:43:00.116-03:00  INFO 26388 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T00:43:00.120-03:00  INFO 26388 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:e75dd914-769a-42fb-9ea0-eaa46d507439 user=SA
2023-01-29T00:43:00.120-03:00  INFO 26388 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T00:43:00.155-03:00  INFO 26388 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:43:00.157-03:00  WARN 26388 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:43:00.160-03:00  INFO 26388 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:43:00.212-03:00  INFO 26388 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:43:00.212-03:00  INFO 26388 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:43:00.216-03:00  INFO 26388 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:43:00.326-03:00  WARN 26388 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:43:01.031-03:00  INFO 26388 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@e68c09d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6b7a96e1, org.springframework.security.web.context.SecurityContextHolderFilter@2ed4e0e9, org.springframework.security.web.header.HeaderWriterFilter@4aedac7f, org.springframework.security.web.authentication.logout.LogoutFilter@5837b801, com.example.ec.security.JwtTokenFilter@35caab4c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@57441348, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@706dd38b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@e8f7aa3, org.springframework.security.web.session.SessionManagementFilter@7f8bc54e, org.springframework.security.web.access.ExceptionTranslationFilter@6c92af74, org.springframework.security.web.access.intercept.AuthorizationFilter@31f151ff]
2023-01-29T00:43:01.476-03:00  INFO 26388 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 55829 (http) with context path ''
2023-01-29T00:43:01.479-03:00  INFO 26388 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.887 seconds (process running for 9.246)
2023-01-29T00:43:01.621-03:00  INFO 26388 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:43:01.622-03:00  INFO 26388 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:43:01.623-03:00  INFO 26388 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:43:01.629-03:00  INFO 26388 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:01.630-03:00  INFO 26388 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:43:01.651-03:00  INFO 26388 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T00:43:01.715-03:00  INFO 26388 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:01.715-03:00  INFO 26388 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:43:01.716-03:00  INFO 26388 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T00:43:01.724-03:00  INFO 26388 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:43:01.725-03:00  INFO 26388 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T00:43:01.731-03:00  INFO 26388 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:01.731-03:00  INFO 26388 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:43:01.733-03:00  INFO 26388 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T00:43:01.743-03:00  INFO 26388 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:01.743-03:00  INFO 26388 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:43:01.748-03:00  INFO 26388 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T00:43:01.771-03:00  INFO 26388 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:01.771-03:00  INFO 26388 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:43:01.802-03:00  INFO 26388 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T00:43:01.812-03:00  INFO 26388 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:01.812-03:00  INFO 26388 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:43:01.814-03:00  INFO 26388 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T00:43:01.820-03:00  INFO 26388 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:01.821-03:00  INFO 26388 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:43:01.822-03:00  INFO 26388 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T00:43:01.831-03:00  INFO 26388 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:01.831-03:00  INFO 26388 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:43:01.834-03:00  INFO 26388 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T00:43:01.848-03:00  INFO 26388 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:01.848-03:00  INFO 26388 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:43:01.850-03:00  INFO 26388 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T00:43:01.857-03:00  INFO 26388 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:43:01.858-03:00  INFO 26388 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T00:43:01.871-03:00  INFO 26388 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 26388 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:43:01.871-03:00 DEBUG 26388 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:43:01.871-03:00  INFO 26388 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:43:02.037-03:00  INFO 26388 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:43:02.047-03:00  INFO 26388 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T00:43:02.122-03:00  INFO 26388 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:43:02.123-03:00  INFO 26388 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:43:02.124-03:00  INFO 26388 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:43:02.151-03:00  INFO 26388 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T00:43:02.152-03:00  INFO 26388 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 280 ms
2023-01-29T00:43:02.209-03:00  INFO 26388 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T00:43:02.226-03:00  INFO 26388 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:6927fc4f-d4f7-4fc4-af20-3c5256f503ae user=SA
2023-01-29T00:43:02.226-03:00  INFO 26388 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T00:43:02.250-03:00  INFO 26388 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:43:02.252-03:00  WARN 26388 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:43:02.255-03:00  INFO 26388 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:43:02.302-03:00  INFO 26388 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:43:02.302-03:00  INFO 26388 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:43:02.306-03:00  INFO 26388 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:43:02.410-03:00  WARN 26388 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:43:03.797-03:00  INFO 26388 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@608c36a6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@efc5686, org.springframework.security.web.context.SecurityContextHolderFilter@695d804, org.springframework.security.web.header.HeaderWriterFilter@12a96a6e, org.springframework.security.web.authentication.logout.LogoutFilter@d4c6a43, com.example.ec.security.JwtTokenFilter@4907b755, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@24a301a3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7d80f543, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@72dc7b05, org.springframework.security.web.session.SessionManagementFilter@18e8003a, org.springframework.security.web.access.ExceptionTranslationFilter@6ef99da8, org.springframework.security.web.access.intercept.AuthorizationFilter@4b0e0dd5]
2023-01-29T00:43:03.896-03:00  INFO 26388 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 55835 (http) with context path ''
2023-01-29T00:43:03.899-03:00  INFO 26388 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 2.039 seconds (process running for 11.666)
2023-01-29T00:43:03.924-03:00  INFO 26388 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:43:03.924-03:00  INFO 26388 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:43:03.925-03:00  INFO 26388 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2023-01-29T00:43:03.925-03:00  INFO 26388 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:03.940-03:00  INFO 26388 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTYzNzgzLCJleHAiOjE2NzQ5NjQzODN9.uoLX5dmVw4kLguhfTN2vc7eXpeR-8qVunUOXx_LvVb4]
2023-01-29T00:43:03.952-03:00 ERROR 26388 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:43:03.961-03:00  INFO 26388 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:03.961-03:00  INFO 26388 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:43:03.964-03:00 ERROR 26388 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:43:03.972-03:00  INFO 26388 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:03.975-03:00  INFO 26388 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjM3ODMsImV4cCI6MTY3NDk2NDM4M30.APwYsYEaW9bTQPYw8GuGOBHnquuOm-8XPeh8trd1INs]
2023-01-29T00:43:03.987-03:00  INFO 26388 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:43:03.990-03:00  INFO 26388 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjM3ODMsImV4cCI6MTY3NDk2NDM4M30.APwYsYEaW9bTQPYw8GuGOBHnquuOm-8XPeh8trd1INs]
2023-01-29T00:43:04.050-03:00  INFO 26388 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:43:04.052-03:00  INFO 26388 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:43:04.108-03:00  INFO 26388 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:43:04.146-03:00  INFO 26388 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:43:04.147-03:00  INFO 26388 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T00:43:04.192-03:00  INFO 26388 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T00:43:04.222-03:00  INFO 26388 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:43:04.223-03:00  INFO 26388 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T00:43:04.258-03:00  INFO 26388 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T00:44:36.896-03:00  INFO 26572 --- [main] c.e.e.s.UserServiceIntegrationTest       : Starting UserServiceIntegrationTest using Java 18.0.2.1 with PID 26572 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:44:36.896-03:00 DEBUG 26572 --- [main] c.e.e.s.UserServiceIntegrationTest       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:44:36.897-03:00  INFO 26572 --- [main] c.e.e.s.UserServiceIntegrationTest       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:44:37.606-03:00  INFO 26572 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:44:37.663-03:00  INFO 26572 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 51 ms. Found 5 JPA repository interfaces.
2023-01-29T00:44:38.116-03:00  INFO 26572 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:44:38.280-03:00  INFO 26572 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:9950f40b-b450-41c2-bb22-34153d65e386 user=SA
2023-01-29T00:44:38.282-03:00  INFO 26572 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:44:38.437-03:00  INFO 26572 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:44:38.530-03:00  INFO 26572 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:44:38.724-03:00  WARN 26572 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:44:38.872-03:00  INFO 26572 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:44:39.584-03:00  INFO 26572 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:44:39.591-03:00  INFO 26572 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:44:39.607-03:00  INFO 26572 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:44:40.256-03:00  WARN 26572 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:44:41.080-03:00  INFO 26572 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b578779, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4e797a39, org.springframework.security.web.context.SecurityContextHolderFilter@312e8eaf, org.springframework.security.web.header.HeaderWriterFilter@57657b96, org.springframework.security.web.authentication.logout.LogoutFilter@36def543, com.example.ec.security.JwtTokenFilter@41d6d6c4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2f307fcc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3aec2f59, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4349389d, org.springframework.security.web.session.SessionManagementFilter@6cc022ac, org.springframework.security.web.access.ExceptionTranslationFilter@2b3ee95e, org.springframework.security.web.access.intercept.AuthorizationFilter@a15e3c1]
2023-01-29T00:44:41.524-03:00  INFO 26572 --- [main] c.e.e.s.UserServiceIntegrationTest       : Started UserServiceIntegrationTest in 4.8 seconds (process running for 5.765)
2023-01-29T00:44:41.674-03:00  INFO 26572 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:44:41.760-03:00  INFO 26572 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:44:42.781-03:00  WARN 26572 --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23505, SQLState: 23505
2023-01-29T00:44:42.781-03:00 ERROR 26572 --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.SECURITY_USER(ID) ( /* key:1 */ CAST(1 AS BIGINT), 'admin', '$2a$12$ZhGS.zcWt1gnZ9xRNp7inOvo5hIT0ngN7N.pN939cShxKvaQYHnnu', 'Administrator', 'Adminstrator')"; SQL statement:
insert into security_user (id, first_name, last_name, password, username) values (default, ?, ?, ?, ?) [23505-214]
2023-01-29T00:44:42.805-03:00  INFO 26572 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:44:42.808-03:00  INFO 26572 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:44:42.810-03:00  INFO 26572 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:47:40.089-03:00  INFO 24328 --- [main] c.e.e.s.UserServiceIntegrationTest       : Starting UserServiceIntegrationTest using Java 18.0.2.1 with PID 24328 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:47:40.089-03:00 DEBUG 24328 --- [main] c.e.e.s.UserServiceIntegrationTest       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:47:40.090-03:00  INFO 24328 --- [main] c.e.e.s.UserServiceIntegrationTest       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:47:40.801-03:00  INFO 24328 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:47:40.862-03:00  INFO 24328 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2023-01-29T00:47:41.311-03:00  INFO 24328 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:47:41.479-03:00  INFO 24328 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:0a0fd627-b75d-4b9d-9047-2b6c991502b9 user=SA
2023-01-29T00:47:41.481-03:00  INFO 24328 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:47:41.636-03:00  INFO 24328 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:47:41.682-03:00  INFO 24328 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:47:41.816-03:00  WARN 24328 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:47:41.920-03:00  INFO 24328 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:47:42.587-03:00  INFO 24328 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:47:42.594-03:00  INFO 24328 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:47:42.611-03:00  INFO 24328 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:47:43.263-03:00  WARN 24328 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:47:44.199-03:00  INFO 24328 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@31f4fdc5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@64e680c5, org.springframework.security.web.context.SecurityContextHolderFilter@361d169a, org.springframework.security.web.header.HeaderWriterFilter@1b1d1558, org.springframework.security.web.authentication.logout.LogoutFilter@4e797a39, com.example.ec.security.JwtTokenFilter@1dcf5f38, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@52288c65, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@33ef393a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@64ba5a71, org.springframework.security.web.session.SessionManagementFilter@fefd4a2, org.springframework.security.web.access.ExceptionTranslationFilter@179f30b7, org.springframework.security.web.access.intercept.AuthorizationFilter@68a7bc12]
2023-01-29T00:47:44.683-03:00  INFO 24328 --- [main] c.e.e.s.UserServiceIntegrationTest       : Started UserServiceIntegrationTest in 4.763 seconds (process running for 5.707)
2023-01-29T00:47:44.836-03:00  INFO 24328 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:47:44.923-03:00  INFO 24328 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:47:45.942-03:00  WARN 24328 --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23505, SQLState: 23505
2023-01-29T00:47:45.943-03:00 ERROR 24328 --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.SECURITY_USER(ID) ( /* key:1 */ CAST(1 AS BIGINT), 'admin', '$2a$12$ZhGS.zcWt1gnZ9xRNp7inOvo5hIT0ngN7N.pN939cShxKvaQYHnnu', 'Administrator', 'Adminstrator')"; SQL statement:
insert into security_user (id, first_name, last_name, password, username) values (default, ?, ?, ?, ?) [23505-214]
2023-01-29T00:47:45.970-03:00  INFO 24328 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:47:45.971-03:00  INFO 24328 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:47:45.973-03:00  INFO 24328 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:50:35.391-03:00  INFO 29288 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 29288 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:50:35.392-03:00 DEBUG 29288 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:50:35.393-03:00  INFO 29288 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:50:36.056-03:00  INFO 29288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:50:36.117-03:00  INFO 29288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 53 ms. Found 5 JPA repository interfaces.
2023-01-29T00:50:36.588-03:00  INFO 29288 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:50:36.735-03:00  INFO 29288 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:7062b9e5-3642-4a55-9f83-fbc1fd3208cc user=SA
2023-01-29T00:50:36.737-03:00  INFO 29288 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:50:36.872-03:00  INFO 29288 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:50:36.926-03:00  INFO 29288 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:50:36.965-03:00  WARN 29288 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:50:37.084-03:00  INFO 29288 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:50:37.665-03:00  INFO 29288 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:50:37.672-03:00  INFO 29288 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:50:37.690-03:00  INFO 29288 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:50:38.316-03:00  WARN 29288 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:50:39.208-03:00  INFO 29288 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@693c7741, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d3b4646, org.springframework.security.web.context.SecurityContextHolderFilter@3071d086, org.springframework.security.web.header.HeaderWriterFilter@4c25687b, org.springframework.security.web.authentication.logout.LogoutFilter@1a345c6c, com.example.ec.security.JwtTokenFilter@175c4ae5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@52d9a150, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@476a38d9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@21bf1b1f, org.springframework.security.web.session.SessionManagementFilter@47baf547, org.springframework.security.web.access.ExceptionTranslationFilter@7cd239f6, org.springframework.security.web.access.intercept.AuthorizationFilter@4a2bc71f]
2023-01-29T00:50:39.626-03:00  INFO 29288 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.442 seconds (process running for 5.791)
2023-01-29T00:50:39.651-03:00  INFO 29288 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:50:39.659-03:00  INFO 29288 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T00:50:39.791-03:00  INFO 29288 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:50:39.796-03:00  INFO 29288 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T00:50:39.806-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:50:39.836-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:50:39.841-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T00:50:39.851-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:50:39.864-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:50:39.874-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:50:39.882-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:50:39.886-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:50:39.891-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:50:39.894-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T00:50:39.894-03:00 DEBUG 29288 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T00:50:39.895-03:00 DEBUG 29288 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T00:50:39.896-03:00 DEBUG 29288 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T00:50:39.896-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:50:39.902-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:50:40.047-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:50:40.061-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T00:50:40.068-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T00:50:40.070-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T00:50:40.072-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T00:50:40.073-03:00 DEBUG 29288 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T00:50:40.074-03:00 DEBUG 29288 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T00:50:40.077-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T00:50:40.079-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:50:40.123-03:00  INFO 29288 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T00:50:40.125-03:00  INFO 29288 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:50:40.126-03:00  INFO 29288 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T00:50:40.131-03:00  INFO 29288 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:50:40.134-03:00  INFO 29288 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:50:41.124-03:00  WARN 29288 --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23505, SQLState: 23505
2023-01-29T00:50:41.124-03:00 ERROR 29288 --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.SECURITY_USER(ID) ( /* key:1 */ CAST(1 AS BIGINT), 'admin', '$2a$12$ZhGS.zcWt1gnZ9xRNp7inOvo5hIT0ngN7N.pN939cShxKvaQYHnnu', 'Administrator', 'Adminstrator')"; SQL statement:
insert into security_user (id, first_name, last_name, password, username) values (default, ?, ?, ?, ?) [23505-214]
2023-01-29T00:50:41.270-03:00  INFO 29288 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:50:41.281-03:00  INFO 29288 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T00:50:41.308-03:00  INFO 29288 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 29288 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:50:41.308-03:00 DEBUG 29288 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:50:41.308-03:00  INFO 29288 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:50:41.496-03:00  INFO 29288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:50:41.509-03:00  INFO 29288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 5 JPA repository interfaces.
2023-01-29T00:50:41.689-03:00  INFO 29288 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:50:41.697-03:00  INFO 29288 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:50:41.697-03:00  INFO 29288 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:50:41.761-03:00  INFO 29288 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:50:41.761-03:00  INFO 29288 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 451 ms
2023-01-29T00:50:41.815-03:00  INFO 29288 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T00:50:41.818-03:00  INFO 29288 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:6b3d5718-e0e7-47a2-819d-0bf33db9530e user=SA
2023-01-29T00:50:41.819-03:00  INFO 29288 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T00:50:41.851-03:00  INFO 29288 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:50:41.853-03:00  WARN 29288 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:50:41.856-03:00  INFO 29288 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:50:41.906-03:00  INFO 29288 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:50:41.907-03:00  INFO 29288 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:50:41.910-03:00  INFO 29288 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:50:42.035-03:00  WARN 29288 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:50:42.705-03:00  INFO 29288 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6c861b25, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@73ccc475, org.springframework.security.web.context.SecurityContextHolderFilter@e68c09d, org.springframework.security.web.header.HeaderWriterFilter@2f1e3e1c, org.springframework.security.web.authentication.logout.LogoutFilter@462b3fc7, com.example.ec.security.JwtTokenFilter@4184bced, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6b7a96e1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@35caab4c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@117bb3a4, org.springframework.security.web.session.SessionManagementFilter@31f151ff, org.springframework.security.web.access.ExceptionTranslationFilter@5837b801, org.springframework.security.web.access.intercept.AuthorizationFilter@19a920d1]
2023-01-29T00:50:42.958-03:00  INFO 29288 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56087 (http) with context path ''
2023-01-29T00:50:42.964-03:00  INFO 29288 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.679 seconds (process running for 9.128)
2023-01-29T00:50:43.098-03:00  INFO 29288 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:50:43.098-03:00  INFO 29288 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:50:43.099-03:00  INFO 29288 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:50:43.107-03:00  INFO 29288 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:43.107-03:00  INFO 29288 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:50:43.129-03:00  INFO 29288 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T00:50:43.190-03:00  INFO 29288 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:43.190-03:00  INFO 29288 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:50:43.191-03:00  INFO 29288 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T00:50:43.199-03:00  INFO 29288 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:50:43.200-03:00  INFO 29288 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T00:50:43.210-03:00  INFO 29288 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:43.210-03:00  INFO 29288 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:50:43.213-03:00  INFO 29288 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T00:50:43.223-03:00  INFO 29288 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:43.223-03:00  INFO 29288 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:50:43.229-03:00  INFO 29288 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T00:50:43.253-03:00  INFO 29288 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:43.253-03:00  INFO 29288 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:50:43.287-03:00  INFO 29288 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T00:50:43.297-03:00  INFO 29288 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:43.298-03:00  INFO 29288 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:50:43.300-03:00  INFO 29288 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T00:50:43.307-03:00  INFO 29288 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:43.307-03:00  INFO 29288 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:50:43.309-03:00  INFO 29288 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T00:50:43.317-03:00  INFO 29288 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:43.317-03:00  INFO 29288 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:50:43.320-03:00  INFO 29288 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T00:50:43.332-03:00  INFO 29288 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:43.332-03:00  INFO 29288 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:50:43.334-03:00  INFO 29288 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T00:50:43.340-03:00  INFO 29288 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:50:43.341-03:00  INFO 29288 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T00:50:43.362-03:00  INFO 29288 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 29288 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:50:43.362-03:00 DEBUG 29288 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:50:43.362-03:00  INFO 29288 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:50:43.489-03:00  INFO 29288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:50:43.498-03:00  INFO 29288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T00:50:43.560-03:00  INFO 29288 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:50:43.561-03:00  INFO 29288 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:50:43.561-03:00  INFO 29288 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:50:43.595-03:00  INFO 29288 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T00:50:43.595-03:00  INFO 29288 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 232 ms
2023-01-29T00:50:43.630-03:00  INFO 29288 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T00:50:43.645-03:00  INFO 29288 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:97b2080c-22aa-43fe-82ee-b9fec70bf1c7 user=SA
2023-01-29T00:50:43.645-03:00  INFO 29288 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T00:50:43.670-03:00  INFO 29288 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:50:43.672-03:00  WARN 29288 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:50:43.675-03:00  INFO 29288 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:50:43.719-03:00  INFO 29288 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:50:43.719-03:00  INFO 29288 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:50:43.723-03:00  INFO 29288 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:50:43.857-03:00  WARN 29288 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:50:44.505-03:00  INFO 29288 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@37717b97, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@12837172, org.springframework.security.web.context.SecurityContextHolderFilter@4907b755, org.springframework.security.web.header.HeaderWriterFilter@608c36a6, org.springframework.security.web.authentication.logout.LogoutFilter@6b89cbc0, com.example.ec.security.JwtTokenFilter@c0ed96c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@72dc7b05, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@73e45afe, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@57149e0a, org.springframework.security.web.session.SessionManagementFilter@efc5686, org.springframework.security.web.access.ExceptionTranslationFilter@4b0e0dd5, org.springframework.security.web.access.intercept.AuthorizationFilter@2b7e07e0]
2023-01-29T00:50:44.601-03:00  INFO 29288 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56093 (http) with context path ''
2023-01-29T00:50:44.605-03:00  INFO 29288 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.261 seconds (process running for 10.77)
2023-01-29T00:50:44.631-03:00  INFO 29288 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:50:44.631-03:00  INFO 29288 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:50:44.632-03:00  INFO 29288 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:50:44.632-03:00  INFO 29288 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:44.651-03:00  INFO 29288 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTY0MjQ0LCJleHAiOjE2NzQ5NjQ4NDR9.d5bJCwzI1PFkcyA1aET-mPVNToaHKqXhz72sVxbqfRc]
2023-01-29T00:50:44.664-03:00 ERROR 29288 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:50:44.676-03:00  INFO 29288 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:44.676-03:00  INFO 29288 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:50:44.679-03:00 ERROR 29288 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:50:44.686-03:00  INFO 29288 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:44.689-03:00  INFO 29288 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjQyNDQsImV4cCI6MTY3NDk2NDg0NH0.TD_z_pwNyFlgYv3BI4ujXhE7LHHJ77W3joh82hKQMas]
2023-01-29T00:50:44.699-03:00  INFO 29288 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:50:44.702-03:00  INFO 29288 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjQyNDQsImV4cCI6MTY3NDk2NDg0NH0.TD_z_pwNyFlgYv3BI4ujXhE7LHHJ77W3joh82hKQMas]
2023-01-29T00:50:44.754-03:00  INFO 29288 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:50:44.756-03:00  INFO 29288 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:50:44.792-03:00  INFO 29288 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:50:44.816-03:00  INFO 29288 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:50:44.816-03:00  INFO 29288 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T00:50:44.853-03:00  INFO 29288 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T00:50:44.877-03:00  INFO 29288 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:50:44.877-03:00  INFO 29288 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T00:50:44.908-03:00  INFO 29288 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T00:51:08.856-03:00  INFO 26940 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 26940 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:51:08.856-03:00 DEBUG 26940 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:51:08.857-03:00  INFO 26940 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:51:09.583-03:00  INFO 26940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:51:09.643-03:00  INFO 26940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2023-01-29T00:51:10.121-03:00  INFO 26940 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:51:10.270-03:00  INFO 26940 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:3afa3fe5-5f81-4b2c-9534-67761a76486a user=SA
2023-01-29T00:51:10.272-03:00  INFO 26940 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:51:10.420-03:00  INFO 26940 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:51:10.463-03:00  INFO 26940 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:51:10.499-03:00  WARN 26940 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:51:10.605-03:00  INFO 26940 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:51:11.176-03:00  INFO 26940 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:51:11.183-03:00  INFO 26940 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:51:11.201-03:00  INFO 26940 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:51:11.823-03:00  WARN 26940 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:51:12.679-03:00  INFO 26940 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@30b2d267, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a740449, org.springframework.security.web.context.SecurityContextHolderFilter@61d7df22, org.springframework.security.web.header.HeaderWriterFilter@55b7f0d, org.springframework.security.web.authentication.logout.LogoutFilter@65d3a83, com.example.ec.security.JwtTokenFilter@4f66f2dd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4cce889e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@28d2afd8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@33ac7934, org.springframework.security.web.session.SessionManagementFilter@53b81a55, org.springframework.security.web.access.ExceptionTranslationFilter@2297c8bf, org.springframework.security.web.access.intercept.AuthorizationFilter@184e5c44]
2023-01-29T00:51:13.110-03:00  INFO 26940 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.464 seconds (process running for 5.748)
2023-01-29T00:51:13.136-03:00  INFO 26940 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:51:13.142-03:00  INFO 26940 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T00:51:13.279-03:00  INFO 26940 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:51:13.284-03:00  INFO 26940 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T00:51:13.294-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:51:13.328-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:51:13.335-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T00:51:13.343-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:51:13.356-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:51:13.365-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:51:13.372-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:51:13.375-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:51:13.380-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:51:13.383-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T00:51:13.384-03:00 DEBUG 26940 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T00:51:13.385-03:00 DEBUG 26940 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T00:51:13.385-03:00 DEBUG 26940 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T00:51:13.386-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:51:13.391-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:51:13.540-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:51:13.545-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T00:51:13.554-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T00:51:13.558-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T00:51:13.560-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T00:51:13.560-03:00 DEBUG 26940 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T00:51:13.560-03:00 DEBUG 26940 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T00:51:13.563-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T00:51:13.566-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:51:13.611-03:00  INFO 26940 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T00:51:13.614-03:00  INFO 26940 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:51:13.615-03:00  INFO 26940 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T00:51:13.620-03:00  INFO 26940 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:51:13.623-03:00  INFO 26940 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:51:14.615-03:00  WARN 26940 --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23505, SQLState: 23505
2023-01-29T00:51:14.615-03:00 ERROR 26940 --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.SECURITY_USER(ID) ( /* key:1 */ CAST(1 AS BIGINT), 'admin', '$2a$12$ZhGS.zcWt1gnZ9xRNp7inOvo5hIT0ngN7N.pN939cShxKvaQYHnnu', 'Administrator', 'Adminstrator')"; SQL statement:
insert into security_user (id, first_name, last_name, password, username) values (default, ?, ?, ?, ?) [23505-214]
2023-01-29T00:51:14.746-03:00  INFO 26940 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:51:14.755-03:00  INFO 26940 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T00:51:14.779-03:00  INFO 26940 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 26940 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:51:14.779-03:00 DEBUG 26940 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:51:14.779-03:00  INFO 26940 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:51:14.953-03:00  INFO 26940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:51:14.964-03:00  INFO 26940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T00:51:15.140-03:00  INFO 26940 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:51:15.148-03:00  INFO 26940 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:51:15.148-03:00  INFO 26940 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:51:15.237-03:00  INFO 26940 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:51:15.238-03:00  INFO 26940 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 458 ms
2023-01-29T00:51:15.307-03:00  INFO 26940 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T00:51:15.310-03:00  INFO 26940 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:9888d104-bc6b-4c7b-956e-dd15007e2398 user=SA
2023-01-29T00:51:15.311-03:00  INFO 26940 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T00:51:15.348-03:00  INFO 26940 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:51:15.350-03:00  WARN 26940 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:51:15.352-03:00  INFO 26940 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:51:15.404-03:00  INFO 26940 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:51:15.404-03:00  INFO 26940 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:51:15.409-03:00  INFO 26940 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:51:15.530-03:00  WARN 26940 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:51:16.151-03:00  INFO 26940 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@35caab4c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@e8f7aa3, org.springframework.security.web.context.SecurityContextHolderFilter@706dd38b, org.springframework.security.web.header.HeaderWriterFilter@2ed4e0e9, org.springframework.security.web.authentication.logout.LogoutFilter@31f151ff, com.example.ec.security.JwtTokenFilter@462b3fc7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@51edc97d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5837b801, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7959747d, org.springframework.security.web.session.SessionManagementFilter@57441348, org.springframework.security.web.access.ExceptionTranslationFilter@7f8bc54e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b7a96e1]
2023-01-29T00:51:16.451-03:00  INFO 26940 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56112 (http) with context path ''
2023-01-29T00:51:16.455-03:00  INFO 26940 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.695 seconds (process running for 9.093)
2023-01-29T00:51:16.593-03:00  INFO 26940 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:51:16.593-03:00  INFO 26940 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:51:16.594-03:00  INFO 26940 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:51:16.602-03:00  INFO 26940 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:16.602-03:00  INFO 26940 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:51:16.625-03:00  INFO 26940 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T00:51:16.692-03:00  INFO 26940 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:16.692-03:00  INFO 26940 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:51:16.693-03:00  INFO 26940 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T00:51:16.702-03:00  INFO 26940 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:51:16.703-03:00  INFO 26940 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T00:51:16.709-03:00  INFO 26940 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:16.709-03:00  INFO 26940 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:51:16.712-03:00  INFO 26940 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T00:51:16.722-03:00  INFO 26940 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:16.722-03:00  INFO 26940 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:51:16.729-03:00  INFO 26940 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T00:51:16.755-03:00  INFO 26940 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:16.755-03:00  INFO 26940 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:51:16.791-03:00  INFO 26940 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T00:51:16.801-03:00  INFO 26940 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:16.801-03:00  INFO 26940 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:51:16.803-03:00  INFO 26940 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T00:51:16.810-03:00  INFO 26940 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:16.810-03:00  INFO 26940 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:51:16.812-03:00  INFO 26940 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T00:51:16.820-03:00  INFO 26940 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:16.820-03:00  INFO 26940 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:51:16.823-03:00  INFO 26940 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T00:51:16.835-03:00  INFO 26940 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:16.835-03:00  INFO 26940 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:51:16.838-03:00  INFO 26940 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T00:51:16.844-03:00  INFO 26940 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:51:16.845-03:00  INFO 26940 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T00:51:16.860-03:00  INFO 26940 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 26940 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:51:16.860-03:00 DEBUG 26940 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:51:16.860-03:00  INFO 26940 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:51:17.005-03:00  INFO 26940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:51:17.015-03:00  INFO 26940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T00:51:17.079-03:00  INFO 26940 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:51:17.080-03:00  INFO 26940 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:51:17.080-03:00  INFO 26940 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:51:17.102-03:00  INFO 26940 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T00:51:17.103-03:00  INFO 26940 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 242 ms
2023-01-29T00:51:17.160-03:00  INFO 26940 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T00:51:17.178-03:00  INFO 26940 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:a373f425-586e-412f-ad66-79a8fe83ba80 user=SA
2023-01-29T00:51:17.179-03:00  INFO 26940 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T00:51:17.206-03:00  INFO 26940 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:51:17.208-03:00  WARN 26940 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:51:17.211-03:00  INFO 26940 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:51:17.262-03:00  INFO 26940 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:51:17.263-03:00  INFO 26940 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:51:17.267-03:00  INFO 26940 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:51:17.392-03:00  WARN 26940 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:51:18.576-03:00  INFO 26940 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@73e45afe, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1f406a62, org.springframework.security.web.context.SecurityContextHolderFilter@d4c6a43, org.springframework.security.web.header.HeaderWriterFilter@7d80f543, org.springframework.security.web.authentication.logout.LogoutFilter@efc5686, com.example.ec.security.JwtTokenFilter@6b89cbc0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@315edc50, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4b0e0dd5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7a9c91e7, org.springframework.security.web.session.SessionManagementFilter@2531c319, org.springframework.security.web.access.ExceptionTranslationFilter@24a301a3, org.springframework.security.web.access.intercept.AuthorizationFilter@72dc7b05]
2023-01-29T00:51:18.690-03:00  INFO 26940 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56118 (http) with context path ''
2023-01-29T00:51:18.694-03:00  INFO 26940 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.846 seconds (process running for 11.333)
2023-01-29T00:51:18.724-03:00  INFO 26940 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:51:18.724-03:00  INFO 26940 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:51:18.725-03:00  INFO 26940 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:51:18.725-03:00  INFO 26940 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:18.740-03:00  INFO 26940 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTY0Mjc4LCJleHAiOjE2NzQ5NjQ4Nzh9.EAuagn7gTSX5eDkLWaAN00plO0mE6Y7UL_3Ysfu-tg8]
2023-01-29T00:51:18.753-03:00 ERROR 26940 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:51:18.763-03:00  INFO 26940 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:18.764-03:00  INFO 26940 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:51:18.766-03:00 ERROR 26940 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:51:18.774-03:00  INFO 26940 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:18.778-03:00  INFO 26940 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjQyNzgsImV4cCI6MTY3NDk2NDg3OH0.2CFpAqfnXsd9EUcm6eqJh3galk73nGNRh58fbt3kBZU]
2023-01-29T00:51:18.790-03:00  INFO 26940 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:51:18.793-03:00  INFO 26940 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjQyNzgsImV4cCI6MTY3NDk2NDg3OH0.2CFpAqfnXsd9EUcm6eqJh3galk73nGNRh58fbt3kBZU]
2023-01-29T00:51:18.838-03:00  INFO 26940 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:51:18.839-03:00  INFO 26940 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:51:18.877-03:00  INFO 26940 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:51:18.891-03:00  INFO 26940 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:51:18.891-03:00  INFO 26940 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T00:51:18.924-03:00  INFO 26940 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T00:51:18.934-03:00  INFO 26940 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:51:18.934-03:00  INFO 26940 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T00:51:18.999-03:00  INFO 26940 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T00:53:25.719-03:00  INFO 10692 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 10692 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:53:25.719-03:00 DEBUG 10692 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:53:25.720-03:00  INFO 10692 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:53:26.378-03:00  INFO 10692 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:53:26.432-03:00  INFO 10692 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 48 ms. Found 5 JPA repository interfaces.
2023-01-29T00:53:26.905-03:00  INFO 10692 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:53:27.056-03:00  INFO 10692 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:c4364ab9-e7e7-4e3f-8720-3ab8ad300c7e user=SA
2023-01-29T00:53:27.057-03:00  INFO 10692 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:53:27.193-03:00  INFO 10692 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:53:27.235-03:00  INFO 10692 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:53:27.283-03:00  WARN 10692 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:53:27.394-03:00  INFO 10692 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:53:28.050-03:00  INFO 10692 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:53:28.060-03:00  INFO 10692 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:53:28.084-03:00  INFO 10692 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:53:28.717-03:00  WARN 10692 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:53:29.611-03:00  INFO 10692 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6153aca1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@30b2d267, org.springframework.security.web.context.SecurityContextHolderFilter@c8e99, org.springframework.security.web.header.HeaderWriterFilter@13231e7b, org.springframework.security.web.authentication.logout.LogoutFilter@64d0b8e3, com.example.ec.security.JwtTokenFilter@5a740449, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@722e1bff, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4cce889e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4f66f2dd, org.springframework.security.web.session.SessionManagementFilter@4624e3d1, org.springframework.security.web.access.ExceptionTranslationFilter@2f4bc3ff, org.springframework.security.web.access.intercept.AuthorizationFilter@5c21b22e]
2023-01-29T00:53:30.028-03:00  INFO 10692 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.562 seconds (process running for 6.022)
2023-01-29T00:53:30.056-03:00  INFO 10692 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:53:30.063-03:00  INFO 10692 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T00:53:30.203-03:00  INFO 10692 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:53:30.207-03:00  INFO 10692 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T00:53:30.217-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:53:30.246-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:53:30.250-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T00:53:30.260-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:53:30.272-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:53:30.282-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:53:30.288-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:53:30.291-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:53:30.296-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:53:30.298-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T00:53:30.299-03:00 DEBUG 10692 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T00:53:30.300-03:00 DEBUG 10692 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T00:53:30.300-03:00 DEBUG 10692 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T00:53:30.301-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:53:30.306-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:53:30.451-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:53:30.455-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T00:53:30.462-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T00:53:30.465-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T00:53:30.467-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T00:53:30.467-03:00 DEBUG 10692 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T00:53:30.468-03:00 DEBUG 10692 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T00:53:30.471-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T00:53:30.473-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:53:30.517-03:00  INFO 10692 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T00:53:30.519-03:00  INFO 10692 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:53:30.521-03:00  INFO 10692 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T00:53:30.524-03:00  INFO 10692 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:53:30.528-03:00  INFO 10692 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:53:31.662-03:00  INFO 10692 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:53:31.671-03:00  INFO 10692 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T00:53:31.690-03:00  INFO 10692 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 10692 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:53:31.691-03:00 DEBUG 10692 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:53:31.691-03:00  INFO 10692 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:53:31.840-03:00  INFO 10692 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:53:31.850-03:00  INFO 10692 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T00:53:32.014-03:00  INFO 10692 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:53:32.022-03:00  INFO 10692 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:53:32.023-03:00  INFO 10692 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:53:32.091-03:00  INFO 10692 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:53:32.092-03:00  INFO 10692 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 400 ms
2023-01-29T00:53:32.146-03:00  INFO 10692 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T00:53:32.149-03:00  INFO 10692 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:0519af7b-c0a2-4fed-a8f4-ad22db61a1e8 user=SA
2023-01-29T00:53:32.149-03:00  INFO 10692 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T00:53:32.179-03:00  INFO 10692 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:53:32.181-03:00  WARN 10692 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:53:32.184-03:00  INFO 10692 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:53:32.230-03:00  INFO 10692 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:53:32.231-03:00  INFO 10692 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:53:32.234-03:00  INFO 10692 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:53:32.376-03:00  WARN 10692 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:53:33.471-03:00  INFO 10692 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@279afa4e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@519f1a7d, org.springframework.security.web.context.SecurityContextHolderFilter@1388c465, org.springframework.security.web.header.HeaderWriterFilter@441eae0b, org.springframework.security.web.authentication.logout.LogoutFilter@3b89bf47, com.example.ec.security.JwtTokenFilter@5b0af511, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@48d1f239, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@798e73de, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fbd9b1f, org.springframework.security.web.session.SessionManagementFilter@26562718, org.springframework.security.web.access.ExceptionTranslationFilter@48f27e0b, org.springframework.security.web.access.intercept.AuthorizationFilter@76145ef9]
2023-01-29T00:53:33.719-03:00  INFO 10692 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56175 (http) with context path ''
2023-01-29T00:53:33.723-03:00  INFO 10692 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 2.05 seconds (process running for 9.717)
2023-01-29T00:53:33.856-03:00  INFO 10692 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:53:33.856-03:00  INFO 10692 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:53:33.857-03:00  INFO 10692 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:53:33.864-03:00  INFO 10692 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:33.865-03:00  INFO 10692 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:53:33.887-03:00  INFO 10692 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T00:53:33.955-03:00  INFO 10692 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:33.955-03:00  INFO 10692 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:53:33.957-03:00  INFO 10692 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T00:53:33.967-03:00  INFO 10692 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:53:33.968-03:00  INFO 10692 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T00:53:33.974-03:00  INFO 10692 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:33.974-03:00  INFO 10692 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:53:33.977-03:00  INFO 10692 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T00:53:33.987-03:00  INFO 10692 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:33.987-03:00  INFO 10692 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:53:33.992-03:00  INFO 10692 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T00:53:34.021-03:00  INFO 10692 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:34.021-03:00  INFO 10692 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:53:34.053-03:00  INFO 10692 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T00:53:34.064-03:00  INFO 10692 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:34.064-03:00  INFO 10692 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:53:34.066-03:00  INFO 10692 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T00:53:34.072-03:00  INFO 10692 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:34.073-03:00  INFO 10692 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:53:34.074-03:00  INFO 10692 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T00:53:34.081-03:00  INFO 10692 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:34.082-03:00  INFO 10692 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:53:34.084-03:00  INFO 10692 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T00:53:34.096-03:00  INFO 10692 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:34.096-03:00  INFO 10692 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:53:34.098-03:00  INFO 10692 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T00:53:34.104-03:00  INFO 10692 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:53:34.104-03:00  INFO 10692 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T00:53:34.117-03:00  INFO 10692 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 10692 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:53:34.117-03:00 DEBUG 10692 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:53:34.117-03:00  INFO 10692 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:53:34.267-03:00  INFO 10692 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:53:34.277-03:00  INFO 10692 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T00:53:34.348-03:00  INFO 10692 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:53:34.349-03:00  INFO 10692 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:53:34.349-03:00  INFO 10692 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:53:34.380-03:00  INFO 10692 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T00:53:34.380-03:00  INFO 10692 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 261 ms
2023-01-29T00:53:34.431-03:00  INFO 10692 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T00:53:34.464-03:00  INFO 10692 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:c3678f74-3d9c-4882-86f5-81c049619e49 user=SA
2023-01-29T00:53:34.464-03:00  INFO 10692 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T00:53:34.497-03:00  INFO 10692 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:53:34.499-03:00  WARN 10692 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:53:34.502-03:00  INFO 10692 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:53:34.544-03:00  INFO 10692 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:53:34.544-03:00  INFO 10692 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:53:34.547-03:00  INFO 10692 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:53:34.642-03:00  WARN 10692 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:53:35.400-03:00  INFO 10692 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@340a5c52, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@156542b7, org.springframework.security.web.context.SecurityContextHolderFilter@ef342c2, org.springframework.security.web.header.HeaderWriterFilter@27a18433, org.springframework.security.web.authentication.logout.LogoutFilter@7bfb46b2, com.example.ec.security.JwtTokenFilter@1485c961, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@183d22c5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3316aded, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6e0a0baa, org.springframework.security.web.session.SessionManagementFilter@abadf5b, org.springframework.security.web.access.ExceptionTranslationFilter@2f9739e0, org.springframework.security.web.access.intercept.AuthorizationFilter@c5ed57e]
2023-01-29T00:53:35.517-03:00  INFO 10692 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56181 (http) with context path ''
2023-01-29T00:53:35.520-03:00  INFO 10692 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.414 seconds (process running for 11.514)
2023-01-29T00:53:35.547-03:00  INFO 10692 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:53:35.547-03:00  INFO 10692 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:53:35.548-03:00  INFO 10692 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:53:35.548-03:00  INFO 10692 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:35.562-03:00  INFO 10692 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTY0NDE1LCJleHAiOjE2NzQ5NjUwMTV9.ZE1L-1MUU1DgKLfdbapk8vimmygeWPupjK6lF15J0jw]
2023-01-29T00:53:35.574-03:00 ERROR 10692 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:53:35.588-03:00  INFO 10692 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:35.588-03:00  INFO 10692 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:53:35.592-03:00 ERROR 10692 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:53:35.599-03:00  INFO 10692 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:35.602-03:00  INFO 10692 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjQ0MTUsImV4cCI6MTY3NDk2NTAxNX0.5K-7Y6wsfCPtLJbWuiQ2ztPeHu3bFD2HEifh0iD_EO4]
2023-01-29T00:53:35.614-03:00  INFO 10692 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:53:35.618-03:00  INFO 10692 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjQ0MTUsImV4cCI6MTY3NDk2NTAxNX0.5K-7Y6wsfCPtLJbWuiQ2ztPeHu3bFD2HEifh0iD_EO4]
2023-01-29T00:53:35.678-03:00  INFO 10692 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:53:35.680-03:00  INFO 10692 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:53:35.742-03:00  INFO 10692 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:53:35.770-03:00  INFO 10692 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:53:35.770-03:00  INFO 10692 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T00:53:35.811-03:00  INFO 10692 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T00:53:35.820-03:00  INFO 10692 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:53:35.821-03:00  INFO 10692 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T00:53:35.861-03:00  INFO 10692 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T00:54:53.802-03:00  INFO 26068 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 26068 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:54:53.803-03:00 DEBUG 26068 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:54:53.803-03:00  INFO 26068 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:54:54.543-03:00  INFO 26068 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:54:54.607-03:00  INFO 26068 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 57 ms. Found 5 JPA repository interfaces.
2023-01-29T00:54:55.126-03:00  INFO 26068 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:54:55.329-03:00  INFO 26068 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:d686a939-f54f-4aed-80cf-d95b4ce9cb13 user=SA
2023-01-29T00:54:55.332-03:00  INFO 26068 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:54:55.559-03:00  INFO 26068 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:54:55.655-03:00  INFO 26068 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:54:55.698-03:00  WARN 26068 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:54:55.813-03:00  INFO 26068 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:54:56.424-03:00  INFO 26068 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:54:56.431-03:00  INFO 26068 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:54:56.449-03:00  INFO 26068 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:54:57.111-03:00  WARN 26068 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:54:57.963-03:00  INFO 26068 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@324e62e2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1018552d, org.springframework.security.web.context.SecurityContextHolderFilter@7be9582e, org.springframework.security.web.header.HeaderWriterFilter@23657729, org.springframework.security.web.authentication.logout.LogoutFilter@58a93f51, com.example.ec.security.JwtTokenFilter@75eca6d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@125ace20, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7dbc77ca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d2afbdf, org.springframework.security.web.session.SessionManagementFilter@9203db8, org.springframework.security.web.access.ExceptionTranslationFilter@1d642682, org.springframework.security.web.access.intercept.AuthorizationFilter@509e4d53]
2023-01-29T00:54:58.419-03:00  INFO 26068 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.816 seconds (process running for 6.182)
2023-01-29T00:54:58.446-03:00  INFO 26068 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:54:58.454-03:00  INFO 26068 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T00:54:58.586-03:00  INFO 26068 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:54:58.591-03:00  INFO 26068 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T00:54:58.602-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:54:58.632-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:54:58.637-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T00:54:58.645-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:54:58.659-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:54:58.670-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:54:58.678-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:54:58.683-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T00:54:58.688-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:54:58.693-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T00:54:58.694-03:00 DEBUG 26068 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T00:54:58.695-03:00 DEBUG 26068 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T00:54:58.695-03:00 DEBUG 26068 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T00:54:58.696-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:54:58.701-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T00:54:58.848-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T00:54:58.854-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T00:54:58.863-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T00:54:58.866-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T00:54:58.869-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T00:54:58.870-03:00 DEBUG 26068 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T00:54:58.870-03:00 DEBUG 26068 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T00:54:58.872-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T00:54:58.875-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T00:54:58.921-03:00  INFO 26068 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T00:54:58.924-03:00  INFO 26068 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:54:58.925-03:00  INFO 26068 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T00:54:58.928-03:00  INFO 26068 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:54:58.932-03:00  INFO 26068 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:55:00.085-03:00  INFO 26068 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:55:00.098-03:00  INFO 26068 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T00:55:00.130-03:00  INFO 26068 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 26068 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:55:00.131-03:00 DEBUG 26068 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:55:00.131-03:00  INFO 26068 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:55:00.308-03:00  INFO 26068 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:55:00.320-03:00  INFO 26068 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T00:55:00.520-03:00  INFO 26068 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:55:00.530-03:00  INFO 26068 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:55:00.530-03:00  INFO 26068 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:55:00.602-03:00  INFO 26068 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:55:00.603-03:00  INFO 26068 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 470 ms
2023-01-29T00:55:00.692-03:00  INFO 26068 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T00:55:00.699-03:00  INFO 26068 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:43fada63-5465-4a6d-98cb-342242a37ae1 user=SA
2023-01-29T00:55:00.700-03:00  INFO 26068 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T00:55:00.746-03:00  INFO 26068 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:55:00.749-03:00  WARN 26068 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:55:00.753-03:00  INFO 26068 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:55:00.836-03:00  INFO 26068 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:55:00.836-03:00  INFO 26068 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:55:00.843-03:00  INFO 26068 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:55:00.986-03:00  WARN 26068 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:55:01.837-03:00  INFO 26068 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6ef7e510, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b89bf47, org.springframework.security.web.context.SecurityContextHolderFilter@47ce44ab, org.springframework.security.web.header.HeaderWriterFilter@40699137, org.springframework.security.web.authentication.logout.LogoutFilter@1388c465, com.example.ec.security.JwtTokenFilter@7c8ec235, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@48f27e0b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@441eae0b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@76145ef9, org.springframework.security.web.session.SessionManagementFilter@7d33e32b, org.springframework.security.web.access.ExceptionTranslationFilter@65bd41d8, org.springframework.security.web.access.intercept.AuthorizationFilter@798e73de]
2023-01-29T00:55:02.119-03:00  INFO 26068 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56223 (http) with context path ''
2023-01-29T00:55:02.123-03:00  INFO 26068 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 2.02 seconds (process running for 9.886)
2023-01-29T00:55:02.276-03:00  INFO 26068 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:55:02.276-03:00  INFO 26068 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:55:02.278-03:00  INFO 26068 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:55:02.286-03:00  INFO 26068 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:02.287-03:00  INFO 26068 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:55:02.309-03:00  INFO 26068 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T00:55:02.382-03:00  INFO 26068 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:02.383-03:00  INFO 26068 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:55:02.383-03:00  INFO 26068 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T00:55:02.393-03:00  INFO 26068 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:55:02.394-03:00  INFO 26068 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T00:55:02.401-03:00  INFO 26068 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:02.401-03:00  INFO 26068 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:55:02.405-03:00  INFO 26068 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T00:55:02.414-03:00  INFO 26068 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:02.414-03:00  INFO 26068 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:55:02.421-03:00  INFO 26068 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T00:55:02.450-03:00  INFO 26068 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:02.450-03:00  INFO 26068 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:55:02.482-03:00  INFO 26068 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T00:55:02.495-03:00  INFO 26068 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:02.495-03:00  INFO 26068 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:55:02.498-03:00  INFO 26068 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T00:55:02.504-03:00  INFO 26068 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:02.504-03:00  INFO 26068 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:55:02.506-03:00  INFO 26068 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T00:55:02.516-03:00  INFO 26068 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:02.516-03:00  INFO 26068 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:55:02.519-03:00  INFO 26068 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T00:55:02.532-03:00  INFO 26068 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:02.532-03:00  INFO 26068 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:55:02.534-03:00  INFO 26068 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T00:55:02.540-03:00  INFO 26068 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T00:55:02.542-03:00  INFO 26068 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T00:55:02.556-03:00  INFO 26068 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 26068 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:55:02.556-03:00 DEBUG 26068 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:55:02.557-03:00  INFO 26068 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:55:02.691-03:00  INFO 26068 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:55:02.701-03:00  INFO 26068 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T00:55:02.767-03:00  INFO 26068 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:55:02.768-03:00  INFO 26068 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:55:02.768-03:00  INFO 26068 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:55:02.791-03:00  INFO 26068 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T00:55:02.791-03:00  INFO 26068 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 233 ms
2023-01-29T00:55:02.835-03:00  INFO 26068 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T00:55:02.871-03:00  INFO 26068 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:9768e971-52ec-4d38-aece-76f7e2fb824d user=SA
2023-01-29T00:55:02.871-03:00  INFO 26068 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T00:55:02.898-03:00  INFO 26068 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:55:02.900-03:00  WARN 26068 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:55:02.904-03:00  INFO 26068 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:55:02.967-03:00  INFO 26068 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:55:02.968-03:00  INFO 26068 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:55:02.971-03:00  INFO 26068 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:55:03.088-03:00  WARN 26068 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:55:04.870-03:00  INFO 11080 --- [main] c.e.e.s.UserServiceIntegrationTest       : Starting UserServiceIntegrationTest using Java 18.0.2.1 with PID 11080 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:55:04.870-03:00 DEBUG 11080 --- [main] c.e.e.s.UserServiceIntegrationTest       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:55:04.871-03:00  INFO 11080 --- [main] c.e.e.s.UserServiceIntegrationTest       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:55:04.894-03:00  INFO 26068 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@aa16802, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@c5ed57e, org.springframework.security.web.context.SecurityContextHolderFilter@27a18433, org.springframework.security.web.header.HeaderWriterFilter@2d05291f, org.springframework.security.web.authentication.logout.LogoutFilter@3316aded, com.example.ec.security.JwtTokenFilter@340a5c52, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@abadf5b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@ef342c2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@156542b7, org.springframework.security.web.session.SessionManagementFilter@2f9739e0, org.springframework.security.web.access.ExceptionTranslationFilter@433dd165, org.springframework.security.web.access.intercept.AuthorizationFilter@7bfb46b2]
2023-01-29T00:55:05.052-03:00  INFO 26068 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56233 (http) with context path ''
2023-01-29T00:55:05.057-03:00  INFO 26068 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 2.513 seconds (process running for 12.82)
2023-01-29T00:55:05.094-03:00  INFO 26068 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:55:05.094-03:00  INFO 26068 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:55:05.096-03:00  INFO 26068 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-01-29T00:55:05.097-03:00  INFO 26068 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:05.121-03:00  INFO 26068 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJjc3JfamFuZSIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0NTUiJ9XSwiaWF0IjoxNjc0OTY0NTA1LCJleHAiOjE2NzQ5NjUxMDV9.5SM-h-h3vSYBEosG_bjZ92_q1--ovKnVbfT4jFYooKE]
2023-01-29T00:55:05.141-03:00 ERROR 26068 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:55:05.160-03:00  INFO 26068 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:05.160-03:00  INFO 26068 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T00:55:05.165-03:00 ERROR 26068 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T00:55:05.177-03:00  INFO 26068 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:05.183-03:00  INFO 26068 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjQ1MDUsImV4cCI6MTY3NDk2NTEwNX0.SYNKL1QCJd0m98IlSWykrjH1wRPX_ZMGXlr4qVyPPSA]
2023-01-29T00:55:05.201-03:00  INFO 26068 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:55:05.206-03:00  INFO 26068 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjQ1MDUsImV4cCI6MTY3NDk2NTEwNX0.SYNKL1QCJd0m98IlSWykrjH1wRPX_ZMGXlr4qVyPPSA]
2023-01-29T00:55:05.285-03:00  INFO 26068 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:55:05.288-03:00  INFO 26068 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:55:05.395-03:00  INFO 26068 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:55:05.415-03:00  INFO 26068 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:55:05.416-03:00  INFO 26068 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T00:55:05.497-03:00  INFO 26068 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T00:55:05.509-03:00  INFO 26068 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:55:05.510-03:00  INFO 26068 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T00:55:05.571-03:00  INFO 26068 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T00:55:05.683-03:00  INFO 11080 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:55:05.745-03:00  INFO 11080 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2023-01-29T00:55:06.256-03:00  INFO 11080 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:55:06.436-03:00  INFO 11080 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:fd50a4af-558f-4ea5-a71c-096b5de42678 user=SA
2023-01-29T00:55:06.438-03:00  INFO 11080 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:55:06.612-03:00  INFO 11080 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:55:06.664-03:00  INFO 11080 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:55:06.802-03:00  WARN 11080 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:55:06.917-03:00  INFO 11080 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:55:07.620-03:00  INFO 11080 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:55:07.627-03:00  INFO 11080 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:55:07.644-03:00  INFO 11080 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:55:08.291-03:00  WARN 11080 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:55:09.183-03:00  INFO 11080 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@13f358f8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3f119b55, org.springframework.security.web.context.SecurityContextHolderFilter@76379796, org.springframework.security.web.header.HeaderWriterFilter@1235732d, org.springframework.security.web.authentication.logout.LogoutFilter@4eee730c, com.example.ec.security.JwtTokenFilter@64dcfd09, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4fbdee7a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@615bd28b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fefd4a2, org.springframework.security.web.session.SessionManagementFilter@4b89515b, org.springframework.security.web.access.ExceptionTranslationFilter@b6fea12, org.springframework.security.web.access.intercept.AuthorizationFilter@2f307fcc]
2023-01-29T00:55:09.718-03:00  INFO 11080 --- [main] c.e.e.s.UserServiceIntegrationTest       : Started UserServiceIntegrationTest in 5.028 seconds (process running for 6.116)
2023-01-29T00:55:09.883-03:00  INFO 11080 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T00:55:09.983-03:00  INFO 11080 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T00:55:11.034-03:00  INFO 11080 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:55:11.035-03:00  INFO 11080 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:55:11.037-03:00  INFO 11080 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:57:05.248-03:00  INFO 25940 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 25940 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:57:05.248-03:00 DEBUG 25940 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:57:05.249-03:00  INFO 25940 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:57:05.899-03:00  INFO 25940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:57:05.955-03:00  INFO 25940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49 ms. Found 5 JPA repository interfaces.
2023-01-29T00:57:06.961-03:00  INFO 25940 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:57:06.970-03:00  INFO 25940 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:57:06.971-03:00  INFO 25940 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:57:07.076-03:00  INFO 25940 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:57:07.076-03:00  INFO 25940 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1811 ms
2023-01-29T00:57:07.168-03:00  INFO 25940 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:57:07.334-03:00  INFO 25940 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:6fbb3381-36cd-407b-aca7-8f109796df5d user=SA
2023-01-29T00:57:07.337-03:00  INFO 25940 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:57:07.485-03:00  INFO 25940 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:57:07.531-03:00  INFO 25940 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:57:07.568-03:00  WARN 25940 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:57:07.690-03:00  INFO 25940 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:57:08.280-03:00  INFO 25940 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:57:08.288-03:00  INFO 25940 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:57:08.304-03:00  INFO 25940 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:57:08.899-03:00  WARN 25940 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:57:09.812-03:00  INFO 25940 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@283645fa, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70a81b4e, org.springframework.security.web.context.SecurityContextHolderFilter@79864d6, org.springframework.security.web.header.HeaderWriterFilter@78ae34f7, org.springframework.security.web.authentication.logout.LogoutFilter@4ca6f587, com.example.ec.security.JwtTokenFilter@48c56b42, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2da7ef3e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@67cc5a38, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5c6fae3c, org.springframework.security.web.session.SessionManagementFilter@504216ff, org.springframework.security.web.access.ExceptionTranslationFilter@76fa3dd8, org.springframework.security.web.access.intercept.AuthorizationFilter@7ebf5bf]
2023-01-29T00:57:10.312-03:00  INFO 25940 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56301 (http) with context path ''
2023-01-29T00:57:10.322-03:00  INFO 25940 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.261 seconds (process running for 6.282)
2023-01-29T00:57:10.503-03:00  INFO 25940 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:57:10.504-03:00  INFO 25940 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:57:10.505-03:00  INFO 25940 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:57:10.515-03:00  INFO 25940 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:57:10.538-03:00  INFO 25940 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjQ2MzAsImV4cCI6MTY3NDk2NTIzMH0.R4sW-GjFf9_OeNks8N8q3X15DfXUKgmF_o7biXV0fJU]
2023-01-29T00:57:10.661-03:00  INFO 25940 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:57:10.663-03:00  INFO 25940 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:57:10.665-03:00  INFO 25940 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:58:55.173-03:00  INFO 29544 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 29544 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:58:55.173-03:00 DEBUG 29544 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:58:55.174-03:00  INFO 29544 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:58:55.840-03:00  INFO 29544 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:58:55.895-03:00  INFO 29544 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 48 ms. Found 5 JPA repository interfaces.
2023-01-29T00:58:57.020-03:00  INFO 29544 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:58:57.033-03:00  INFO 29544 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:58:57.033-03:00  INFO 29544 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:58:57.124-03:00  INFO 29544 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:58:57.125-03:00  INFO 29544 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1933 ms
2023-01-29T00:58:57.211-03:00  INFO 29544 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:58:57.356-03:00  INFO 29544 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:cec3d49d-a49d-4789-8f6c-d522aa1d1a05 user=SA
2023-01-29T00:58:57.360-03:00  INFO 29544 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:58:57.494-03:00  INFO 29544 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:58:57.540-03:00  INFO 29544 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:58:57.576-03:00  WARN 29544 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:58:57.692-03:00  INFO 29544 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:58:58.256-03:00  INFO 29544 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:58:58.263-03:00  INFO 29544 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:58:58.279-03:00  INFO 29544 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:58:58.871-03:00  WARN 29544 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:58:59.748-03:00  INFO 29544 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3647b274, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2a10a99b, org.springframework.security.web.context.SecurityContextHolderFilter@4f6f7a86, org.springframework.security.web.header.HeaderWriterFilter@46a5aff, org.springframework.security.web.authentication.logout.LogoutFilter@ae4a043, com.example.ec.security.JwtTokenFilter@51617b93, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4e0a5606, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@361a1e86, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@23471f48, org.springframework.security.web.session.SessionManagementFilter@5b5f48d5, org.springframework.security.web.access.ExceptionTranslationFilter@7a174e4b, org.springframework.security.web.access.intercept.AuthorizationFilter@7e3c5ef1]
2023-01-29T00:59:00.249-03:00  INFO 29544 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56352 (http) with context path ''
2023-01-29T00:59:00.256-03:00  INFO 29544 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.274 seconds (process running for 6.248)
2023-01-29T00:59:00.444-03:00  INFO 29544 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:59:00.444-03:00  INFO 29544 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:59:00.445-03:00  INFO 29544 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:59:00.455-03:00  INFO 29544 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:59:00.479-03:00  INFO 29544 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjQ3NDAsImV4cCI6MTY3NDk2NTM0MH0.QNsNSCRdXxx5eoCYGM0SIwich8dP3aTKFOJuyAZD62g]
2023-01-29T00:59:00.596-03:00  INFO 29544 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:59:00.598-03:00  INFO 29544 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:59:00.600-03:00  INFO 29544 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T00:59:19.141-03:00  INFO 24240 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 24240 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T00:59:19.142-03:00 DEBUG 24240 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T00:59:19.142-03:00  INFO 24240 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T00:59:19.926-03:00  INFO 24240 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T00:59:19.984-03:00  INFO 24240 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2023-01-29T00:59:21.039-03:00  INFO 24240 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T00:59:21.049-03:00  INFO 24240 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T00:59:21.050-03:00  INFO 24240 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T00:59:21.174-03:00  INFO 24240 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T00:59:21.175-03:00  INFO 24240 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2002 ms
2023-01-29T00:59:21.262-03:00  INFO 24240 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T00:59:21.413-03:00  INFO 24240 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:8f6bd420-2666-4061-8dcc-cb9b69bbee25 user=SA
2023-01-29T00:59:21.415-03:00  INFO 24240 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T00:59:21.551-03:00  INFO 24240 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T00:59:21.596-03:00  INFO 24240 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T00:59:21.632-03:00  WARN 24240 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T00:59:21.754-03:00  INFO 24240 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T00:59:22.332-03:00  INFO 24240 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T00:59:22.339-03:00  INFO 24240 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:59:22.354-03:00  INFO 24240 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T00:59:22.967-03:00  WARN 24240 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T00:59:23.860-03:00  INFO 24240 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@405d123c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@298f7b0a, org.springframework.security.web.context.SecurityContextHolderFilter@19070326, org.springframework.security.web.header.HeaderWriterFilter@4e09c3b0, org.springframework.security.web.authentication.logout.LogoutFilter@4fb1bffd, com.example.ec.security.JwtTokenFilter@7e3c5ef1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5b5f48d5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@421c4c3e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4ca6f587, org.springframework.security.web.session.SessionManagementFilter@58f27c37, org.springframework.security.web.access.ExceptionTranslationFilter@70b037ac, org.springframework.security.web.access.intercept.AuthorizationFilter@2ea8f277]
2023-01-29T00:59:24.363-03:00  INFO 24240 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56372 (http) with context path ''
2023-01-29T00:59:24.371-03:00  INFO 24240 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.419 seconds (process running for 6.377)
2023-01-29T00:59:24.568-03:00  INFO 24240 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T00:59:24.569-03:00  INFO 24240 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T00:59:24.570-03:00  INFO 24240 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T00:59:24.578-03:00  INFO 24240 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T00:59:24.602-03:00  INFO 24240 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInJvbGVzIjpbeyJhdXRob3JpdHkiOiJST0xFX0FETUlOIn1dLCJpYXQiOjE2NzQ5NjQ3NjQsImV4cCI6MTY3NDk2NTM2NH0.Lv-wwZQo1s8M8Xfn6ICyjyZU6E8fCAudzwwKmgXHdQ0]
2023-01-29T00:59:24.728-03:00  INFO 24240 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T00:59:24.730-03:00  INFO 24240 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T00:59:24.733-03:00  INFO 24240 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T01:06:03.880-03:00  INFO 6512 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 6512 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:06:03.881-03:00 DEBUG 6512 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:06:03.882-03:00  INFO 6512 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:06:04.564-03:00  INFO 6512 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:06:04.631-03:00  INFO 6512 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 60 ms. Found 5 JPA repository interfaces.
2023-01-29T01:06:05.103-03:00  INFO 6512 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T01:06:05.250-03:00  INFO 6512 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:7d0cc130-c702-46f1-8b16-d3bdd5852ac2 user=SA
2023-01-29T01:06:05.251-03:00  INFO 6512 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T01:06:05.397-03:00  INFO 6512 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:06:05.457-03:00  INFO 6512 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T01:06:05.496-03:00  WARN 6512 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:06:05.609-03:00  INFO 6512 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:06:06.201-03:00  INFO 6512 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:06:06.209-03:00  INFO 6512 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:06:06.225-03:00  INFO 6512 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:06:06.837-03:00  WARN 6512 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:06:07.757-03:00  INFO 6512 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@509e4d53, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6f915016, org.springframework.security.web.context.SecurityContextHolderFilter@9203db8, org.springframework.security.web.header.HeaderWriterFilter@2d2710a8, org.springframework.security.web.authentication.logout.LogoutFilter@505bc480, com.example.ec.security.JwtTokenFilter@533165e7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@65d3a83, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7be9582e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@324e62e2, org.springframework.security.web.session.SessionManagementFilter@7cd239f6, org.springframework.security.web.access.ExceptionTranslationFilter@755057c7, org.springframework.security.web.access.intercept.AuthorizationFilter@624baf71]
2023-01-29T01:06:08.200-03:00  INFO 6512 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.511 seconds (process running for 5.817)
2023-01-29T01:06:08.227-03:00  INFO 6512 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:06:08.236-03:00  INFO 6512 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T01:06:08.373-03:00  INFO 6512 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:06:08.380-03:00  INFO 6512 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T01:06:08.390-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T01:06:08.423-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:06:08.429-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T01:06:08.440-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:06:08.457-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T01:06:08.468-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T01:06:08.475-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T01:06:08.479-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T01:06:08.485-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:06:08.488-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T01:06:08.489-03:00 DEBUG 6512 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T01:06:08.490-03:00 DEBUG 6512 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T01:06:08.490-03:00 DEBUG 6512 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T01:06:08.491-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:06:08.499-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T01:06:08.670-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T01:06:08.675-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T01:06:08.684-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T01:06:08.687-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T01:06:08.689-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T01:06:08.689-03:00 DEBUG 6512 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T01:06:08.689-03:00 DEBUG 6512 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T01:06:08.692-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T01:06:08.695-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:06:08.744-03:00  INFO 6512 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T01:06:08.747-03:00  INFO 6512 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:06:08.748-03:00  INFO 6512 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T01:06:08.753-03:00  INFO 6512 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T01:06:08.756-03:00  INFO 6512 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T01:06:09.888-03:00  INFO 6512 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:06:09.897-03:00  INFO 6512 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T01:06:09.921-03:00  INFO 6512 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 6512 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:06:09.921-03:00 DEBUG 6512 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:06:09.921-03:00  INFO 6512 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:06:10.085-03:00  INFO 6512 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:06:10.096-03:00  INFO 6512 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T01:06:10.272-03:00  INFO 6512 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T01:06:10.294-03:00  INFO 6512 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T01:06:10.294-03:00  INFO 6512 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T01:06:10.397-03:00  INFO 6512 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T01:06:10.398-03:00  INFO 6512 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 476 ms
2023-01-29T01:06:10.481-03:00  INFO 6512 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T01:06:10.486-03:00  INFO 6512 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:52bdc2db-f6ab-40ab-8df4-a406c20e86d1 user=SA
2023-01-29T01:06:10.486-03:00  INFO 6512 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T01:06:10.530-03:00  INFO 6512 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:06:10.532-03:00  WARN 6512 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:06:10.535-03:00  INFO 6512 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:06:10.584-03:00  INFO 6512 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:06:10.585-03:00  INFO 6512 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:06:10.589-03:00  INFO 6512 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:06:10.701-03:00  WARN 6512 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:06:11.467-03:00  INFO 6512 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7f85482c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@56e0e953, org.springframework.security.web.context.SecurityContextHolderFilter@3b89bf47, org.springframework.security.web.header.HeaderWriterFilter@798e73de, org.springframework.security.web.authentication.logout.LogoutFilter@519f1a7d, com.example.ec.security.JwtTokenFilter@5ace2ce3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7c8ec235, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@76145ef9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@39c821c6, org.springframework.security.web.session.SessionManagementFilter@6ef7e510, org.springframework.security.web.access.ExceptionTranslationFilter@48d1f239, org.springframework.security.web.access.intercept.AuthorizationFilter@fbd9b1f]
2023-01-29T01:06:11.837-03:00  INFO 6512 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56592 (http) with context path ''
2023-01-29T01:06:11.841-03:00  INFO 6512 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.94 seconds (process running for 9.459)
2023-01-29T01:06:11.978-03:00  INFO 6512 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T01:06:11.978-03:00  INFO 6512 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T01:06:11.979-03:00  INFO 6512 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T01:06:11.986-03:00  INFO 6512 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:11.987-03:00  INFO 6512 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:06:12.009-03:00  INFO 6512 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T01:06:12.077-03:00  INFO 6512 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:12.077-03:00  INFO 6512 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:06:12.078-03:00  INFO 6512 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T01:06:12.087-03:00  INFO 6512 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:06:12.088-03:00  INFO 6512 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T01:06:12.094-03:00  INFO 6512 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:12.095-03:00  INFO 6512 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:06:12.098-03:00  INFO 6512 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T01:06:12.108-03:00  INFO 6512 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:12.108-03:00  INFO 6512 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:06:12.114-03:00  INFO 6512 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T01:06:12.142-03:00  INFO 6512 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:12.142-03:00  INFO 6512 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:06:12.177-03:00  INFO 6512 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T01:06:12.187-03:00  INFO 6512 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:12.188-03:00  INFO 6512 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:06:12.190-03:00  INFO 6512 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T01:06:12.198-03:00  INFO 6512 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:12.198-03:00  INFO 6512 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:06:12.199-03:00  INFO 6512 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T01:06:12.208-03:00  INFO 6512 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:12.208-03:00  INFO 6512 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:06:12.211-03:00  INFO 6512 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T01:06:12.224-03:00  INFO 6512 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:12.225-03:00  INFO 6512 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:06:12.226-03:00  INFO 6512 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T01:06:12.235-03:00  INFO 6512 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:06:12.236-03:00  INFO 6512 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T01:06:12.251-03:00  INFO 6512 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 6512 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:06:12.251-03:00 DEBUG 6512 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:06:12.251-03:00  INFO 6512 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:06:12.412-03:00  INFO 6512 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:06:12.423-03:00  INFO 6512 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T01:06:12.491-03:00  INFO 6512 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T01:06:12.492-03:00  INFO 6512 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T01:06:12.492-03:00  INFO 6512 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T01:06:12.516-03:00  INFO 6512 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T01:06:12.516-03:00  INFO 6512 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 263 ms
2023-01-29T01:06:12.578-03:00  INFO 6512 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T01:06:12.596-03:00  INFO 6512 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:fde35d3a-b7fe-45c3-93c2-1177800c4336 user=SA
2023-01-29T01:06:12.596-03:00  INFO 6512 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T01:06:12.620-03:00  INFO 6512 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:06:12.622-03:00  WARN 6512 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:06:12.625-03:00  INFO 6512 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:06:12.679-03:00  INFO 6512 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:06:12.679-03:00  INFO 6512 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:06:12.683-03:00  INFO 6512 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:06:12.788-03:00  WARN 6512 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:06:13.930-03:00  INFO 6512 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@88432f5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@374ba9a8, org.springframework.security.web.context.SecurityContextHolderFilter@7bfb46b2, org.springframework.security.web.header.HeaderWriterFilter@3316aded, org.springframework.security.web.authentication.logout.LogoutFilter@156542b7, com.example.ec.security.JwtTokenFilter@d3fa0e1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@aa16802, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c5ed57e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@33d6bdb7, org.springframework.security.web.session.SessionManagementFilter@6f8aecd3, org.springframework.security.web.access.ExceptionTranslationFilter@183d22c5, org.springframework.security.web.access.intercept.AuthorizationFilter@6e0a0baa]
2023-01-29T01:06:14.029-03:00  INFO 6512 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56597 (http) with context path ''
2023-01-29T01:06:14.033-03:00  INFO 6512 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.795 seconds (process running for 11.651)
2023-01-29T01:06:14.057-03:00  INFO 6512 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T01:06:14.057-03:00  INFO 6512 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T01:06:14.058-03:00  INFO 6512 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T01:06:14.058-03:00  INFO 6512 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:14.073-03:00  INFO 6512 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTE3NCwiZXhwIjoxNjc0OTY1Nzc0fQ.H4IaadtNdOyhqIBA3cpaGwuWMweyF-mxQAyS2UyLds4]
2023-01-29T01:06:14.085-03:00 ERROR 6512 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T01:06:14.100-03:00  INFO 6512 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:14.100-03:00  INFO 6512 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:06:14.104-03:00 ERROR 6512 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T01:06:14.111-03:00  INFO 6512 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:14.114-03:00  INFO 6512 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY1MTc0LCJleHAiOjE2NzQ5NjU3NzR9.3YTaRuHrT4QgDElH9VYtKRGReItAzDDaqCoViZi4Mq0]
2023-01-29T01:06:14.127-03:00  INFO 6512 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:06:14.130-03:00  INFO 6512 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY1MTc0LCJleHAiOjE2NzQ5NjU3NzR9.3YTaRuHrT4QgDElH9VYtKRGReItAzDDaqCoViZi4Mq0]
2023-01-29T01:06:14.171-03:00  INFO 6512 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:06:14.172-03:00  INFO 6512 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T01:06:14.213-03:00  INFO 6512 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T01:06:14.227-03:00  INFO 6512 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:06:14.227-03:00  INFO 6512 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T01:06:14.260-03:00  INFO 6512 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T01:06:14.291-03:00  INFO 6512 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:06:14.291-03:00  INFO 6512 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T01:06:14.331-03:00  INFO 6512 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T01:13:35.473-03:00  INFO 23904 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 23904 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:13:35.474-03:00 DEBUG 23904 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:13:35.474-03:00  INFO 23904 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:13:36.131-03:00  INFO 23904 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:13:36.200-03:00  INFO 23904 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 61 ms. Found 5 JPA repository interfaces.
2023-01-29T01:13:36.703-03:00  INFO 23904 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T01:13:36.875-03:00  INFO 23904 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:18e08c2f-6778-4dfc-bec8-e18a7ce7126c user=SA
2023-01-29T01:13:36.877-03:00  INFO 23904 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T01:13:37.037-03:00  INFO 23904 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:13:37.091-03:00  INFO 23904 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T01:13:37.135-03:00  WARN 23904 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:13:37.280-03:00  INFO 23904 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:13:37.948-03:00  INFO 23904 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:13:37.956-03:00  INFO 23904 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:13:37.971-03:00  INFO 23904 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:13:38.650-03:00  WARN 23904 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:13:39.700-03:00  INFO 23904 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5c21b22e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@184e5c44, org.springframework.security.web.context.SecurityContextHolderFilter@4624e3d1, org.springframework.security.web.header.HeaderWriterFilter@542759f, org.springframework.security.web.authentication.logout.LogoutFilter@5ba7391b, com.example.ec.security.JwtTokenFilter@6527aa0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3181fbe7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c8e99, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6153aca1, org.springframework.security.web.session.SessionManagementFilter@704ca8a8, org.springframework.security.web.access.ExceptionTranslationFilter@5eaa6f76, org.springframework.security.web.access.intercept.AuthorizationFilter@125ace20]
2023-01-29T01:13:40.309-03:00  INFO 23904 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 5.035 seconds (process running for 6.303)
2023-01-29T01:13:40.340-03:00  INFO 23904 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:13:40.348-03:00  INFO 23904 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T01:13:40.492-03:00  INFO 23904 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:13:40.501-03:00  INFO 23904 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T01:13:40.517-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T01:13:40.560-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:13:40.566-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T01:13:40.576-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:13:40.594-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T01:13:40.607-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T01:13:40.617-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T01:13:40.621-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T01:13:40.628-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:13:40.631-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T01:13:40.632-03:00 DEBUG 23904 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T01:13:40.633-03:00 DEBUG 23904 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T01:13:40.634-03:00 DEBUG 23904 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T01:13:40.634-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:13:40.640-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T01:13:40.797-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T01:13:40.802-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T01:13:40.810-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T01:13:40.813-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T01:13:40.815-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T01:13:40.815-03:00 DEBUG 23904 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T01:13:40.815-03:00 DEBUG 23904 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T01:13:40.818-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T01:13:40.821-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:13:40.867-03:00  INFO 23904 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T01:13:40.869-03:00  INFO 23904 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:13:40.870-03:00  INFO 23904 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T01:13:40.875-03:00  INFO 23904 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T01:13:40.878-03:00  INFO 23904 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T01:13:42.008-03:00  INFO 23904 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:13:42.017-03:00  INFO 23904 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T01:13:42.037-03:00  INFO 23904 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 23904 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:13:42.038-03:00 DEBUG 23904 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:13:42.038-03:00  INFO 23904 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:13:42.181-03:00  INFO 23904 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:13:42.192-03:00  INFO 23904 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T01:13:42.374-03:00  INFO 23904 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T01:13:42.382-03:00  INFO 23904 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T01:13:42.383-03:00  INFO 23904 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T01:13:42.453-03:00  INFO 23904 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T01:13:42.453-03:00  INFO 23904 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 414 ms
2023-01-29T01:13:42.535-03:00  INFO 23904 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T01:13:42.538-03:00  INFO 23904 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:da46a855-694a-45e5-a8f8-85e8307286e9 user=SA
2023-01-29T01:13:42.538-03:00  INFO 23904 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T01:13:42.574-03:00  INFO 23904 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:13:42.576-03:00  WARN 23904 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:13:42.579-03:00  INFO 23904 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:13:42.630-03:00  INFO 23904 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:13:42.631-03:00  INFO 23904 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:13:42.635-03:00  INFO 23904 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:13:42.764-03:00  WARN 23904 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:13:43.455-03:00  INFO 23904 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@26562718, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1388c465, org.springframework.security.web.context.SecurityContextHolderFilter@73f937d9, org.springframework.security.web.header.HeaderWriterFilter@71da8575, org.springframework.security.web.authentication.logout.LogoutFilter@47ce44ab, com.example.ec.security.JwtTokenFilter@48d1f239, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@65bd41d8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@40699137, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@798e73de, org.springframework.security.web.session.SessionManagementFilter@620bfd8c, org.springframework.security.web.access.ExceptionTranslationFilter@12008a54, org.springframework.security.web.access.intercept.AuthorizationFilter@441eae0b]
2023-01-29T01:13:43.696-03:00  INFO 23904 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56795 (http) with context path ''
2023-01-29T01:13:43.700-03:00  INFO 23904 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.68 seconds (process running for 9.694)
2023-01-29T01:13:43.833-03:00  INFO 23904 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T01:13:43.833-03:00  INFO 23904 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T01:13:43.834-03:00  INFO 23904 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T01:13:43.840-03:00  INFO 23904 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:43.841-03:00  INFO 23904 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:13:43.863-03:00  INFO 23904 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T01:13:43.922-03:00  INFO 23904 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:43.922-03:00  INFO 23904 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:13:43.923-03:00  INFO 23904 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T01:13:43.932-03:00  INFO 23904 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:13:43.933-03:00  INFO 23904 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T01:13:43.959-03:00  INFO 23904 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:43.975-03:00  INFO 23904 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTYyMywiZXhwIjoxNjc0OTY2MjIzfQ.k5Zo1XcI7OBDbfopPX2pBLMC3Lc_PWJup6GKnNYrz3g]
2023-01-29T01:13:43.978-03:00  INFO 23904 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T01:13:43.990-03:00  INFO 23904 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:43.990-03:00  INFO 23904 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:13:43.997-03:00  INFO 23904 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T01:13:44.030-03:00  INFO 23904 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:44.033-03:00  INFO 23904 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTYyNCwiZXhwIjoxNjc0OTY2MjI0fQ.sjJ8U42Z1CwOJudOBQd0l-vUB9ABRICTk8VDk538YYo]
2023-01-29T01:13:44.065-03:00  INFO 23904 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T01:13:44.074-03:00  INFO 23904 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:44.077-03:00  INFO 23904 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTYyNCwiZXhwIjoxNjc0OTY2MjI0fQ.sjJ8U42Z1CwOJudOBQd0l-vUB9ABRICTk8VDk538YYo]
2023-01-29T01:13:44.080-03:00  INFO 23904 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T01:13:44.087-03:00  INFO 23904 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:44.087-03:00  INFO 23904 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:13:44.088-03:00  INFO 23904 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T01:13:44.098-03:00  INFO 23904 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:44.102-03:00  INFO 23904 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTYyNCwiZXhwIjoxNjc0OTY2MjI0fQ.sjJ8U42Z1CwOJudOBQd0l-vUB9ABRICTk8VDk538YYo]
2023-01-29T01:13:44.105-03:00  INFO 23904 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T01:13:44.113-03:00  INFO 23904 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:44.116-03:00  INFO 23904 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTYyNCwiZXhwIjoxNjc0OTY2MjI0fQ.sjJ8U42Z1CwOJudOBQd0l-vUB9ABRICTk8VDk538YYo]
2023-01-29T01:13:44.118-03:00  INFO 23904 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T01:13:44.123-03:00  INFO 23904 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:13:44.124-03:00  INFO 23904 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T01:13:44.138-03:00  INFO 23904 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 23904 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:13:44.138-03:00 DEBUG 23904 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:13:44.138-03:00  INFO 23904 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:13:44.271-03:00  INFO 23904 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:13:44.281-03:00  INFO 23904 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T01:13:44.352-03:00  INFO 23904 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T01:13:44.353-03:00  INFO 23904 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T01:13:44.353-03:00  INFO 23904 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T01:13:44.377-03:00  INFO 23904 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T01:13:44.377-03:00  INFO 23904 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 238 ms
2023-01-29T01:13:44.445-03:00  INFO 23904 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T01:13:44.489-03:00  INFO 23904 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:f30a7517-3966-41c1-86d1-158a7910217b user=SA
2023-01-29T01:13:44.489-03:00  INFO 23904 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T01:13:44.520-03:00  INFO 23904 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:13:44.522-03:00  WARN 23904 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:13:44.525-03:00  INFO 23904 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:13:44.579-03:00  INFO 23904 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:13:44.580-03:00  INFO 23904 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:13:44.584-03:00  INFO 23904 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:13:44.694-03:00  WARN 23904 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:13:46.021-03:00  INFO 23904 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@591e1df7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@697b105e, org.springframework.security.web.context.SecurityContextHolderFilter@50ee7857, org.springframework.security.web.header.HeaderWriterFilter@41f17bb7, org.springframework.security.web.authentication.logout.LogoutFilter@480f1b59, com.example.ec.security.JwtTokenFilter@6c54bc3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@48455005, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@223a679, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@dcaa310, org.springframework.security.web.session.SessionManagementFilter@18be3e85, org.springframework.security.web.access.ExceptionTranslationFilter@5739e15e, org.springframework.security.web.access.intercept.AuthorizationFilter@35a7c477]
2023-01-29T01:13:46.143-03:00  INFO 23904 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56800 (http) with context path ''
2023-01-29T01:13:46.146-03:00  INFO 23904 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 2.02 seconds (process running for 12.14)
2023-01-29T01:13:46.156-03:00  INFO 23904 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T01:13:46.156-03:00  INFO 23904 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T01:13:46.157-03:00  INFO 23904 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T01:13:46.157-03:00  INFO 23904 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:46.160-03:00  INFO 23904 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTYyNiwiZXhwIjoxNjc0OTY2MjI2fQ.CxOMjry53PVKIOT79Ds2Xd5Ha_TZ_PyVBUJo8ENG1uE]
2023-01-29T01:13:46.175-03:00 ERROR 23904 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T01:13:46.190-03:00  INFO 23904 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:46.191-03:00  INFO 23904 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:13:46.194-03:00 ERROR 23904 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T01:13:46.203-03:00  INFO 23904 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:46.206-03:00  INFO 23904 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY1NjI2LCJleHAiOjE2NzQ5NjYyMjZ9.WoYwJXGlH_viarzoX0hnF54o1HCKkydajRe0bY9HscY]
2023-01-29T01:13:46.217-03:00  INFO 23904 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:13:46.220-03:00  INFO 23904 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY1NjI2LCJleHAiOjE2NzQ5NjYyMjZ9.WoYwJXGlH_viarzoX0hnF54o1HCKkydajRe0bY9HscY]
2023-01-29T01:13:46.262-03:00  INFO 23904 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:13:46.263-03:00  INFO 23904 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T01:13:46.303-03:00  INFO 23904 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T01:13:46.344-03:00  INFO 23904 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:13:46.344-03:00  INFO 23904 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T01:13:46.372-03:00  INFO 23904 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T01:13:46.404-03:00  INFO 23904 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:13:46.405-03:00  INFO 23904 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T01:13:46.438-03:00  INFO 23904 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T01:16:05.347-03:00  INFO 16700 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 16700 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:16:05.348-03:00 DEBUG 16700 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:16:05.349-03:00  INFO 16700 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:16:06.016-03:00  INFO 16700 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:16:06.081-03:00  INFO 16700 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 57 ms. Found 5 JPA repository interfaces.
2023-01-29T01:16:06.583-03:00  INFO 16700 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T01:16:06.723-03:00  INFO 16700 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:050466ab-e3d3-49c8-86a6-1a09ff3c4139 user=SA
2023-01-29T01:16:06.725-03:00  INFO 16700 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T01:16:06.879-03:00  INFO 16700 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:16:06.948-03:00  INFO 16700 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T01:16:06.983-03:00  WARN 16700 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:16:07.094-03:00  INFO 16700 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:16:07.662-03:00  INFO 16700 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:16:07.669-03:00  INFO 16700 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:16:07.685-03:00  INFO 16700 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:16:08.308-03:00  WARN 16700 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:16:09.131-03:00  INFO 16700 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@184e5c44, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6527aa0, org.springframework.security.web.context.SecurityContextHolderFilter@53b81a55, org.springframework.security.web.header.HeaderWriterFilter@68ac6e6e, org.springframework.security.web.authentication.logout.LogoutFilter@475753dd, com.example.ec.security.JwtTokenFilter@6153aca1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@c8e99, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@61d7df22, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@30b2d267, org.springframework.security.web.session.SessionManagementFilter@61c98f5, org.springframework.security.web.access.ExceptionTranslationFilter@3fc105dd, org.springframework.security.web.access.intercept.AuthorizationFilter@7dbc77ca]
2023-01-29T01:16:09.576-03:00  INFO 16700 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.427 seconds (process running for 5.752)
2023-01-29T01:16:09.599-03:00  INFO 16700 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:16:09.605-03:00  INFO 16700 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T01:16:09.734-03:00  INFO 16700 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:16:09.739-03:00  INFO 16700 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T01:16:09.750-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T01:16:09.779-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:16:09.783-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T01:16:09.791-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:16:09.804-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T01:16:09.813-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T01:16:09.820-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T01:16:09.823-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T01:16:09.828-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:16:09.831-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T01:16:09.832-03:00 DEBUG 16700 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T01:16:09.832-03:00 DEBUG 16700 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T01:16:09.833-03:00 DEBUG 16700 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T01:16:09.833-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:16:09.839-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T01:16:09.986-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T01:16:09.990-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T01:16:09.996-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T01:16:09.999-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T01:16:10.002-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T01:16:10.002-03:00 DEBUG 16700 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T01:16:10.002-03:00 DEBUG 16700 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T01:16:10.005-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T01:16:10.007-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:16:10.058-03:00  INFO 16700 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T01:16:10.060-03:00  INFO 16700 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:16:10.062-03:00  INFO 16700 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T01:16:10.066-03:00  INFO 16700 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T01:16:10.069-03:00  INFO 16700 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T01:16:11.203-03:00  INFO 16700 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:16:11.213-03:00  INFO 16700 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T01:16:11.242-03:00  INFO 16700 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 16700 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:16:11.242-03:00 DEBUG 16700 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:16:11.243-03:00  INFO 16700 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:16:11.434-03:00  INFO 16700 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:16:11.446-03:00  INFO 16700 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T01:16:11.614-03:00  INFO 16700 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T01:16:11.622-03:00  INFO 16700 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T01:16:11.622-03:00  INFO 16700 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T01:16:11.695-03:00  INFO 16700 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T01:16:11.696-03:00  INFO 16700 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 450 ms
2023-01-29T01:16:11.763-03:00  INFO 16700 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T01:16:11.767-03:00  INFO 16700 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:3ef500e2-0685-48c2-b4ca-106f54588766 user=SA
2023-01-29T01:16:11.767-03:00  INFO 16700 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T01:16:11.801-03:00  INFO 16700 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:16:11.803-03:00  WARN 16700 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:16:11.806-03:00  INFO 16700 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:16:11.855-03:00  INFO 16700 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:16:11.855-03:00  INFO 16700 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:16:11.859-03:00  INFO 16700 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:16:11.978-03:00  WARN 16700 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:16:12.580-03:00  INFO 16700 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@16209621, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6e9e4332, org.springframework.security.web.context.SecurityContextHolderFilter@fbd9b1f, org.springframework.security.web.header.HeaderWriterFilter@519f1a7d, org.springframework.security.web.authentication.logout.LogoutFilter@39c821c6, com.example.ec.security.JwtTokenFilter@4c32d208, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7f85482c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@56e0e953, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@61df07d0, org.springframework.security.web.session.SessionManagementFilter@5b0af511, org.springframework.security.web.access.ExceptionTranslationFilter@279afa4e, org.springframework.security.web.access.intercept.AuthorizationFilter@3da20c42]
2023-01-29T01:16:12.873-03:00  INFO 16700 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56867 (http) with context path ''
2023-01-29T01:16:12.877-03:00  INFO 16700 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.659 seconds (process running for 9.053)
2023-01-29T01:16:13.002-03:00  INFO 16700 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T01:16:13.002-03:00  INFO 16700 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T01:16:13.003-03:00  INFO 16700 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T01:16:13.010-03:00  INFO 16700 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:13.011-03:00  INFO 16700 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:16:13.033-03:00  INFO 16700 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T01:16:13.096-03:00  INFO 16700 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:13.096-03:00  INFO 16700 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:16:13.097-03:00  INFO 16700 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T01:16:13.105-03:00  INFO 16700 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:16:13.106-03:00  INFO 16700 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T01:16:13.132-03:00  INFO 16700 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:13.147-03:00  INFO 16700 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTc3MywiZXhwIjoxNjc0OTY2MzczfQ.B82AVHoGpCm5lRxtaSPfCdmhoDMmpUusmabdV2CIiZQ]
2023-01-29T01:16:13.155-03:00  INFO 16700 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T01:16:13.166-03:00  INFO 16700 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:13.166-03:00  INFO 16700 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:16:13.172-03:00  INFO 16700 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T01:16:13.199-03:00  INFO 16700 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:13.202-03:00  INFO 16700 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTc3MywiZXhwIjoxNjc0OTY2MzczfQ.B82AVHoGpCm5lRxtaSPfCdmhoDMmpUusmabdV2CIiZQ]
2023-01-29T01:16:13.235-03:00  INFO 16700 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T01:16:13.244-03:00  INFO 16700 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:13.247-03:00  INFO 16700 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTc3MywiZXhwIjoxNjc0OTY2MzczfQ.B82AVHoGpCm5lRxtaSPfCdmhoDMmpUusmabdV2CIiZQ]
2023-01-29T01:16:13.250-03:00  INFO 16700 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T01:16:13.256-03:00  INFO 16700 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:13.257-03:00  INFO 16700 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:16:13.258-03:00  INFO 16700 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T01:16:13.267-03:00  INFO 16700 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:13.271-03:00  INFO 16700 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTc3MywiZXhwIjoxNjc0OTY2MzczfQ.B82AVHoGpCm5lRxtaSPfCdmhoDMmpUusmabdV2CIiZQ]
2023-01-29T01:16:13.277-03:00  INFO 16700 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T01:16:13.285-03:00  INFO 16700 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:13.288-03:00  INFO 16700 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTc3MywiZXhwIjoxNjc0OTY2MzczfQ.B82AVHoGpCm5lRxtaSPfCdmhoDMmpUusmabdV2CIiZQ]
2023-01-29T01:16:13.290-03:00  INFO 16700 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T01:16:13.296-03:00  INFO 16700 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:16:13.297-03:00  INFO 16700 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T01:16:13.311-03:00  INFO 16700 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 16700 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:16:13.311-03:00 DEBUG 16700 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:16:13.311-03:00  INFO 16700 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:16:13.457-03:00  INFO 16700 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:16:13.467-03:00  INFO 16700 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T01:16:13.543-03:00  INFO 16700 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T01:16:13.544-03:00  INFO 16700 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T01:16:13.545-03:00  INFO 16700 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T01:16:13.567-03:00  INFO 16700 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T01:16:13.567-03:00  INFO 16700 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 255 ms
2023-01-29T01:16:13.609-03:00  INFO 16700 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T01:16:13.622-03:00  INFO 16700 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:65c86bac-ae71-4dec-92f1-465be774bbd7 user=SA
2023-01-29T01:16:13.622-03:00  INFO 16700 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T01:16:13.652-03:00  INFO 16700 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:16:13.654-03:00  WARN 16700 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:16:13.657-03:00  INFO 16700 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:16:13.716-03:00  INFO 16700 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:16:13.716-03:00  INFO 16700 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:16:13.721-03:00  INFO 16700 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:16:13.839-03:00  WARN 16700 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:16:14.624-03:00  INFO 16700 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b00eaae, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@480f1b59, org.springframework.security.web.context.SecurityContextHolderFilter@4cf08d08, org.springframework.security.web.header.HeaderWriterFilter@5028cec0, org.springframework.security.web.authentication.logout.LogoutFilter@50ee7857, com.example.ec.security.JwtTokenFilter@2a28bf25, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5739e15e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@41f17bb7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@35a7c477, org.springframework.security.web.session.SessionManagementFilter@3a8c7347, org.springframework.security.web.access.ExceptionTranslationFilter@51a94f7f, org.springframework.security.web.access.intercept.AuthorizationFilter@223a679]
2023-01-29T01:16:14.718-03:00  INFO 16700 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 56872 (http) with context path ''
2023-01-29T01:16:14.722-03:00  INFO 16700 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.423 seconds (process running for 10.898)
2023-01-29T01:16:14.730-03:00  INFO 16700 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T01:16:14.730-03:00  INFO 16700 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T01:16:14.731-03:00  INFO 16700 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T01:16:14.731-03:00  INFO 16700 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:14.734-03:00  INFO 16700 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2NTc3NCwiZXhwIjoxNjc0OTY2Mzc0fQ.2XXDiZmKd2N24h7yBnXaXy8jKbJ1SqrT7AZPWQwVbpk]
2023-01-29T01:16:14.743-03:00 ERROR 16700 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T01:16:14.758-03:00  INFO 16700 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:14.759-03:00  INFO 16700 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:16:14.762-03:00 ERROR 16700 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T01:16:14.770-03:00  INFO 16700 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:14.772-03:00  INFO 16700 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY1Nzc0LCJleHAiOjE2NzQ5NjYzNzR9.HZhBjvPyz20vhV6Wot47yjh9EwIQXjuhc3yK0rfRAKw]
2023-01-29T01:16:14.783-03:00  INFO 16700 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:16:14.786-03:00  INFO 16700 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY1Nzc0LCJleHAiOjE2NzQ5NjYzNzR9.HZhBjvPyz20vhV6Wot47yjh9EwIQXjuhc3yK0rfRAKw]
2023-01-29T01:16:14.831-03:00  INFO 16700 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:16:14.833-03:00  INFO 16700 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T01:16:14.877-03:00  INFO 16700 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T01:16:14.905-03:00  INFO 16700 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:16:14.905-03:00  INFO 16700 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T01:16:14.932-03:00  INFO 16700 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T01:16:14.964-03:00  INFO 16700 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:16:14.965-03:00  INFO 16700 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T01:16:14.990-03:00  INFO 16700 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T01:34:18.185-03:00  INFO 23140 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 23140 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:34:18.186-03:00 DEBUG 23140 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:34:18.187-03:00  INFO 23140 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:34:18.868-03:00  INFO 23140 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:34:18.923-03:00  INFO 23140 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49 ms. Found 5 JPA repository interfaces.
2023-01-29T01:34:19.523-03:00  INFO 23140 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T01:34:19.690-03:00  INFO 23140 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:9233e9a4-2fe7-4482-8392-760c51da16b3 user=SA
2023-01-29T01:34:19.692-03:00  INFO 23140 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T01:34:19.888-03:00  INFO 23140 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:34:19.938-03:00  INFO 23140 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T01:34:19.990-03:00  WARN 23140 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:34:20.141-03:00  INFO 23140 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:34:21.030-03:00  INFO 23140 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:34:21.038-03:00  INFO 23140 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:34:21.056-03:00  INFO 23140 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:34:21.496-03:00  INFO 22936 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 22936 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:34:21.497-03:00 DEBUG 22936 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:34:21.497-03:00  INFO 22936 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:34:21.530-03:00  INFO 25692 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 25692 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:34:21.530-03:00 DEBUG 25692 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:34:21.532-03:00  INFO 25692 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:34:22.310-03:00  WARN 23140 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:34:22.950-03:00  INFO 25692 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:34:23.069-03:00  INFO 22936 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:34:23.100-03:00  INFO 25692 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 128 ms. Found 5 JPA repository interfaces.
2023-01-29T01:34:23.204-03:00  INFO 22936 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 118 ms. Found 5 JPA repository interfaces.
2023-01-29T01:34:24.195-03:00  INFO 23140 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@533165e7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@324e62e2, org.springframework.security.web.context.SecurityContextHolderFilter@65d3a83, org.springframework.security.web.header.HeaderWriterFilter@5c85ed05, org.springframework.security.web.authentication.logout.LogoutFilter@7926d092, com.example.ec.security.JwtTokenFilter@1018552d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@73ac7716, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@125ace20, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@75eca6d8, org.springframework.security.web.session.SessionManagementFilter@475753dd, org.springframework.security.web.access.ExceptionTranslationFilter@70f37190, org.springframework.security.web.access.intercept.AuthorizationFilter@690113f0]
2023-01-29T01:34:25.218-03:00  INFO 23140 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 7.298 seconds (process running for 8.725)
2023-01-29T01:34:25.277-03:00  INFO 23140 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:34:25.294-03:00  INFO 23140 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T01:34:25.369-03:00  INFO 25692 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T01:34:25.381-03:00  INFO 25692 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T01:34:25.382-03:00  INFO 25692 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T01:34:25.423-03:00  INFO 22936 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T01:34:25.434-03:00  INFO 22936 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T01:34:25.434-03:00  INFO 22936 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T01:34:25.471-03:00  INFO 23140 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:34:25.479-03:00  INFO 23140 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T01:34:25.498-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T01:34:25.512-03:00  INFO 25692 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T01:34:25.513-03:00  INFO 25692 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3949 ms
2023-01-29T01:34:25.556-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:34:25.568-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T01:34:25.580-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:34:25.581-03:00  INFO 22936 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T01:34:25.582-03:00  INFO 22936 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4055 ms
2023-01-29T01:34:25.602-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T01:34:25.619-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T01:34:25.632-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T01:34:25.639-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T01:34:25.650-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:34:25.657-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T01:34:25.658-03:00 DEBUG 23140 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T01:34:25.660-03:00 DEBUG 23140 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T01:34:25.661-03:00 DEBUG 23140 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T01:34:25.660-03:00  INFO 25692 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T01:34:25.662-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:34:25.676-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T01:34:25.744-03:00  INFO 22936 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T01:34:25.900-03:00  INFO 25692 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:96c30d78-2a4c-4486-95ef-13e00748e72b user=SA
2023-01-29T01:34:25.903-03:00  INFO 25692 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T01:34:25.942-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T01:34:25.949-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T01:34:25.958-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T01:34:25.962-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T01:34:25.967-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T01:34:25.968-03:00 DEBUG 23140 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T01:34:25.968-03:00 DEBUG 23140 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T01:34:25.975-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T01:34:25.980-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T01:34:25.984-03:00  INFO 22936 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:68ff6da9-3a26-4d38-b001-a6f4203d600d user=SA
2023-01-29T01:34:25.987-03:00  INFO 22936 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T01:34:26.079-03:00  INFO 23140 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T01:34:26.087-03:00  INFO 23140 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:34:26.089-03:00  INFO 23140 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T01:34:26.097-03:00  INFO 23140 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T01:34:26.102-03:00  INFO 23140 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T01:34:26.143-03:00  INFO 25692 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:34:26.206-03:00  INFO 25692 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T01:34:26.234-03:00  INFO 22936 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:34:26.262-03:00  WARN 25692 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:34:26.301-03:00  INFO 22936 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T01:34:26.350-03:00  WARN 22936 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:34:26.432-03:00  INFO 25692 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:34:26.513-03:00  INFO 22936 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:34:27.157-03:00  INFO 25692 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:34:27.164-03:00  INFO 25692 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:34:27.179-03:00  INFO 25692 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:34:27.225-03:00  INFO 22936 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:34:27.235-03:00  INFO 22936 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:34:27.257-03:00  INFO 22936 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:34:27.466-03:00  INFO 23140 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:34:27.482-03:00  INFO 23140 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T01:34:27.521-03:00  INFO 23140 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 23140 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:34:27.521-03:00 DEBUG 23140 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:34:27.522-03:00  INFO 23140 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:34:27.945-03:00  INFO 23140 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:34:27.990-03:00  INFO 23140 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 44 ms. Found 5 JPA repository interfaces.
2023-01-29T01:34:28.477-03:00  INFO 23140 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T01:34:28.487-03:00  WARN 25692 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:34:28.497-03:00  INFO 23140 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T01:34:28.498-03:00  INFO 23140 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T01:34:28.555-03:00  WARN 22936 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:34:28.623-03:00  INFO 23140 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T01:34:28.624-03:00  INFO 23140 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1100 ms
2023-01-29T01:34:28.729-03:00  INFO 23140 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T01:34:28.737-03:00  INFO 23140 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:e7f535a5-067e-4a6d-a31f-8eb2c4fbdc10 user=SA
2023-01-29T01:34:28.737-03:00  INFO 23140 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T01:34:28.806-03:00  INFO 23140 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:34:28.811-03:00  WARN 23140 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:34:28.820-03:00  INFO 23140 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:34:28.927-03:00  INFO 23140 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:34:28.927-03:00  INFO 23140 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:34:28.937-03:00  INFO 23140 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:34:29.280-03:00  WARN 23140 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:34:30.434-03:00  INFO 25692 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2ea8f277, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7244b40e, org.springframework.security.web.context.SecurityContextHolderFilter@58f27c37, org.springframework.security.web.header.HeaderWriterFilter@16576a6, org.springframework.security.web.authentication.logout.LogoutFilter@37a74cf4, com.example.ec.security.JwtTokenFilter@5d8de4bd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3eb4fdd5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@19070326, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@405d123c, org.springframework.security.web.session.SessionManagementFilter@1d47b761, org.springframework.security.web.access.ExceptionTranslationFilter@30fba306, org.springframework.security.web.access.intercept.AuthorizationFilter@2cee1bcf]
2023-01-29T01:34:30.600-03:00  INFO 22936 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@70a81b4e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@48c56b42, org.springframework.security.web.context.SecurityContextHolderFilter@472d7f34, org.springframework.security.web.header.HeaderWriterFilter@3eb4fdd5, org.springframework.security.web.authentication.logout.LogoutFilter@6442c2dd, com.example.ec.security.JwtTokenFilter@5c6fae3c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@67cc5a38, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@23b62cc3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@466c39de, org.springframework.security.web.session.SessionManagementFilter@4ce4c097, org.springframework.security.web.access.ExceptionTranslationFilter@58f27c37, org.springframework.security.web.access.intercept.AuthorizationFilter@5d8cbb32]
2023-01-29T01:34:31.367-03:00  INFO 25692 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 57414 (http) with context path ''
2023-01-29T01:34:31.376-03:00  INFO 25692 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 10.187 seconds (process running for 11.561)
2023-01-29T01:34:31.439-03:00  INFO 22936 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 57417 (http) with context path ''
2023-01-29T01:34:31.449-03:00  INFO 22936 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 10.304 seconds (process running for 11.668)
2023-01-29T01:34:31.601-03:00  INFO 25692 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T01:34:31.602-03:00  INFO 25692 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T01:34:31.603-03:00  INFO 25692 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T01:34:31.615-03:00  INFO 25692 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:31.641-03:00  INFO 25692 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2Njg3MSwiZXhwIjoxNjc0OTY3NDcxfQ.EiQPAOKIXm5Ehvw2NVWqZr7sSJJV3Bx-NWPtkMtWh3k]
2023-01-29T01:34:31.659-03:00  INFO 22936 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T01:34:31.659-03:00  INFO 22936 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T01:34:31.661-03:00  INFO 22936 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-01-29T01:34:31.672-03:00  INFO 22936 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:31.702-03:00  INFO 22936 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2Njg3MSwiZXhwIjoxNjc0OTY3NDcxfQ.EiQPAOKIXm5Ehvw2NVWqZr7sSJJV3Bx-NWPtkMtWh3k]
2023-01-29T01:34:31.713-03:00 ERROR 25692 --- [http-nio-auto-1-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T01:34:31.771-03:00  INFO 25692 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:34:31.774-03:00  INFO 25692 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T01:34:31.776-03:00  INFO 25692 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T01:34:31.783-03:00 ERROR 22936 --- [http-nio-auto-1-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T01:34:31.844-03:00  INFO 22936 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:34:31.846-03:00  INFO 22936 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T01:34:31.848-03:00  INFO 22936 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T01:34:33.128-03:00  INFO 23140 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7c8ec235, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@76145ef9, org.springframework.security.web.context.SecurityContextHolderFilter@441eae0b, org.springframework.security.web.header.HeaderWriterFilter@47ce44ab, org.springframework.security.web.authentication.logout.LogoutFilter@798e73de, com.example.ec.security.JwtTokenFilter@279afa4e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@26562718, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1388c465, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@519f1a7d, org.springframework.security.web.session.SessionManagementFilter@48f27e0b, org.springframework.security.web.access.ExceptionTranslationFilter@7d33e32b, org.springframework.security.web.access.intercept.AuthorizationFilter@3b89bf47]
2023-01-29T01:34:33.388-03:00  INFO 23140 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 57425 (http) with context path ''
2023-01-29T01:34:33.391-03:00  INFO 23140 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 5.902 seconds (process running for 16.898)
2023-01-29T01:34:33.528-03:00  INFO 23140 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T01:34:33.528-03:00  INFO 23140 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T01:34:33.529-03:00  INFO 23140 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T01:34:33.536-03:00  INFO 23140 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:33.536-03:00  INFO 23140 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:34:33.559-03:00  INFO 23140 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T01:34:33.623-03:00  INFO 23140 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:33.624-03:00  INFO 23140 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:34:33.624-03:00  INFO 23140 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T01:34:33.634-03:00  INFO 23140 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:34:33.635-03:00  INFO 23140 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T01:34:33.659-03:00  INFO 23140 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:33.673-03:00  INFO 23140 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2Njg3MywiZXhwIjoxNjc0OTY3NDczfQ.Nw8WA6jvsxHZ7GyR3ljYT29lByRKxamfMnMibaaG_iE]
2023-01-29T01:34:33.682-03:00  INFO 23140 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T01:34:33.691-03:00  INFO 23140 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:33.692-03:00  INFO 23140 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:34:33.697-03:00  INFO 23140 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T01:34:33.722-03:00  INFO 23140 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:33.726-03:00  INFO 23140 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2Njg3MywiZXhwIjoxNjc0OTY3NDczfQ.Nw8WA6jvsxHZ7GyR3ljYT29lByRKxamfMnMibaaG_iE]
2023-01-29T01:34:33.755-03:00  INFO 23140 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T01:34:33.764-03:00  INFO 23140 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:33.768-03:00  INFO 23140 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2Njg3MywiZXhwIjoxNjc0OTY3NDczfQ.Nw8WA6jvsxHZ7GyR3ljYT29lByRKxamfMnMibaaG_iE]
2023-01-29T01:34:33.770-03:00  INFO 23140 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T01:34:33.777-03:00  INFO 23140 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:33.778-03:00  INFO 23140 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:34:33.779-03:00  INFO 23140 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T01:34:33.788-03:00  INFO 23140 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:33.792-03:00  INFO 23140 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2Njg3MywiZXhwIjoxNjc0OTY3NDczfQ.Nw8WA6jvsxHZ7GyR3ljYT29lByRKxamfMnMibaaG_iE]
2023-01-29T01:34:33.795-03:00  INFO 23140 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T01:34:33.803-03:00  INFO 23140 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:33.807-03:00  INFO 23140 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2Njg3MywiZXhwIjoxNjc0OTY3NDczfQ.Nw8WA6jvsxHZ7GyR3ljYT29lByRKxamfMnMibaaG_iE]
2023-01-29T01:34:33.809-03:00  INFO 23140 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T01:34:33.814-03:00  INFO 23140 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T01:34:33.815-03:00  INFO 23140 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T01:34:33.828-03:00  INFO 23140 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 23140 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:34:33.828-03:00 DEBUG 23140 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:34:33.828-03:00  INFO 23140 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:34:33.949-03:00  INFO 23140 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:34:33.959-03:00  INFO 23140 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T01:34:34.026-03:00  INFO 23140 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T01:34:34.026-03:00  INFO 23140 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T01:34:34.027-03:00  INFO 23140 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T01:34:34.050-03:00  INFO 23140 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T01:34:34.051-03:00  INFO 23140 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 222 ms
2023-01-29T01:34:34.140-03:00  INFO 23140 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T01:34:34.183-03:00  INFO 23140 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:2b076780-62b0-4cea-b140-f851574460b4 user=SA
2023-01-29T01:34:34.183-03:00  INFO 23140 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T01:34:34.207-03:00  INFO 23140 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:34:34.209-03:00  WARN 23140 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:34:34.212-03:00  INFO 23140 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:34:34.256-03:00  INFO 23140 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:34:34.257-03:00  INFO 23140 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:34:34.260-03:00  INFO 23140 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:34:34.362-03:00  WARN 23140 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:34:37.062-03:00  INFO 23140 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@63d93e91, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@a28296e, org.springframework.security.web.context.SecurityContextHolderFilter@3db2665d, org.springframework.security.web.header.HeaderWriterFilter@62068fa5, org.springframework.security.web.authentication.logout.LogoutFilter@6c40bb07, com.example.ec.security.JwtTokenFilter@127205ac, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@59a8891e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@f054e29, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24b73741, org.springframework.security.web.session.SessionManagementFilter@7a86e414, org.springframework.security.web.access.ExceptionTranslationFilter@2c890ee3, org.springframework.security.web.access.intercept.AuthorizationFilter@546c43e0]
2023-01-29T01:34:37.220-03:00  INFO 23140 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 57431 (http) with context path ''
2023-01-29T01:34:37.223-03:00  INFO 23140 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 3.405 seconds (process running for 20.73)
2023-01-29T01:34:37.231-03:00  INFO 23140 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T01:34:37.231-03:00  INFO 23140 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T01:34:37.232-03:00  INFO 23140 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T01:34:37.232-03:00  INFO 23140 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:37.235-03:00  INFO 23140 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2Njg3NywiZXhwIjoxNjc0OTY3NDc3fQ.R9jmlZenCCYlut6KC-IX1K7Gy3LBbPjSrHhiWPIYV2c]
2023-01-29T01:34:37.241-03:00 ERROR 23140 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T01:34:37.254-03:00  INFO 23140 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:37.255-03:00  INFO 23140 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T01:34:37.258-03:00 ERROR 23140 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T01:34:37.266-03:00  INFO 23140 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:37.269-03:00  INFO 23140 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY2ODc3LCJleHAiOjE2NzQ5Njc0Nzd9.FY-06ATpodwIF4D3jWc48wKckGxQf6QLx9jpw0MbD00]
2023-01-29T01:34:37.281-03:00  INFO 23140 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:34:37.284-03:00  INFO 23140 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY2ODc3LCJleHAiOjE2NzQ5Njc0Nzd9.FY-06ATpodwIF4D3jWc48wKckGxQf6QLx9jpw0MbD00]
2023-01-29T01:34:37.358-03:00  INFO 23140 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:34:37.360-03:00  INFO 23140 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T01:34:37.446-03:00  INFO 23140 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T01:34:37.470-03:00  INFO 23140 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:34:37.470-03:00  INFO 23140 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T01:34:37.531-03:00  INFO 23140 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T01:34:37.540-03:00  INFO 23140 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:34:37.540-03:00  INFO 23140 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T01:34:37.599-03:00  INFO 23140 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T01:34:58.760-03:00  INFO 16488 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 16488 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T01:34:58.761-03:00 DEBUG 16488 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T01:34:58.762-03:00  INFO 16488 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T01:34:59.472-03:00  INFO 16488 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T01:34:59.532-03:00  INFO 16488 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2023-01-29T01:35:00.718-03:00  INFO 16488 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T01:35:00.729-03:00  INFO 16488 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T01:35:00.730-03:00  INFO 16488 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T01:35:00.833-03:00  INFO 16488 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T01:35:00.834-03:00  INFO 16488 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2052 ms
2023-01-29T01:35:00.927-03:00  INFO 16488 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T01:35:01.075-03:00  INFO 16488 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:a6d7680d-96cd-4096-b61d-230d3d4e51f8 user=SA
2023-01-29T01:35:01.077-03:00  INFO 16488 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T01:35:01.220-03:00  INFO 16488 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T01:35:01.272-03:00  INFO 16488 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T01:35:01.316-03:00  WARN 16488 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T01:35:01.446-03:00  INFO 16488 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T01:35:02.057-03:00  INFO 16488 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T01:35:02.065-03:00  INFO 16488 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:35:02.081-03:00  INFO 16488 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T01:35:02.747-03:00  WARN 16488 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T01:35:03.709-03:00  INFO 16488 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7244b40e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5d8de4bd, org.springframework.security.web.context.SecurityContextHolderFilter@78ae34f7, org.springframework.security.web.header.HeaderWriterFilter@70b037ac, org.springframework.security.web.authentication.logout.LogoutFilter@40af3dd8, com.example.ec.security.JwtTokenFilter@405d123c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@19070326, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@52dfd7f5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@298f7b0a, org.springframework.security.web.session.SessionManagementFilter@d4962bd, org.springframework.security.web.access.ExceptionTranslationFilter@1ca55d5, org.springframework.security.web.access.intercept.AuthorizationFilter@ae4a043]
2023-01-29T01:35:04.215-03:00  INFO 16488 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 57456 (http) with context path ''
2023-01-29T01:35:04.223-03:00  INFO 16488 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.657 seconds (process running for 6.687)
2023-01-29T01:35:04.442-03:00  INFO 16488 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T01:35:04.442-03:00  INFO 16488 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T01:35:04.443-03:00  INFO 16488 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T01:35:04.453-03:00  INFO 16488 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T01:35:04.480-03:00  INFO 16488 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY2OTA0LCJleHAiOjE2NzQ5Njc1MDR9.GpL8L_gUdf9x2b8J02lN5js3YdoR-Y3VxhB0od54xOA]
2023-01-29T01:35:04.590-03:00  INFO 16488 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T01:35:04.592-03:00  INFO 16488 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T01:35:04.595-03:00  INFO 16488 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:09:23.697-03:00  INFO 23580 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 23580 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:09:23.697-03:00 DEBUG 23580 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:09:23.698-03:00  INFO 23580 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:09:24.351-03:00  INFO 23580 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:09:24.412-03:00  INFO 23580 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2023-01-29T02:09:25.589-03:00  INFO 23580 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:09:25.600-03:00  INFO 23580 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:09:25.601-03:00  INFO 23580 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:09:25.695-03:00  INFO 23580 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:09:25.695-03:00  INFO 23580 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1982 ms
2023-01-29T02:09:25.811-03:00  INFO 23580 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:09:25.970-03:00  INFO 23580 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:01ca778d-7d2f-44a4-aeaf-46243f0585d1 user=SA
2023-01-29T02:09:25.972-03:00  INFO 23580 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:09:26.119-03:00  INFO 23580 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:09:26.172-03:00  INFO 23580 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:09:26.214-03:00  WARN 23580 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:09:26.339-03:00  INFO 23580 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:09:26.926-03:00  INFO 23580 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:09:26.933-03:00  INFO 23580 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:09:26.947-03:00  INFO 23580 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:09:27.539-03:00  WARN 23580 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:09:28.772-03:00  INFO 23580 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@295e989, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@504216ff, org.springframework.security.web.context.SecurityContextHolderFilter@b257072, org.springframework.security.web.header.HeaderWriterFilter@3de507af, org.springframework.security.web.authentication.logout.LogoutFilter@3eb4fdd5, com.example.ec.security.JwtTokenFilter@4ce4c097, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1b513ce8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@17596317, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2aec09a3, org.springframework.security.web.session.SessionManagementFilter@4af8ff3, org.springframework.security.web.access.ExceptionTranslationFilter@f61f06e, org.springframework.security.web.access.intercept.AuthorizationFilter@6ed78a5e]
2023-01-29T02:09:29.316-03:00  INFO 23580 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52324 (http) with context path ''
2023-01-29T02:09:29.326-03:00  INFO 23580 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.816 seconds (process running for 6.786)
2023-01-29T02:09:29.533-03:00  INFO 23580 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:09:29.534-03:00  INFO 23580 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:09:29.535-03:00  INFO 23580 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:09:29.545-03:00  INFO 23580 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:09:29.570-03:00  INFO 23580 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY4OTY5LCJleHAiOjE2NzQ5Njk1Njl9.-8AFgbffGMAJVgmK9R0PuQOCDYS0to36I75PLX3-ibA]
2023-01-29T02:09:29.671-03:00  INFO 23580 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:09:29.672-03:00  INFO 23580 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:09:29.674-03:00  INFO 23580 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:11:10.834-03:00  INFO 28844 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 28844 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:11:10.835-03:00 DEBUG 28844 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:11:10.836-03:00  INFO 28844 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:11:11.755-03:00  INFO 28844 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:11:11.861-03:00  INFO 28844 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 94 ms. Found 5 JPA repository interfaces.
2023-01-29T02:11:12.566-03:00  INFO 28844 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:11:12.736-03:00  INFO 28844 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:3edb31d1-a101-40ec-b45c-3f74222d9ad2 user=SA
2023-01-29T02:11:12.738-03:00  INFO 28844 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:11:12.893-03:00  INFO 28844 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:11:12.948-03:00  INFO 28844 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:11:12.985-03:00  WARN 28844 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:11:13.100-03:00  INFO 28844 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:11:13.824-03:00  INFO 28844 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:11:13.833-03:00  INFO 28844 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:11:13.848-03:00  INFO 28844 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:11:14.549-03:00  WARN 28844 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:11:15.409-03:00  INFO 28844 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@324e62e2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1018552d, org.springframework.security.web.context.SecurityContextHolderFilter@7be9582e, org.springframework.security.web.header.HeaderWriterFilter@23657729, org.springframework.security.web.authentication.logout.LogoutFilter@58a93f51, com.example.ec.security.JwtTokenFilter@75eca6d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@125ace20, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7dbc77ca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d2afbdf, org.springframework.security.web.session.SessionManagementFilter@9203db8, org.springframework.security.web.access.ExceptionTranslationFilter@1d642682, org.springframework.security.web.access.intercept.AuthorizationFilter@509e4d53]
2023-01-29T02:11:15.857-03:00  INFO 28844 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 5.221 seconds (process running for 6.717)
2023-01-29T02:11:15.883-03:00  INFO 28844 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:11:15.890-03:00  INFO 28844 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:11:16.006-03:00  INFO 28844 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:11:16.011-03:00  INFO 28844 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:11:16.021-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:11:16.052-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:11:16.057-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:11:16.065-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:11:16.079-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:11:16.089-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:11:16.097-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:11:16.101-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:11:16.106-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:11:16.111-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:11:16.111-03:00 DEBUG 28844 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:11:16.112-03:00 DEBUG 28844 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:11:16.113-03:00 DEBUG 28844 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:11:16.114-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:11:16.119-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:11:16.275-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:11:16.279-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:11:16.286-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:11:16.289-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:11:16.292-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:11:16.292-03:00 DEBUG 28844 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:11:16.292-03:00 DEBUG 28844 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:11:16.297-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:11:16.300-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:11:16.355-03:00  INFO 28844 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:11:16.359-03:00  INFO 28844 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:11:16.360-03:00  INFO 28844 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:11:16.364-03:00  INFO 28844 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:11:16.367-03:00  INFO 28844 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:11:17.507-03:00  INFO 28844 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:11:17.517-03:00  INFO 28844 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:11:17.541-03:00  INFO 28844 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 28844 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:11:17.541-03:00 DEBUG 28844 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:11:17.541-03:00  INFO 28844 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:11:17.721-03:00  INFO 28844 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:11:17.733-03:00  INFO 28844 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 5 JPA repository interfaces.
2023-01-29T02:11:17.945-03:00  INFO 28844 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:11:17.958-03:00  INFO 28844 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:11:17.958-03:00  INFO 28844 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:11:18.037-03:00  INFO 28844 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:11:18.037-03:00  INFO 28844 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 494 ms
2023-01-29T02:11:18.107-03:00  INFO 28844 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:11:18.114-03:00  INFO 28844 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:677e1497-086d-4549-99a3-47f1ffaafbf3 user=SA
2023-01-29T02:11:18.114-03:00  INFO 28844 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:11:18.156-03:00  INFO 28844 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:11:18.158-03:00  WARN 28844 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:11:18.160-03:00  INFO 28844 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:11:18.208-03:00  INFO 28844 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:11:18.208-03:00  INFO 28844 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:11:18.212-03:00  INFO 28844 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:11:18.329-03:00  WARN 28844 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:11:19.071-03:00  INFO 28844 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@798e73de, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6ef7e510, org.springframework.security.web.context.SecurityContextHolderFilter@7d33e32b, org.springframework.security.web.header.HeaderWriterFilter@65bd41d8, org.springframework.security.web.authentication.logout.LogoutFilter@26562718, com.example.ec.security.JwtTokenFilter@3b89bf47, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@47ce44ab, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@48f27e0b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7c8ec235, org.springframework.security.web.session.SessionManagementFilter@40699137, org.springframework.security.web.access.ExceptionTranslationFilter@73f937d9, org.springframework.security.web.access.intercept.AuthorizationFilter@48d1f239]
2023-01-29T02:11:19.434-03:00  INFO 28844 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52386 (http) with context path ''
2023-01-29T02:11:19.437-03:00  INFO 28844 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.916 seconds (process running for 10.297)
2023-01-29T02:11:19.567-03:00  INFO 28844 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:11:19.567-03:00  INFO 28844 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:11:19.569-03:00  INFO 28844 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-01-29T02:11:19.577-03:00  INFO 28844 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:19.577-03:00  INFO 28844 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:11:19.598-03:00  INFO 28844 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:11:19.669-03:00  INFO 28844 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:19.669-03:00  INFO 28844 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:11:19.670-03:00  INFO 28844 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:11:19.680-03:00  INFO 28844 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:11:19.682-03:00  INFO 28844 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:11:19.707-03:00  INFO 28844 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:19.725-03:00  INFO 28844 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTA3OSwiZXhwIjoxNjc0OTY5Njc5fQ.XgWiy5E7jQrfTOyvgrXi_515WNDe25O478eU8hmhnNI]
2023-01-29T02:11:19.736-03:00  INFO 28844 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:11:19.746-03:00  INFO 28844 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:19.746-03:00  INFO 28844 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:11:19.751-03:00  INFO 28844 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:11:19.781-03:00  INFO 28844 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:19.785-03:00  INFO 28844 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTA3OSwiZXhwIjoxNjc0OTY5Njc5fQ.XgWiy5E7jQrfTOyvgrXi_515WNDe25O478eU8hmhnNI]
2023-01-29T02:11:19.817-03:00  INFO 28844 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:11:19.827-03:00  INFO 28844 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:19.830-03:00  INFO 28844 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTA3OSwiZXhwIjoxNjc0OTY5Njc5fQ.XgWiy5E7jQrfTOyvgrXi_515WNDe25O478eU8hmhnNI]
2023-01-29T02:11:19.833-03:00  INFO 28844 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:11:19.841-03:00  INFO 28844 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:19.841-03:00  INFO 28844 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:11:19.843-03:00  INFO 28844 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:11:19.852-03:00  INFO 28844 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:19.856-03:00  INFO 28844 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTA3OSwiZXhwIjoxNjc0OTY5Njc5fQ.XgWiy5E7jQrfTOyvgrXi_515WNDe25O478eU8hmhnNI]
2023-01-29T02:11:19.861-03:00  INFO 28844 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:11:19.870-03:00  INFO 28844 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:19.874-03:00  INFO 28844 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTA3OSwiZXhwIjoxNjc0OTY5Njc5fQ.XgWiy5E7jQrfTOyvgrXi_515WNDe25O478eU8hmhnNI]
2023-01-29T02:11:19.876-03:00  INFO 28844 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:11:19.881-03:00  INFO 28844 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:11:19.882-03:00  INFO 28844 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:11:19.898-03:00  INFO 28844 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 28844 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:11:19.898-03:00 DEBUG 28844 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:11:19.898-03:00  INFO 28844 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:11:20.037-03:00  INFO 28844 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:11:20.047-03:00  INFO 28844 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T02:11:20.108-03:00  INFO 28844 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:11:20.110-03:00  INFO 28844 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:11:20.110-03:00  INFO 28844 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:11:20.132-03:00  INFO 28844 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:11:20.132-03:00  INFO 28844 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 233 ms
2023-01-29T02:11:20.169-03:00  INFO 28844 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:11:20.182-03:00  INFO 28844 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:9123827b-9121-4297-a88b-f73f62163047 user=SA
2023-01-29T02:11:20.182-03:00  INFO 28844 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:11:20.208-03:00  INFO 28844 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:11:20.210-03:00  WARN 28844 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:11:20.213-03:00  INFO 28844 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:11:20.257-03:00  INFO 28844 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:11:20.257-03:00  INFO 28844 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:11:20.262-03:00  INFO 28844 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:11:20.395-03:00  WARN 28844 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:11:21.148-03:00  INFO 28844 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@63d93e91, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@a28296e, org.springframework.security.web.context.SecurityContextHolderFilter@3db2665d, org.springframework.security.web.header.HeaderWriterFilter@62068fa5, org.springframework.security.web.authentication.logout.LogoutFilter@6c40bb07, com.example.ec.security.JwtTokenFilter@127205ac, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@59a8891e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@f054e29, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24b73741, org.springframework.security.web.session.SessionManagementFilter@7a86e414, org.springframework.security.web.access.ExceptionTranslationFilter@2c890ee3, org.springframework.security.web.access.intercept.AuthorizationFilter@546c43e0]
2023-01-29T02:11:21.267-03:00  INFO 28844 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52391 (http) with context path ''
2023-01-29T02:11:21.270-03:00  INFO 28844 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.385 seconds (process running for 12.131)
2023-01-29T02:11:21.280-03:00  INFO 28844 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:11:21.280-03:00  INFO 28844 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:11:21.281-03:00  INFO 28844 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:11:21.281-03:00  INFO 28844 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:21.284-03:00  INFO 28844 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTA4MSwiZXhwIjoxNjc0OTY5NjgxfQ.rX6HyzDTPqe3j31Ws096KalPLnxQISAbQX35yq0P_pk]
2023-01-29T02:11:21.292-03:00 ERROR 28844 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:11:21.308-03:00  INFO 28844 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:21.308-03:00  INFO 28844 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:11:21.312-03:00 ERROR 28844 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:11:21.319-03:00  INFO 28844 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:21.322-03:00  INFO 28844 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5MDgxLCJleHAiOjE2NzQ5Njk2ODF9.0lkmsfH88L_72Elwi9gPyttCeUnFCAJRQR1MK6Mvyl8]
2023-01-29T02:11:21.333-03:00  INFO 28844 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:11:21.337-03:00  INFO 28844 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5MDgxLCJleHAiOjE2NzQ5Njk2ODF9.0lkmsfH88L_72Elwi9gPyttCeUnFCAJRQR1MK6Mvyl8]
2023-01-29T02:11:21.391-03:00  INFO 28844 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:11:21.392-03:00  INFO 28844 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:11:21.438-03:00  INFO 28844 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:11:21.451-03:00  INFO 28844 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:11:21.452-03:00  INFO 28844 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:11:21.485-03:00  INFO 28844 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:11:21.506-03:00  INFO 28844 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:11:21.506-03:00  INFO 28844 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:11:21.536-03:00  INFO 28844 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:16:13.069-03:00  INFO 27656 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 27656 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:16:13.069-03:00 DEBUG 27656 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:16:13.070-03:00  INFO 27656 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:16:13.711-03:00  INFO 27656 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:16:13.772-03:00  INFO 27656 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2023-01-29T02:16:14.248-03:00  INFO 27656 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:16:14.393-03:00  INFO 27656 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:b69b869a-525e-46a5-8937-a63307faa3c4 user=SA
2023-01-29T02:16:14.394-03:00  INFO 27656 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:16:14.527-03:00  INFO 27656 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:16:14.583-03:00  INFO 27656 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:16:14.618-03:00  WARN 27656 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:16:14.723-03:00  INFO 27656 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:16:15.300-03:00  INFO 27656 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:16:15.308-03:00  INFO 27656 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:16:15.326-03:00  INFO 27656 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:16:15.947-03:00  WARN 27656 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:16:16.826-03:00  INFO 27656 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4a2bc71f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@20f94e9a, org.springframework.security.web.context.SecurityContextHolderFilter@47baf547, org.springframework.security.web.header.HeaderWriterFilter@73ac7716, org.springframework.security.web.authentication.logout.LogoutFilter@2e9bff08, com.example.ec.security.JwtTokenFilter@3f213e97, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5dc90de7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3071d086, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@693c7741, org.springframework.security.web.session.SessionManagementFilter@152bb4cc, org.springframework.security.web.access.ExceptionTranslationFilter@5bbf8daa, org.springframework.security.web.access.intercept.AuthorizationFilter@157ff8f8]
2023-01-29T02:16:17.238-03:00  INFO 27656 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.356 seconds (process running for 5.679)
2023-01-29T02:16:17.264-03:00  INFO 27656 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:16:17.270-03:00  INFO 27656 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:16:17.391-03:00  INFO 27656 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:16:17.397-03:00  INFO 27656 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:16:17.408-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:16:17.442-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:16:17.446-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:16:17.455-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:16:17.470-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:16:17.481-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:16:17.488-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:16:17.491-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:16:17.497-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:16:17.500-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:16:17.500-03:00 DEBUG 27656 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:16:17.501-03:00 DEBUG 27656 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:16:17.502-03:00 DEBUG 27656 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:16:17.502-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:16:17.508-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:16:17.653-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:16:17.657-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:16:17.666-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:16:17.669-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:16:17.672-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:16:17.672-03:00 DEBUG 27656 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:16:17.672-03:00 DEBUG 27656 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:16:17.675-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:16:17.677-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:16:17.719-03:00  INFO 27656 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:16:17.722-03:00  INFO 27656 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:16:17.723-03:00  INFO 27656 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:16:17.726-03:00  INFO 27656 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:16:17.729-03:00  INFO 27656 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:16:18.840-03:00  INFO 27656 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:16:18.848-03:00  INFO 27656 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:16:18.868-03:00  INFO 27656 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 27656 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:16:18.868-03:00 DEBUG 27656 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:16:18.868-03:00  INFO 27656 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:16:19.022-03:00  INFO 27656 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:16:19.036-03:00  INFO 27656 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 5 JPA repository interfaces.
2023-01-29T02:16:19.216-03:00  INFO 27656 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:16:19.226-03:00  INFO 27656 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:16:19.226-03:00  INFO 27656 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:16:19.298-03:00  INFO 27656 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:16:19.298-03:00  INFO 27656 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 429 ms
2023-01-29T02:16:19.358-03:00  INFO 27656 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:16:19.361-03:00  INFO 27656 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:cd1aa8b7-65d4-4a4a-b00d-4bbfb21b686c user=SA
2023-01-29T02:16:19.361-03:00  INFO 27656 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:16:19.392-03:00  INFO 27656 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:16:19.393-03:00  WARN 27656 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:16:19.397-03:00  INFO 27656 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:16:19.453-03:00  INFO 27656 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:16:19.454-03:00  INFO 27656 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:16:19.459-03:00  INFO 27656 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:16:19.587-03:00  WARN 27656 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:16:20.630-03:00  INFO 27656 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5ace2ce3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@39c821c6, org.springframework.security.web.context.SecurityContextHolderFilter@76145ef9, org.springframework.security.web.header.HeaderWriterFilter@3b89bf47, org.springframework.security.web.authentication.logout.LogoutFilter@fbd9b1f, com.example.ec.security.JwtTokenFilter@6cd9cafb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@279afa4e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@519f1a7d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3da20c42, org.springframework.security.web.session.SessionManagementFilter@7c8ec235, org.springframework.security.web.access.ExceptionTranslationFilter@6ef7e510, org.springframework.security.web.access.intercept.AuthorizationFilter@56e0e953]
2023-01-29T02:16:20.894-03:00  INFO 27656 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52525 (http) with context path ''
2023-01-29T02:16:20.897-03:00  INFO 27656 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 2.046 seconds (process running for 9.338)
2023-01-29T02:16:21.027-03:00  INFO 27656 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:16:21.028-03:00  INFO 27656 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:16:21.029-03:00  INFO 27656 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:16:21.036-03:00  INFO 27656 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:21.036-03:00  INFO 27656 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:16:21.058-03:00  INFO 27656 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:16:21.125-03:00  INFO 27656 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:21.125-03:00  INFO 27656 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:16:21.126-03:00  INFO 27656 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:16:21.135-03:00  INFO 27656 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:16:21.136-03:00  INFO 27656 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:16:21.159-03:00  INFO 27656 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:21.174-03:00  INFO 27656 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTM4MSwiZXhwIjoxNjc0OTY5OTgxfQ.OXDrZGdNKJrWtJAdwHz4bpqfRtZwZCZSqQJn_afa1lQ]
2023-01-29T02:16:21.183-03:00  INFO 27656 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:16:21.191-03:00  INFO 27656 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:21.191-03:00  INFO 27656 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:16:21.196-03:00  INFO 27656 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:16:21.221-03:00  INFO 27656 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:21.224-03:00  INFO 27656 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTM4MSwiZXhwIjoxNjc0OTY5OTgxfQ.OXDrZGdNKJrWtJAdwHz4bpqfRtZwZCZSqQJn_afa1lQ]
2023-01-29T02:16:21.253-03:00  INFO 27656 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:16:21.264-03:00  INFO 27656 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:21.267-03:00  INFO 27656 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTM4MSwiZXhwIjoxNjc0OTY5OTgxfQ.OXDrZGdNKJrWtJAdwHz4bpqfRtZwZCZSqQJn_afa1lQ]
2023-01-29T02:16:21.270-03:00  INFO 27656 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:16:21.277-03:00  INFO 27656 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:21.277-03:00  INFO 27656 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:16:21.278-03:00  INFO 27656 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:16:21.287-03:00  INFO 27656 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:21.291-03:00  INFO 27656 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTM4MSwiZXhwIjoxNjc0OTY5OTgxfQ.OXDrZGdNKJrWtJAdwHz4bpqfRtZwZCZSqQJn_afa1lQ]
2023-01-29T02:16:21.295-03:00  INFO 27656 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:16:21.303-03:00  INFO 27656 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:21.307-03:00  INFO 27656 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTM4MSwiZXhwIjoxNjc0OTY5OTgxfQ.OXDrZGdNKJrWtJAdwHz4bpqfRtZwZCZSqQJn_afa1lQ]
2023-01-29T02:16:21.309-03:00  INFO 27656 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:16:21.315-03:00  INFO 27656 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:16:21.316-03:00  INFO 27656 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:16:21.330-03:00  INFO 27656 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 27656 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:16:21.330-03:00 DEBUG 27656 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:16:21.330-03:00  INFO 27656 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:16:21.477-03:00  INFO 27656 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:16:21.487-03:00  INFO 27656 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T02:16:21.557-03:00  INFO 27656 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:16:21.558-03:00  INFO 27656 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:16:21.558-03:00  INFO 27656 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:16:21.581-03:00  INFO 27656 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:16:21.581-03:00  INFO 27656 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 250 ms
2023-01-29T02:16:21.626-03:00  INFO 27656 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:16:21.660-03:00  INFO 27656 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:7ad1f555-98e6-4ec5-98b6-a82774760582 user=SA
2023-01-29T02:16:21.661-03:00  INFO 27656 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:16:21.686-03:00  INFO 27656 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:16:21.689-03:00  WARN 27656 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:16:21.692-03:00  INFO 27656 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:16:21.754-03:00  INFO 27656 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:16:21.754-03:00  INFO 27656 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:16:21.757-03:00  INFO 27656 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:16:21.866-03:00  WARN 27656 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:16:23.144-03:00  INFO 27656 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@51a94f7f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5028cec0, org.springframework.security.web.context.SecurityContextHolderFilter@a28296e, org.springframework.security.web.header.HeaderWriterFilter@546c43e0, org.springframework.security.web.authentication.logout.LogoutFilter@45188301, com.example.ec.security.JwtTokenFilter@3a8c7347, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@127205ac, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24b73741, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4cf08d08, org.springframework.security.web.session.SessionManagementFilter@63d93e91, org.springframework.security.web.access.ExceptionTranslationFilter@713d2fe8, org.springframework.security.web.access.intercept.AuthorizationFilter@5ad59bed]
2023-01-29T02:16:23.255-03:00  INFO 27656 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52530 (http) with context path ''
2023-01-29T02:16:23.258-03:00  INFO 27656 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.939 seconds (process running for 11.699)
2023-01-29T02:16:23.267-03:00  INFO 27656 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:16:23.267-03:00  INFO 27656 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:16:23.268-03:00  INFO 27656 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:16:23.269-03:00  INFO 27656 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:23.272-03:00  INFO 27656 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTM4MywiZXhwIjoxNjc0OTY5OTgzfQ.tB3W93F5kJ0UaHg7udpIVN7rDlokjnKApbWo1VXX6r4]
2023-01-29T02:16:23.279-03:00 ERROR 27656 --- [http-nio-auto-2-exec-1] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:16:23.294-03:00  INFO 27656 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:23.294-03:00  INFO 27656 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:16:23.298-03:00 ERROR 27656 --- [http-nio-auto-2-exec-2] com.example.ec.web.UserController        : Unable to complete transaction

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:16:23.304-03:00  INFO 27656 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:23.307-03:00  INFO 27656 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5MzgzLCJleHAiOjE2NzQ5Njk5ODN9.GQIuSkLKZf9adUrBYXS6887zxREHEgbrakFUYXNzC4c]
2023-01-29T02:16:23.320-03:00  INFO 27656 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:16:23.323-03:00  INFO 27656 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5MzgzLCJleHAiOjE2NzQ5Njk5ODN9.GQIuSkLKZf9adUrBYXS6887zxREHEgbrakFUYXNzC4c]
2023-01-29T02:16:23.382-03:00  INFO 27656 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:16:23.384-03:00  INFO 27656 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:16:23.444-03:00  INFO 27656 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:16:23.489-03:00  INFO 27656 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:16:23.489-03:00  INFO 27656 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:16:23.532-03:00  INFO 27656 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:16:23.554-03:00  INFO 27656 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:16:23.555-03:00  INFO 27656 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:16:23.601-03:00  INFO 27656 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:21:32.462-03:00  INFO 28336 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 28336 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:21:32.463-03:00 DEBUG 28336 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:21:32.464-03:00  INFO 28336 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:21:33.153-03:00  INFO 28336 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:21:33.217-03:00  INFO 28336 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 57 ms. Found 5 JPA repository interfaces.
2023-01-29T02:21:33.734-03:00  INFO 28336 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:21:33.896-03:00  INFO 28336 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:888c9cdb-1245-4ab1-8b78-6416f6f1cce3 user=SA
2023-01-29T02:21:33.898-03:00  INFO 28336 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:21:34.048-03:00  INFO 28336 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:21:34.108-03:00  INFO 28336 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:21:34.139-03:00  WARN 28336 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:21:34.242-03:00  INFO 28336 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:21:34.818-03:00  INFO 28336 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:21:34.824-03:00  INFO 28336 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:21:34.842-03:00  INFO 28336 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:21:35.441-03:00  WARN 28336 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:21:36.267-03:00  INFO 28336 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7be9582e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@73ac7716, org.springframework.security.web.context.SecurityContextHolderFilter@437a4e61, org.springframework.security.web.header.HeaderWriterFilter@154fcedd, org.springframework.security.web.authentication.logout.LogoutFilter@31773d5b, com.example.ec.security.JwtTokenFilter@125ace20, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@704ca8a8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@61c98f5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7dbc77ca, org.springframework.security.web.session.SessionManagementFilter@5817b0d1, org.springframework.security.web.access.ExceptionTranslationFilter@44a972b4, org.springframework.security.web.access.intercept.AuthorizationFilter@9203db8]
2023-01-29T02:21:36.682-03:00  INFO 28336 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.43 seconds (process running for 5.794)
2023-01-29T02:21:36.707-03:00  INFO 28336 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:21:36.715-03:00  INFO 28336 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:21:36.846-03:00  INFO 28336 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:21:36.851-03:00  INFO 28336 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:21:36.860-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:21:36.889-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:21:36.893-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:21:36.901-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:21:36.914-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:21:36.923-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:21:36.930-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:21:36.933-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:21:36.938-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:21:36.941-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:21:36.942-03:00 DEBUG 28336 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:21:36.943-03:00 DEBUG 28336 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:21:36.943-03:00 DEBUG 28336 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:21:36.943-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:21:36.948-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:21:37.093-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:21:37.098-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:21:37.105-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:21:37.107-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:21:37.110-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:21:37.111-03:00 DEBUG 28336 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:21:37.111-03:00 DEBUG 28336 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:21:37.115-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:21:37.117-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:21:37.166-03:00  INFO 28336 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:21:37.169-03:00  INFO 28336 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:21:37.171-03:00  INFO 28336 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:21:37.176-03:00  INFO 28336 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:21:37.181-03:00  INFO 28336 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:21:38.291-03:00  INFO 28336 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:21:38.299-03:00  INFO 28336 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:21:38.319-03:00  INFO 28336 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 28336 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:21:38.319-03:00 DEBUG 28336 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:21:38.319-03:00  INFO 28336 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:21:38.478-03:00  INFO 28336 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:21:38.490-03:00  INFO 28336 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T02:21:38.670-03:00  INFO 28336 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:21:38.679-03:00  INFO 28336 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:21:38.680-03:00  INFO 28336 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:21:38.749-03:00  INFO 28336 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:21:38.750-03:00  INFO 28336 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 430 ms
2023-01-29T02:21:38.826-03:00  INFO 28336 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:21:38.828-03:00  INFO 28336 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:a15247be-58e9-4172-94a4-c882070dddc7 user=SA
2023-01-29T02:21:38.829-03:00  INFO 28336 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:21:38.863-03:00  INFO 28336 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:21:38.865-03:00  WARN 28336 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:21:38.868-03:00  INFO 28336 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:21:38.921-03:00  INFO 28336 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:21:38.921-03:00  INFO 28336 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:21:38.925-03:00  INFO 28336 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:21:39.042-03:00  WARN 28336 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:21:39.721-03:00  INFO 28336 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6ef7e510, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b89bf47, org.springframework.security.web.context.SecurityContextHolderFilter@47ce44ab, org.springframework.security.web.header.HeaderWriterFilter@40699137, org.springframework.security.web.authentication.logout.LogoutFilter@1388c465, com.example.ec.security.JwtTokenFilter@7c8ec235, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@48f27e0b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@441eae0b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@76145ef9, org.springframework.security.web.session.SessionManagementFilter@7d33e32b, org.springframework.security.web.access.ExceptionTranslationFilter@65bd41d8, org.springframework.security.web.access.intercept.AuthorizationFilter@798e73de]
2023-01-29T02:21:40.039-03:00  INFO 28336 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52698 (http) with context path ''
2023-01-29T02:21:40.044-03:00  INFO 28336 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.741 seconds (process running for 9.156)
2023-01-29T02:21:40.190-03:00  INFO 28336 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:21:40.190-03:00  INFO 28336 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:21:40.191-03:00  INFO 28336 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:21:40.198-03:00  INFO 28336 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:40.199-03:00  INFO 28336 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:21:40.220-03:00  INFO 28336 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:21:40.281-03:00  INFO 28336 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:40.282-03:00  INFO 28336 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:21:40.282-03:00  INFO 28336 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:21:40.291-03:00  INFO 28336 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:21:40.292-03:00  INFO 28336 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:21:40.316-03:00  INFO 28336 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:40.332-03:00  INFO 28336 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcwMCwiZXhwIjoxNjc0OTcwMzAwfQ.UvnWk6fjk61FcBHCvpgW9WbpSshROGMZtXXYzseoVPo]
2023-01-29T02:21:40.340-03:00  INFO 28336 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:21:40.349-03:00  INFO 28336 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:40.349-03:00  INFO 28336 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:21:40.355-03:00  INFO 28336 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:21:40.382-03:00  INFO 28336 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:40.385-03:00  INFO 28336 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcwMCwiZXhwIjoxNjc0OTcwMzAwfQ.UvnWk6fjk61FcBHCvpgW9WbpSshROGMZtXXYzseoVPo]
2023-01-29T02:21:40.418-03:00  INFO 28336 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:21:40.428-03:00  INFO 28336 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:40.431-03:00  INFO 28336 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcwMCwiZXhwIjoxNjc0OTcwMzAwfQ.UvnWk6fjk61FcBHCvpgW9WbpSshROGMZtXXYzseoVPo]
2023-01-29T02:21:40.434-03:00  INFO 28336 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:21:40.442-03:00  INFO 28336 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:40.442-03:00  INFO 28336 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:21:40.445-03:00  INFO 28336 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:21:40.454-03:00  INFO 28336 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:40.458-03:00  INFO 28336 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcwMCwiZXhwIjoxNjc0OTcwMzAwfQ.UvnWk6fjk61FcBHCvpgW9WbpSshROGMZtXXYzseoVPo]
2023-01-29T02:21:40.463-03:00  INFO 28336 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:21:40.471-03:00  INFO 28336 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:40.474-03:00  INFO 28336 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcwMCwiZXhwIjoxNjc0OTcwMzAwfQ.UvnWk6fjk61FcBHCvpgW9WbpSshROGMZtXXYzseoVPo]
2023-01-29T02:21:40.477-03:00  INFO 28336 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:21:40.482-03:00  INFO 28336 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:21:40.483-03:00  INFO 28336 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:21:40.496-03:00  INFO 28336 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 28336 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:21:40.496-03:00 DEBUG 28336 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:21:40.496-03:00  INFO 28336 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:21:40.632-03:00  INFO 28336 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:21:40.642-03:00  INFO 28336 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T02:21:40.705-03:00  INFO 28336 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:21:40.706-03:00  INFO 28336 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:21:40.706-03:00  INFO 28336 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:21:40.729-03:00  INFO 28336 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:21:40.729-03:00  INFO 28336 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 232 ms
2023-01-29T02:21:40.797-03:00  INFO 28336 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:21:40.815-03:00  INFO 28336 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:34e6a2c5-76c4-40af-874c-7cbbae5e311e user=SA
2023-01-29T02:21:40.815-03:00  INFO 28336 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:21:40.846-03:00  INFO 28336 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:21:40.849-03:00  WARN 28336 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:21:40.852-03:00  INFO 28336 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:21:40.908-03:00  INFO 28336 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:21:40.909-03:00  INFO 28336 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:21:40.912-03:00  INFO 28336 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:21:41.018-03:00  WARN 28336 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:21:41.911-03:00  INFO 28336 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@63d93e91, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@a28296e, org.springframework.security.web.context.SecurityContextHolderFilter@3db2665d, org.springframework.security.web.header.HeaderWriterFilter@62068fa5, org.springframework.security.web.authentication.logout.LogoutFilter@6c40bb07, com.example.ec.security.JwtTokenFilter@127205ac, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@59a8891e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@f054e29, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24b73741, org.springframework.security.web.session.SessionManagementFilter@7a86e414, org.springframework.security.web.access.ExceptionTranslationFilter@2c890ee3, org.springframework.security.web.access.intercept.AuthorizationFilter@546c43e0]
2023-01-29T02:21:42.028-03:00  INFO 28336 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52703 (http) with context path ''
2023-01-29T02:21:42.032-03:00  INFO 28336 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.547 seconds (process running for 11.144)
2023-01-29T02:21:42.042-03:00  INFO 28336 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:21:42.042-03:00  INFO 28336 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:21:42.043-03:00  INFO 28336 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:21:42.043-03:00  INFO 28336 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:42.047-03:00  INFO 28336 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcwMiwiZXhwIjoxNjc0OTcwMzAyfQ.yFuiNR9V893vaaQAH6M2Zt7kpIG04TiuyqLTlbLNoC4]
2023-01-29T02:21:42.057-03:00  INFO 28336 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:42.060-03:00  INFO 28336 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcwMiwiZXhwIjoxNjc0OTcwMzAyfQ.yFuiNR9V893vaaQAH6M2Zt7kpIG04TiuyqLTlbLNoC4]
2023-01-29T02:21:42.071-03:00  INFO 28336 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:42.072-03:00  INFO 28336 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:21:42.076-03:00 ERROR 28336 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:21:42.078-03:00  INFO 28336 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:42.079-03:00  INFO 28336 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:21:42.086-03:00  INFO 28336 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:42.089-03:00  INFO 28336 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5NzAyLCJleHAiOjE2NzQ5NzAzMDJ9.57sRYrj8zcYxKVFrTqai4SWQjeNqzLAKgGg9XTUTX98]
2023-01-29T02:21:42.107-03:00  INFO 28336 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:21:42.110-03:00  INFO 28336 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5NzAyLCJleHAiOjE2NzQ5NzAzMDJ9.57sRYrj8zcYxKVFrTqai4SWQjeNqzLAKgGg9XTUTX98]
2023-01-29T02:21:42.176-03:00  INFO 28336 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:21:42.178-03:00  INFO 28336 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:21:42.242-03:00  INFO 28336 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:21:42.257-03:00  INFO 28336 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:21:42.257-03:00  INFO 28336 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:21:42.306-03:00  INFO 28336 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:21:42.328-03:00  INFO 28336 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:21:42.329-03:00  INFO 28336 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:21:42.367-03:00  INFO 28336 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:21:55.776-03:00  INFO 13864 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 13864 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:21:55.776-03:00 DEBUG 13864 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:21:55.777-03:00  INFO 13864 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:21:56.436-03:00  INFO 13864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:21:56.497-03:00  INFO 13864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 53 ms. Found 5 JPA repository interfaces.
2023-01-29T02:21:56.951-03:00  INFO 13864 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:21:57.097-03:00  INFO 13864 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:530f7145-62d2-4fea-b6d6-5a12a1c6b81c user=SA
2023-01-29T02:21:57.098-03:00  INFO 13864 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:21:57.246-03:00  INFO 13864 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:21:57.303-03:00  INFO 13864 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:21:57.350-03:00  WARN 13864 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:21:57.457-03:00  INFO 13864 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:21:58.043-03:00  INFO 13864 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:21:58.050-03:00  INFO 13864 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:21:58.068-03:00  INFO 13864 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:21:58.690-03:00  WARN 13864 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:21:59.590-03:00  INFO 13864 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@152bb4cc, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6f87bc6c, org.springframework.security.web.context.SecurityContextHolderFilter@77a35b2f, org.springframework.security.web.header.HeaderWriterFilter@6ea1fc9, org.springframework.security.web.authentication.logout.LogoutFilter@7dbc77ca, com.example.ec.security.JwtTokenFilter@178f5b5b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4d62bb8b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@70f37190, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@47baf547, org.springframework.security.web.session.SessionManagementFilter@722e1bff, org.springframework.security.web.access.ExceptionTranslationFilter@59cbeaee, org.springframework.security.web.access.intercept.AuthorizationFilter@5a740449]
2023-01-29T02:22:00.069-03:00  INFO 13864 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.486 seconds (process running for 5.769)
2023-01-29T02:22:00.096-03:00  INFO 13864 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:22:00.104-03:00  INFO 13864 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:22:00.262-03:00  INFO 13864 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:22:00.268-03:00  INFO 13864 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:22:00.281-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:22:00.313-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:22:00.319-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:22:00.327-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:22:00.342-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:22:00.351-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:22:00.358-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:22:00.361-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:22:00.366-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:22:00.370-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:22:00.370-03:00 DEBUG 13864 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:22:00.371-03:00 DEBUG 13864 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:22:00.372-03:00 DEBUG 13864 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:22:00.372-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:22:00.377-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:22:00.537-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:22:00.542-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:22:00.551-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:22:00.554-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:22:00.557-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:22:00.557-03:00 DEBUG 13864 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:22:00.558-03:00 DEBUG 13864 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:22:00.562-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:22:00.565-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:22:00.621-03:00  INFO 13864 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:22:00.624-03:00  INFO 13864 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:22:00.625-03:00  INFO 13864 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:22:00.631-03:00  INFO 13864 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:22:00.634-03:00  INFO 13864 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:22:01.768-03:00  INFO 13864 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:22:01.777-03:00  INFO 13864 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:22:01.803-03:00  INFO 13864 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 13864 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:22:01.804-03:00 DEBUG 13864 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:22:01.804-03:00  INFO 13864 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:22:01.969-03:00  INFO 13864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:22:01.980-03:00  INFO 13864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T02:22:02.181-03:00  INFO 13864 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:22:02.192-03:00  INFO 13864 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:22:02.192-03:00  INFO 13864 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:22:02.277-03:00  INFO 13864 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:22:02.277-03:00  INFO 13864 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 471 ms
2023-01-29T02:22:02.361-03:00  INFO 13864 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:22:02.364-03:00  INFO 13864 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:dcdd9255-846f-4f94-8a6c-c9bfe7f27895 user=SA
2023-01-29T02:22:02.365-03:00  INFO 13864 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:22:02.401-03:00  INFO 13864 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:22:02.403-03:00  WARN 13864 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:22:02.406-03:00  INFO 13864 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:22:02.459-03:00  INFO 13864 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:22:02.460-03:00  INFO 13864 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:22:02.464-03:00  INFO 13864 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:22:02.577-03:00  WARN 13864 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:22:03.367-03:00  INFO 13864 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6e9e4332, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c32d208, org.springframework.security.web.context.SecurityContextHolderFilter@7f85482c, org.springframework.security.web.header.HeaderWriterFilter@5b0af511, org.springframework.security.web.authentication.logout.LogoutFilter@6cd9cafb, com.example.ec.security.JwtTokenFilter@61df07d0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56e0e953, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5ace2ce3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@735c0454, org.springframework.security.web.session.SessionManagementFilter@fbd9b1f, org.springframework.security.web.access.ExceptionTranslationFilter@519f1a7d, org.springframework.security.web.access.intercept.AuthorizationFilter@16209621]
2023-01-29T02:22:03.716-03:00  INFO 13864 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52720 (http) with context path ''
2023-01-29T02:22:03.720-03:00  INFO 13864 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.939 seconds (process running for 9.42)
2023-01-29T02:22:03.854-03:00  INFO 13864 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:22:03.854-03:00  INFO 13864 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:22:03.855-03:00  INFO 13864 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:22:03.862-03:00  INFO 13864 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:03.862-03:00  INFO 13864 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:22:03.883-03:00  INFO 13864 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:22:03.949-03:00  INFO 13864 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:03.949-03:00  INFO 13864 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:22:03.950-03:00  INFO 13864 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:22:03.959-03:00  INFO 13864 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:22:03.960-03:00  INFO 13864 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:22:03.988-03:00  INFO 13864 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:04.004-03:00  INFO 13864 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcyMywiZXhwIjoxNjc0OTcwMzIzfQ.Fs5KhnJ9Xj-7MzXNVLZPEv9gphFziqbgiCzF3CZh4qY]
2023-01-29T02:22:04.012-03:00  INFO 13864 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:22:04.023-03:00  INFO 13864 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:04.023-03:00  INFO 13864 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:22:04.029-03:00  INFO 13864 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:22:04.056-03:00  INFO 13864 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:04.059-03:00  INFO 13864 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcyNCwiZXhwIjoxNjc0OTcwMzI0fQ.5KEVzZM5jm9BnKDkqolg3dV-tjzxQs_5ev4W913UWjw]
2023-01-29T02:22:04.089-03:00  INFO 13864 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:22:04.099-03:00  INFO 13864 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:04.101-03:00  INFO 13864 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcyNCwiZXhwIjoxNjc0OTcwMzI0fQ.5KEVzZM5jm9BnKDkqolg3dV-tjzxQs_5ev4W913UWjw]
2023-01-29T02:22:04.104-03:00  INFO 13864 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:22:04.112-03:00  INFO 13864 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:04.112-03:00  INFO 13864 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:22:04.113-03:00  INFO 13864 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:22:04.123-03:00  INFO 13864 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:04.126-03:00  INFO 13864 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcyNCwiZXhwIjoxNjc0OTcwMzI0fQ.5KEVzZM5jm9BnKDkqolg3dV-tjzxQs_5ev4W913UWjw]
2023-01-29T02:22:04.131-03:00  INFO 13864 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:22:04.142-03:00  INFO 13864 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:04.145-03:00  INFO 13864 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcyNCwiZXhwIjoxNjc0OTcwMzI0fQ.5KEVzZM5jm9BnKDkqolg3dV-tjzxQs_5ev4W913UWjw]
2023-01-29T02:22:04.147-03:00  INFO 13864 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:22:04.155-03:00  INFO 13864 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:22:04.157-03:00  INFO 13864 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:22:04.173-03:00  INFO 13864 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 13864 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:22:04.173-03:00 DEBUG 13864 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:22:04.173-03:00  INFO 13864 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:22:04.351-03:00  INFO 13864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:22:04.360-03:00  INFO 13864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T02:22:04.426-03:00  INFO 13864 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:22:04.427-03:00  INFO 13864 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:22:04.427-03:00  INFO 13864 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:22:04.448-03:00  INFO 13864 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:22:04.448-03:00  INFO 13864 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 273 ms
2023-01-29T02:22:04.494-03:00  INFO 13864 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:22:04.516-03:00  INFO 13864 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:00f4b8c7-3e49-4f36-b1dc-a9170b68ca35 user=SA
2023-01-29T02:22:04.516-03:00  INFO 13864 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:22:04.549-03:00  INFO 13864 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:22:04.551-03:00  WARN 13864 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:22:04.555-03:00  INFO 13864 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:22:04.607-03:00  INFO 13864 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:22:04.608-03:00  INFO 13864 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:22:04.611-03:00  INFO 13864 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:22:04.723-03:00  WARN 13864 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:22:05.760-03:00  INFO 13864 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@50ee7857, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@48455005, org.springframework.security.web.context.SecurityContextHolderFilter@51a94f7f, org.springframework.security.web.header.HeaderWriterFilter@47c5b16b, org.springframework.security.web.authentication.logout.LogoutFilter@5739e15e, com.example.ec.security.JwtTokenFilter@223a679, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5028cec0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3a8c7347, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b00eaae, org.springframework.security.web.session.SessionManagementFilter@5ad59bed, org.springframework.security.web.access.ExceptionTranslationFilter@45188301, org.springframework.security.web.access.intercept.AuthorizationFilter@18be3e85]
2023-01-29T02:22:05.862-03:00  INFO 13864 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52726 (http) with context path ''
2023-01-29T02:22:05.866-03:00  INFO 13864 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.707 seconds (process running for 11.567)
2023-01-29T02:22:05.875-03:00  INFO 13864 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:22:05.875-03:00  INFO 13864 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:22:05.876-03:00  INFO 13864 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:22:05.876-03:00  INFO 13864 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:05.879-03:00  INFO 13864 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcyNSwiZXhwIjoxNjc0OTcwMzI1fQ.KGofs9oXTO1XSRxV5weos_fVglEg6VNBtl9JT5SvlPk]
2023-01-29T02:22:05.889-03:00  INFO 13864 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:05.892-03:00  INFO 13864 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTcyNSwiZXhwIjoxNjc0OTcwMzI1fQ.KGofs9oXTO1XSRxV5weos_fVglEg6VNBtl9JT5SvlPk]
2023-01-29T02:22:05.902-03:00  INFO 13864 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:05.902-03:00  INFO 13864 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:22:05.906-03:00 ERROR 13864 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:22:05.908-03:00  INFO 13864 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:05.908-03:00  INFO 13864 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:22:05.914-03:00  INFO 13864 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:05.917-03:00  INFO 13864 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5NzI1LCJleHAiOjE2NzQ5NzAzMjV9.e5eCSuNlpXyEoYQK_z39NYwtsc3gZwG7fh4-ST0mS20]
2023-01-29T02:22:05.932-03:00  INFO 13864 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:22:05.935-03:00  INFO 13864 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5NzI1LCJleHAiOjE2NzQ5NzAzMjV9.e5eCSuNlpXyEoYQK_z39NYwtsc3gZwG7fh4-ST0mS20]
2023-01-29T02:22:05.977-03:00  INFO 13864 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:22:05.979-03:00  INFO 13864 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:22:06.031-03:00  INFO 13864 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:22:06.045-03:00  INFO 13864 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:22:06.045-03:00  INFO 13864 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:22:06.083-03:00  INFO 13864 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:22:06.106-03:00  INFO 13864 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:22:06.106-03:00  INFO 13864 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:22:06.146-03:00  INFO 13864 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:22:55.623-03:00  INFO 19280 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 19280 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:22:55.623-03:00 DEBUG 19280 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:22:55.624-03:00  INFO 19280 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:22:56.260-03:00  INFO 19280 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:22:56.316-03:00  INFO 19280 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49 ms. Found 5 JPA repository interfaces.
2023-01-29T02:22:57.301-03:00  INFO 19280 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:22:57.314-03:00  INFO 19280 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:22:57.314-03:00  INFO 19280 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:22:57.413-03:00  INFO 19280 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:22:57.414-03:00  INFO 19280 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1773 ms
2023-01-29T02:22:57.510-03:00  INFO 19280 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:22:57.661-03:00  INFO 19280 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:81e7dd1d-181e-4c3a-b0c7-dc8c487204fa user=SA
2023-01-29T02:22:57.663-03:00  INFO 19280 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:22:57.801-03:00  INFO 19280 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:22:57.850-03:00  INFO 19280 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:22:57.890-03:00  WARN 19280 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:22:58.005-03:00  INFO 19280 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:22:58.575-03:00  INFO 19280 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:22:58.582-03:00  INFO 19280 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:22:58.595-03:00  INFO 19280 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:22:59.180-03:00  WARN 19280 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:23:00.100-03:00  INFO 19280 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@427c9a13, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7b842e79, org.springframework.security.web.context.SecurityContextHolderFilter@695f382c, org.springframework.security.web.header.HeaderWriterFilter@5d8de155, org.springframework.security.web.authentication.logout.LogoutFilter@7ee6d5fd, com.example.ec.security.JwtTokenFilter@6e620fa9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4b2ca159, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d47b761, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2cee1bcf, org.springframework.security.web.session.SessionManagementFilter@7a174e4b, org.springframework.security.web.access.ExceptionTranslationFilter@67c2ff5d, org.springframework.security.web.access.intercept.AuthorizationFilter@40af3dd8]
2023-01-29T02:23:00.600-03:00  INFO 19280 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52758 (http) with context path ''
2023-01-29T02:23:00.608-03:00  INFO 19280 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.173 seconds (process running for 6.105)
2023-01-29T02:23:00.781-03:00  INFO 19280 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:23:00.782-03:00  INFO 19280 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:23:00.783-03:00  INFO 19280 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:23:00.791-03:00  INFO 19280 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:23:00.815-03:00  INFO 19280 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTc4MCwiZXhwIjoxNjc0OTcwMzgwfQ.4WlyeuneyAH4RRNo_R-YEQk6r9Gk1NxLKTbHJPskb3w]
2023-01-29T02:23:00.882-03:00  INFO 19280 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:23:00.887-03:00  INFO 19280 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTc4MCwiZXhwIjoxNjc0OTcwMzgwfQ.4WlyeuneyAH4RRNo_R-YEQk6r9Gk1NxLKTbHJPskb3w]
2023-01-29T02:23:00.938-03:00  INFO 19280 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:23:00.940-03:00  INFO 19280 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:23:00.942-03:00  INFO 19280 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:24:39.429-03:00  INFO 18032 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 18032 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:24:39.430-03:00 DEBUG 18032 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:24:39.431-03:00  INFO 18032 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:24:40.085-03:00  INFO 18032 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:24:40.147-03:00  INFO 18032 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2023-01-29T02:24:40.620-03:00  INFO 18032 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:24:40.773-03:00  INFO 18032 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:23feea6d-a492-40ed-afa1-d78db233466d user=SA
2023-01-29T02:24:40.775-03:00  INFO 18032 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:24:40.913-03:00  INFO 18032 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:24:40.967-03:00  INFO 18032 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:24:41.001-03:00  WARN 18032 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:24:41.113-03:00  INFO 18032 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:24:41.697-03:00  INFO 18032 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:24:41.704-03:00  INFO 18032 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:24:41.720-03:00  INFO 18032 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:24:42.349-03:00  WARN 18032 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:24:43.282-03:00  INFO 18032 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@178f5b5b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@47baf547, org.springframework.security.web.context.SecurityContextHolderFilter@4d62bb8b, org.springframework.security.web.header.HeaderWriterFilter@437a4e61, org.springframework.security.web.authentication.logout.LogoutFilter@5c21b22e, com.example.ec.security.JwtTokenFilter@fffb4a8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1d642682, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6afdb486, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5dc90de7, org.springframework.security.web.session.SessionManagementFilter@28d2afd8, org.springframework.security.web.access.ExceptionTranslationFilter@542759f, org.springframework.security.web.access.intercept.AuthorizationFilter@33ac7934]
2023-01-29T02:24:43.723-03:00  INFO 18032 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.498 seconds (process running for 5.796)
2023-01-29T02:24:43.746-03:00  INFO 18032 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:24:43.752-03:00  INFO 18032 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:24:43.875-03:00  INFO 18032 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:24:43.881-03:00  INFO 18032 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:24:43.892-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:24:43.923-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:24:43.928-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:24:43.936-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:24:43.951-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:24:43.962-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:24:43.969-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:24:43.972-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:24:43.978-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:24:43.981-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:24:43.981-03:00 DEBUG 18032 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:24:43.982-03:00 DEBUG 18032 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:24:43.983-03:00 DEBUG 18032 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:24:43.983-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:24:43.989-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:24:44.133-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:24:44.139-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:24:44.146-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:24:44.149-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:24:44.152-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:24:44.152-03:00 DEBUG 18032 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:24:44.152-03:00 DEBUG 18032 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:24:44.155-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:24:44.157-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:24:44.204-03:00  INFO 18032 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:24:44.206-03:00  INFO 18032 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:24:44.208-03:00  INFO 18032 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:24:44.212-03:00  INFO 18032 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:24:44.215-03:00  INFO 18032 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:24:45.204-03:00  WARN 18032 --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 23505, SQLState: 23505
2023-01-29T02:24:45.204-03:00 ERROR 18032 --- [main] o.h.engine.jdbc.spi.SqlExceptionHelper   : Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.SECURITY_USER(ID) ( /* key:1 */ CAST(1 AS BIGINT), 'admin', '$2a$12$ZhGS.zcWt1gnZ9xRNp7inOvo5hIT0ngN7N.pN939cShxKvaQYHnnu', 'Administrator', 'Adminstrator')"; SQL statement:
insert into security_user (id, first_name, last_name, password, username) values (default, ?, ?, ?, ?) [23505-214]
2023-01-29T02:24:45.351-03:00  INFO 18032 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:24:45.361-03:00  INFO 18032 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:24:45.383-03:00  INFO 18032 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 18032 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:24:45.384-03:00 DEBUG 18032 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:24:45.384-03:00  INFO 18032 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:24:45.551-03:00  INFO 18032 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:24:45.563-03:00  INFO 18032 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T02:24:45.731-03:00  INFO 18032 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:24:45.739-03:00  INFO 18032 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:24:45.739-03:00  INFO 18032 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:24:45.804-03:00  INFO 18032 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:24:45.805-03:00  INFO 18032 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 420 ms
2023-01-29T02:24:45.876-03:00  INFO 18032 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:24:45.881-03:00  INFO 18032 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:4813bd68-a294-4596-9be1-e3103798bb30 user=SA
2023-01-29T02:24:45.882-03:00  INFO 18032 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:24:45.921-03:00  INFO 18032 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:24:45.924-03:00  WARN 18032 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:24:45.927-03:00  INFO 18032 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:24:45.987-03:00  INFO 18032 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:24:45.988-03:00  INFO 18032 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:24:45.991-03:00  INFO 18032 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:24:46.102-03:00  WARN 18032 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:24:46.964-03:00  INFO 18032 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@51edc97d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5837b801, org.springframework.security.web.context.SecurityContextHolderFilter@182934f2, org.springframework.security.web.header.HeaderWriterFilter@1be7b7de, org.springframework.security.web.authentication.logout.LogoutFilter@2ed4e0e9, com.example.ec.security.JwtTokenFilter@2f1e3e1c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c92af74, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4aedac7f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@31f151ff, org.springframework.security.web.session.SessionManagementFilter@5b0ddbcf, org.springframework.security.web.access.ExceptionTranslationFilter@7ff167c4, org.springframework.security.web.access.intercept.AuthorizationFilter@706dd38b]
2023-01-29T02:24:47.206-03:00  INFO 18032 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52809 (http) with context path ''
2023-01-29T02:24:47.210-03:00  INFO 18032 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.845 seconds (process running for 9.284)
2023-01-29T02:24:47.341-03:00  INFO 18032 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:24:47.342-03:00  INFO 18032 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:24:47.343-03:00  INFO 18032 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:24:47.350-03:00  INFO 18032 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:47.351-03:00  INFO 18032 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:24:47.373-03:00  INFO 18032 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:24:47.436-03:00  INFO 18032 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:47.437-03:00  INFO 18032 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:24:47.437-03:00  INFO 18032 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:24:47.446-03:00  INFO 18032 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:24:47.448-03:00  INFO 18032 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:24:47.477-03:00  INFO 18032 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:47.493-03:00  INFO 18032 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTg4NywiZXhwIjoxNjc0OTcwNDg3fQ.GsAGV2b9i35UMlNIBRdu2onJzs9P1JuKXJeJSrYhvpE]
2023-01-29T02:24:47.503-03:00  INFO 18032 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:24:47.515-03:00  INFO 18032 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:47.515-03:00  INFO 18032 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:24:47.520-03:00  INFO 18032 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:24:47.547-03:00  INFO 18032 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:47.550-03:00  INFO 18032 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTg4NywiZXhwIjoxNjc0OTcwNDg3fQ.GsAGV2b9i35UMlNIBRdu2onJzs9P1JuKXJeJSrYhvpE]
2023-01-29T02:24:47.582-03:00  INFO 18032 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:24:47.593-03:00  INFO 18032 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:47.597-03:00  INFO 18032 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTg4NywiZXhwIjoxNjc0OTcwNDg3fQ.GsAGV2b9i35UMlNIBRdu2onJzs9P1JuKXJeJSrYhvpE]
2023-01-29T02:24:47.601-03:00  INFO 18032 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:24:47.609-03:00  INFO 18032 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:47.609-03:00  INFO 18032 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:24:47.611-03:00  INFO 18032 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:24:47.624-03:00  INFO 18032 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:47.628-03:00  INFO 18032 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTg4NywiZXhwIjoxNjc0OTcwNDg3fQ.GsAGV2b9i35UMlNIBRdu2onJzs9P1JuKXJeJSrYhvpE]
2023-01-29T02:24:47.633-03:00  INFO 18032 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:24:47.642-03:00  INFO 18032 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:47.645-03:00  INFO 18032 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTg4NywiZXhwIjoxNjc0OTcwNDg3fQ.GsAGV2b9i35UMlNIBRdu2onJzs9P1JuKXJeJSrYhvpE]
2023-01-29T02:24:47.647-03:00  INFO 18032 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:24:47.653-03:00  INFO 18032 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:24:47.654-03:00  INFO 18032 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:24:47.668-03:00  INFO 18032 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 18032 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:24:47.668-03:00 DEBUG 18032 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:24:47.668-03:00  INFO 18032 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:24:47.809-03:00  INFO 18032 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:24:47.819-03:00  INFO 18032 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T02:24:47.888-03:00  INFO 18032 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:24:47.889-03:00  INFO 18032 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:24:47.889-03:00  INFO 18032 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:24:47.913-03:00  INFO 18032 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:24:47.913-03:00  INFO 18032 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 243 ms
2023-01-29T02:24:47.968-03:00  INFO 18032 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:24:48.000-03:00  INFO 18032 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:08538275-445d-4113-9390-c8a4fac2abf2 user=SA
2023-01-29T02:24:48.000-03:00  INFO 18032 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:24:48.024-03:00  INFO 18032 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:24:48.028-03:00  WARN 18032 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:24:48.032-03:00  INFO 18032 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:24:48.085-03:00  INFO 18032 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:24:48.085-03:00  INFO 18032 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:24:48.096-03:00  INFO 18032 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:24:48.210-03:00  WARN 18032 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:24:49.500-03:00  INFO 18032 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@58bb50f9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@43eb44f4, org.springframework.security.web.context.SecurityContextHolderFilter@1e9bc8, org.springframework.security.web.header.HeaderWriterFilter@46775310, org.springframework.security.web.authentication.logout.LogoutFilter@726d34de, com.example.ec.security.JwtTokenFilter@69d142f6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@28b992e0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@542abb34, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@555856fa, org.springframework.security.web.session.SessionManagementFilter@3dddef98, org.springframework.security.web.access.ExceptionTranslationFilter@5b7e6e2d, org.springframework.security.web.access.intercept.AuthorizationFilter@17556c0a]
2023-01-29T02:24:49.629-03:00  INFO 18032 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52816 (http) with context path ''
2023-01-29T02:24:49.632-03:00  INFO 18032 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.976 seconds (process running for 11.707)
2023-01-29T02:24:49.641-03:00  INFO 18032 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:24:49.641-03:00  INFO 18032 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:24:49.641-03:00  INFO 18032 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2023-01-29T02:24:49.642-03:00  INFO 18032 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:49.646-03:00  INFO 18032 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTg4OSwiZXhwIjoxNjc0OTcwNDg5fQ.urEVaKobPUqnekYQAYx8zesaVyZ3LOj4zBowHBXjm9Y]
2023-01-29T02:24:49.655-03:00  INFO 18032 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:49.658-03:00  INFO 18032 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTg4OSwiZXhwIjoxNjc0OTcwNDg5fQ.urEVaKobPUqnekYQAYx8zesaVyZ3LOj4zBowHBXjm9Y]
2023-01-29T02:24:49.667-03:00  INFO 18032 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:49.667-03:00  INFO 18032 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:24:49.670-03:00 ERROR 18032 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:24:49.672-03:00  INFO 18032 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:49.672-03:00  INFO 18032 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:24:49.679-03:00  INFO 18032 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:49.681-03:00  INFO 18032 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5ODg5LCJleHAiOjE2NzQ5NzA0ODl9.p2Cvo1PTj7jSBF80MpptKqZrw9ioPUfDJTjpm-MaqSA]
2023-01-29T02:24:49.692-03:00  INFO 18032 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:24:49.695-03:00  INFO 18032 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5ODg5LCJleHAiOjE2NzQ5NzA0ODl9.p2Cvo1PTj7jSBF80MpptKqZrw9ioPUfDJTjpm-MaqSA]
2023-01-29T02:24:49.780-03:00  INFO 18032 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:24:49.781-03:00  INFO 18032 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:24:49.882-03:00  INFO 18032 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:24:49.896-03:00  INFO 18032 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:24:49.896-03:00  INFO 18032 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:24:49.986-03:00  INFO 18032 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:24:50.010-03:00  INFO 18032 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:24:50.010-03:00  INFO 18032 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:24:50.077-03:00  INFO 18032 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:25:19.521-03:00  INFO 16556 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 16556 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:25:19.522-03:00 DEBUG 16556 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:25:19.523-03:00  INFO 16556 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:25:20.223-03:00  INFO 16556 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:25:20.288-03:00  INFO 16556 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 58 ms. Found 5 JPA repository interfaces.
2023-01-29T02:25:20.821-03:00  INFO 16556 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:25:20.973-03:00  INFO 16556 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:bcf778a0-dc8f-4403-bc76-009ff889efe1 user=SA
2023-01-29T02:25:20.975-03:00  INFO 16556 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:25:21.134-03:00  INFO 16556 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:25:21.189-03:00  INFO 16556 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:25:21.228-03:00  WARN 16556 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:25:21.345-03:00  INFO 16556 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:25:21.952-03:00  INFO 16556 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:25:21.958-03:00  INFO 16556 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:25:21.973-03:00  INFO 16556 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:25:22.627-03:00  WARN 16556 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:25:23.598-03:00  INFO 16556 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@324e62e2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1018552d, org.springframework.security.web.context.SecurityContextHolderFilter@7be9582e, org.springframework.security.web.header.HeaderWriterFilter@23657729, org.springframework.security.web.authentication.logout.LogoutFilter@58a93f51, com.example.ec.security.JwtTokenFilter@75eca6d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@125ace20, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7dbc77ca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d2afbdf, org.springframework.security.web.session.SessionManagementFilter@9203db8, org.springframework.security.web.access.ExceptionTranslationFilter@1d642682, org.springframework.security.web.access.intercept.AuthorizationFilter@509e4d53]
2023-01-29T02:25:24.037-03:00  INFO 16556 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.768 seconds (process running for 6.102)
2023-01-29T02:25:24.062-03:00  INFO 16556 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:25:24.067-03:00  INFO 16556 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:25:24.192-03:00  INFO 16556 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:25:24.199-03:00  INFO 16556 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:25:24.210-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:25:24.243-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:25:24.250-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:25:24.261-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:25:24.275-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:25:24.287-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:25:24.295-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:25:24.299-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:25:24.305-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:25:24.308-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:25:24.309-03:00 DEBUG 16556 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:25:24.310-03:00 DEBUG 16556 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:25:24.310-03:00 DEBUG 16556 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:25:24.311-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:25:24.317-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:25:24.469-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:25:24.473-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:25:24.481-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:25:24.483-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:25:24.486-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:25:24.486-03:00 DEBUG 16556 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:25:24.487-03:00 DEBUG 16556 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:25:24.490-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:25:24.492-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:25:24.545-03:00  INFO 16556 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:25:24.547-03:00  INFO 16556 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:25:24.548-03:00  INFO 16556 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:25:24.552-03:00  INFO 16556 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:25:24.554-03:00  INFO 16556 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:25:25.677-03:00  INFO 16556 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:25:25.687-03:00  INFO 16556 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:25:25.709-03:00  INFO 16556 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 16556 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:25:25.709-03:00 DEBUG 16556 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:25:25.709-03:00  INFO 16556 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:25:25.873-03:00  INFO 16556 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:25:25.885-03:00  INFO 16556 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 5 JPA repository interfaces.
2023-01-29T02:25:26.075-03:00  INFO 16556 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:25:26.082-03:00  INFO 16556 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:25:26.082-03:00  INFO 16556 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:25:26.160-03:00  INFO 16556 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:25:26.161-03:00  INFO 16556 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 451 ms
2023-01-29T02:25:26.216-03:00  INFO 16556 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:25:26.219-03:00  INFO 16556 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:ec1b032a-8f26-408e-bcbb-ff1f9756ab2b user=SA
2023-01-29T02:25:26.220-03:00  INFO 16556 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:25:26.253-03:00  INFO 16556 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:25:26.255-03:00  WARN 16556 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:25:26.258-03:00  INFO 16556 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:25:26.316-03:00  INFO 16556 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:25:26.316-03:00  INFO 16556 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:25:26.320-03:00  INFO 16556 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:25:26.449-03:00  WARN 16556 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:25:27.224-03:00  INFO 16556 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@26562718, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1388c465, org.springframework.security.web.context.SecurityContextHolderFilter@73f937d9, org.springframework.security.web.header.HeaderWriterFilter@71da8575, org.springframework.security.web.authentication.logout.LogoutFilter@47ce44ab, com.example.ec.security.JwtTokenFilter@48d1f239, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@65bd41d8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@40699137, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@798e73de, org.springframework.security.web.session.SessionManagementFilter@620bfd8c, org.springframework.security.web.access.ExceptionTranslationFilter@12008a54, org.springframework.security.web.access.intercept.AuthorizationFilter@441eae0b]
2023-01-29T02:25:27.476-03:00  INFO 16556 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52839 (http) with context path ''
2023-01-29T02:25:27.479-03:00  INFO 16556 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.788 seconds (process running for 9.543)
2023-01-29T02:25:27.614-03:00  INFO 16556 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:25:27.615-03:00  INFO 16556 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:25:27.616-03:00  INFO 16556 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:25:27.622-03:00  INFO 16556 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:27.623-03:00  INFO 16556 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:25:27.646-03:00  INFO 16556 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:25:27.708-03:00  INFO 16556 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:27.708-03:00  INFO 16556 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:25:27.709-03:00  INFO 16556 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:25:27.717-03:00  INFO 16556 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:25:27.718-03:00  INFO 16556 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:25:27.742-03:00  INFO 16556 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:27.760-03:00  INFO 16556 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTkyNywiZXhwIjoxNjc0OTcwNTI3fQ.z1VqyMSTouRo_RYSC5cLtc8LUNrLClLYy1TtP5atTxE]
2023-01-29T02:25:27.769-03:00  INFO 16556 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:25:27.778-03:00  INFO 16556 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:27.778-03:00  INFO 16556 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:25:27.784-03:00  INFO 16556 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:25:27.812-03:00  INFO 16556 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:27.815-03:00  INFO 16556 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTkyNywiZXhwIjoxNjc0OTcwNTI3fQ.z1VqyMSTouRo_RYSC5cLtc8LUNrLClLYy1TtP5atTxE]
2023-01-29T02:25:27.848-03:00  INFO 16556 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:25:27.859-03:00  INFO 16556 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:27.863-03:00  INFO 16556 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTkyNywiZXhwIjoxNjc0OTcwNTI3fQ.z1VqyMSTouRo_RYSC5cLtc8LUNrLClLYy1TtP5atTxE]
2023-01-29T02:25:27.868-03:00  INFO 16556 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:25:27.876-03:00  INFO 16556 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:27.876-03:00  INFO 16556 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:25:27.878-03:00  INFO 16556 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:25:27.889-03:00  INFO 16556 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:27.893-03:00  INFO 16556 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTkyNywiZXhwIjoxNjc0OTcwNTI3fQ.z1VqyMSTouRo_RYSC5cLtc8LUNrLClLYy1TtP5atTxE]
2023-01-29T02:25:27.897-03:00  INFO 16556 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:25:27.907-03:00  INFO 16556 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:27.910-03:00  INFO 16556 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTkyNywiZXhwIjoxNjc0OTcwNTI3fQ.z1VqyMSTouRo_RYSC5cLtc8LUNrLClLYy1TtP5atTxE]
2023-01-29T02:25:27.913-03:00  INFO 16556 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:25:27.920-03:00  INFO 16556 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:25:27.921-03:00  INFO 16556 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:25:27.942-03:00  INFO 16556 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 16556 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:25:27.942-03:00 DEBUG 16556 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:25:27.942-03:00  INFO 16556 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:25:28.073-03:00  INFO 16556 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:25:28.083-03:00  INFO 16556 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T02:25:28.144-03:00  INFO 16556 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:25:28.145-03:00  INFO 16556 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:25:28.146-03:00  INFO 16556 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:25:28.169-03:00  INFO 16556 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:25:28.169-03:00  INFO 16556 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 226 ms
2023-01-29T02:25:28.205-03:00  INFO 16556 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:25:28.222-03:00  INFO 16556 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:4cff649e-018c-4f5e-9284-dae8c4005acc user=SA
2023-01-29T02:25:28.222-03:00  INFO 16556 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:25:28.247-03:00  INFO 16556 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:25:28.249-03:00  WARN 16556 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:25:28.252-03:00  INFO 16556 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:25:28.302-03:00  INFO 16556 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:25:28.303-03:00  INFO 16556 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:25:28.306-03:00  INFO 16556 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:25:28.439-03:00  WARN 16556 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:25:29.271-03:00  INFO 16556 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6c40bb07, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@713d2fe8, org.springframework.security.web.context.SecurityContextHolderFilter@2c890ee3, org.springframework.security.web.header.HeaderWriterFilter@18601f1e, org.springframework.security.web.authentication.logout.LogoutFilter@59a8891e, com.example.ec.security.JwtTokenFilter@546c43e0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@62068fa5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7a86e414, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@63d93e91, org.springframework.security.web.session.SessionManagementFilter@4140d677, org.springframework.security.web.access.ExceptionTranslationFilter@24ed4582, org.springframework.security.web.access.intercept.AuthorizationFilter@426ead99]
2023-01-29T02:25:29.370-03:00  INFO 16556 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52844 (http) with context path ''
2023-01-29T02:25:29.373-03:00  INFO 16556 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.45 seconds (process running for 11.437)
2023-01-29T02:25:29.381-03:00  INFO 16556 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:25:29.381-03:00  INFO 16556 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:25:29.382-03:00  INFO 16556 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:25:29.382-03:00  INFO 16556 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:29.385-03:00  INFO 16556 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTkyOSwiZXhwIjoxNjc0OTcwNTI5fQ.RqRZpLRi0iMDGQaArR2nzik0kuL6y4ihWXZocx1hpOE]
2023-01-29T02:25:29.395-03:00  INFO 16556 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:29.397-03:00  INFO 16556 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk2OTkyOSwiZXhwIjoxNjc0OTcwNTI5fQ.RqRZpLRi0iMDGQaArR2nzik0kuL6y4ihWXZocx1hpOE]
2023-01-29T02:25:29.407-03:00  INFO 16556 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:29.407-03:00  INFO 16556 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:25:29.410-03:00 ERROR 16556 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:25:29.412-03:00  INFO 16556 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:29.413-03:00  INFO 16556 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:25:29.419-03:00  INFO 16556 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:29.422-03:00  INFO 16556 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5OTI5LCJleHAiOjE2NzQ5NzA1Mjl9.xz1AUkQiA1SylGSG6DAqJkAkyUsH9Gpbq0XTI3y7fNw]
2023-01-29T02:25:29.438-03:00  INFO 16556 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:25:29.440-03:00  INFO 16556 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5OTI5LCJleHAiOjE2NzQ5NzA1Mjl9.xz1AUkQiA1SylGSG6DAqJkAkyUsH9Gpbq0XTI3y7fNw]
2023-01-29T02:25:29.488-03:00  INFO 16556 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:25:29.490-03:00  INFO 16556 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:25:29.530-03:00  INFO 16556 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:25:29.544-03:00  INFO 16556 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:25:29.544-03:00  INFO 16556 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:25:29.577-03:00  INFO 16556 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:25:29.612-03:00  INFO 16556 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:25:29.612-03:00  INFO 16556 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:25:29.642-03:00  INFO 16556 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:26:05.677-03:00  INFO 14544 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 14544 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:26:05.677-03:00 DEBUG 14544 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:26:05.678-03:00  INFO 14544 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:26:06.350-03:00  INFO 14544 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:26:06.409-03:00  INFO 14544 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 5 JPA repository interfaces.
2023-01-29T02:26:07.430-03:00  INFO 14544 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:26:07.439-03:00  INFO 14544 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:26:07.440-03:00  INFO 14544 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:26:07.538-03:00  INFO 14544 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:26:07.539-03:00  INFO 14544 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1845 ms
2023-01-29T02:26:07.642-03:00  INFO 14544 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:26:07.787-03:00  INFO 14544 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:2f113646-778f-459f-950a-8e975d0c9495 user=SA
2023-01-29T02:26:07.788-03:00  INFO 14544 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:26:07.927-03:00  INFO 14544 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:26:07.974-03:00  INFO 14544 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:26:08.008-03:00  WARN 14544 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:26:08.140-03:00  INFO 14544 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:26:08.718-03:00  INFO 14544 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:26:08.724-03:00  INFO 14544 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:26:08.737-03:00  INFO 14544 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:26:09.311-03:00  WARN 14544 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:26:10.183-03:00  INFO 14544 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@421c4c3e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@63236968, org.springframework.security.web.context.SecurityContextHolderFilter@138d85f8, org.springframework.security.web.header.HeaderWriterFilter@3fe70a2d, org.springframework.security.web.authentication.logout.LogoutFilter@4b2ca159, com.example.ec.security.JwtTokenFilter@4f6f7a86, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2e29a7d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4af8ff3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6ed78a5e, org.springframework.security.web.session.SessionManagementFilter@27115d45, org.springframework.security.web.access.ExceptionTranslationFilter@54aacbc7, org.springframework.security.web.access.intercept.AuthorizationFilter@19070326]
2023-01-29T02:26:10.684-03:00  INFO 14544 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52869 (http) with context path ''
2023-01-29T02:26:10.692-03:00  INFO 14544 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.202 seconds (process running for 6.149)
2023-01-29T02:26:10.898-03:00  INFO 14544 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:26:10.899-03:00  INFO 14544 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:26:10.900-03:00  INFO 14544 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:26:10.909-03:00  INFO 14544 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:26:10.936-03:00  INFO 14544 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTY5OTcwLCJleHAiOjE2NzQ5NzA1NzB9.u9R5-Rw1FKlvR3ZafGxH6naf1pg0GskDhxILL2pzGgk]
2023-01-29T02:26:11.051-03:00  INFO 14544 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:26:11.054-03:00  INFO 14544 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:26:11.056-03:00  INFO 14544 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:26:55.612-03:00  INFO 23412 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 23412 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:26:55.613-03:00 DEBUG 23412 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:26:55.614-03:00  INFO 23412 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:26:56.282-03:00  INFO 23412 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:26:56.343-03:00  INFO 23412 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 53 ms. Found 5 JPA repository interfaces.
2023-01-29T02:26:56.790-03:00  INFO 23412 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:26:56.942-03:00  INFO 23412 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:c65b8436-c254-4885-abf5-e59a58ded3f4 user=SA
2023-01-29T02:26:56.943-03:00  INFO 23412 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:26:57.075-03:00  INFO 23412 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:26:57.130-03:00  INFO 23412 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:26:57.169-03:00  WARN 23412 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:26:57.276-03:00  INFO 23412 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:26:57.891-03:00  INFO 23412 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:26:57.899-03:00  INFO 23412 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:26:57.913-03:00  INFO 23412 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:26:58.553-03:00  WARN 23412 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:26:59.459-03:00  INFO 23412 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@56589f00, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ce4b0a8, org.springframework.security.web.context.SecurityContextHolderFilter@5bbf8daa, org.springframework.security.web.header.HeaderWriterFilter@6afdb486, org.springframework.security.web.authentication.logout.LogoutFilter@79a12552, com.example.ec.security.JwtTokenFilter@738955e6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@74474fc0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7cd239f6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@624baf71, org.springframework.security.web.session.SessionManagementFilter@1b5e6983, org.springframework.security.web.access.ExceptionTranslationFilter@c8e99, org.springframework.security.web.access.intercept.AuthorizationFilter@394a7390]
2023-01-29T02:26:59.901-03:00  INFO 23412 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.487 seconds (process running for 5.773)
2023-01-29T02:26:59.930-03:00  INFO 23412 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:26:59.937-03:00  INFO 23412 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:27:00.074-03:00  INFO 23412 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:27:00.080-03:00  INFO 23412 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:27:00.091-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:27:00.121-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:27:00.127-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:27:00.137-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:27:00.150-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:27:00.160-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:27:00.167-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:27:00.170-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:27:00.175-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:27:00.178-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:27:00.178-03:00 DEBUG 23412 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:27:00.179-03:00 DEBUG 23412 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:27:00.180-03:00 DEBUG 23412 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:27:00.181-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:27:00.187-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:27:00.336-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:27:00.341-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:27:00.348-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:27:00.351-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:27:00.354-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:27:00.355-03:00 DEBUG 23412 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:27:00.355-03:00 DEBUG 23412 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:27:00.359-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:27:00.361-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:27:00.412-03:00  INFO 23412 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:27:00.415-03:00  INFO 23412 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:27:00.416-03:00  INFO 23412 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:27:00.421-03:00  INFO 23412 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:27:00.424-03:00  INFO 23412 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:27:01.535-03:00  INFO 23412 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:27:01.546-03:00  INFO 23412 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:27:01.570-03:00  INFO 23412 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 23412 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:27:01.570-03:00 DEBUG 23412 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:27:01.570-03:00  INFO 23412 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:27:01.737-03:00  INFO 23412 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:27:01.747-03:00  INFO 23412 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T02:27:01.928-03:00  INFO 23412 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:27:01.936-03:00  INFO 23412 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:27:01.936-03:00  INFO 23412 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:27:02.004-03:00  INFO 23412 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:27:02.005-03:00  INFO 23412 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 433 ms
2023-01-29T02:27:02.069-03:00  INFO 23412 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:27:02.072-03:00  INFO 23412 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:8e3ff0f2-f8cf-4610-803f-f345b80ae9be user=SA
2023-01-29T02:27:02.072-03:00  INFO 23412 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:27:02.104-03:00  INFO 23412 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:27:02.106-03:00  WARN 23412 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:27:02.109-03:00  INFO 23412 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:27:02.160-03:00  INFO 23412 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:27:02.160-03:00  INFO 23412 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:27:02.164-03:00  INFO 23412 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:27:02.278-03:00  WARN 23412 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:27:03.193-03:00  INFO 23412 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@fbd9b1f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7f85482c, org.springframework.security.web.context.SecurityContextHolderFilter@6ef7e510, org.springframework.security.web.header.HeaderWriterFilter@48d1f239, org.springframework.security.web.authentication.logout.LogoutFilter@279afa4e, com.example.ec.security.JwtTokenFilter@56e0e953, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b89bf47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7c8ec235, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5ace2ce3, org.springframework.security.web.session.SessionManagementFilter@798e73de, org.springframework.security.web.access.ExceptionTranslationFilter@1388c465, org.springframework.security.web.access.intercept.AuthorizationFilter@5b0af511]
2023-01-29T02:27:03.456-03:00  INFO 23412 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52899 (http) with context path ''
2023-01-29T02:27:03.460-03:00  INFO 23412 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.91 seconds (process running for 9.332)
2023-01-29T02:27:03.594-03:00  INFO 23412 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:27:03.595-03:00  INFO 23412 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:27:03.596-03:00  INFO 23412 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:27:03.603-03:00  INFO 23412 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:03.604-03:00  INFO 23412 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:27:03.624-03:00  INFO 23412 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:27:03.685-03:00  INFO 23412 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:03.685-03:00  INFO 23412 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:27:03.686-03:00  INFO 23412 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:27:03.695-03:00  INFO 23412 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:27:03.696-03:00  INFO 23412 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:27:03.721-03:00  INFO 23412 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:03.738-03:00  INFO 23412 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDAyMywiZXhwIjoxNjc0OTcwNjIzfQ.0ol85rh_4-abyQS9u1X1IqL3nygiNQ5xHVe82jM2ryA]
2023-01-29T02:27:03.747-03:00  INFO 23412 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:27:03.760-03:00  INFO 23412 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:03.760-03:00  INFO 23412 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:27:03.765-03:00  INFO 23412 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:27:03.791-03:00  INFO 23412 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:03.794-03:00  INFO 23412 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDAyMywiZXhwIjoxNjc0OTcwNjIzfQ.0ol85rh_4-abyQS9u1X1IqL3nygiNQ5xHVe82jM2ryA]
2023-01-29T02:27:03.827-03:00  INFO 23412 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:27:03.837-03:00  INFO 23412 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:03.839-03:00  INFO 23412 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDAyMywiZXhwIjoxNjc0OTcwNjIzfQ.0ol85rh_4-abyQS9u1X1IqL3nygiNQ5xHVe82jM2ryA]
2023-01-29T02:27:03.842-03:00  INFO 23412 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:27:03.850-03:00  INFO 23412 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:03.850-03:00  INFO 23412 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:27:03.851-03:00  INFO 23412 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:27:03.860-03:00  INFO 23412 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:03.864-03:00  INFO 23412 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDAyMywiZXhwIjoxNjc0OTcwNjIzfQ.0ol85rh_4-abyQS9u1X1IqL3nygiNQ5xHVe82jM2ryA]
2023-01-29T02:27:03.868-03:00  INFO 23412 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:27:03.877-03:00  INFO 23412 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:03.880-03:00  INFO 23412 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDAyMywiZXhwIjoxNjc0OTcwNjIzfQ.0ol85rh_4-abyQS9u1X1IqL3nygiNQ5xHVe82jM2ryA]
2023-01-29T02:27:03.883-03:00  INFO 23412 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:27:03.888-03:00  INFO 23412 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:27:03.889-03:00  INFO 23412 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:27:03.903-03:00  INFO 23412 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 23412 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:27:03.903-03:00 DEBUG 23412 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:27:03.903-03:00  INFO 23412 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:27:04.047-03:00  INFO 23412 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:27:04.057-03:00  INFO 23412 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T02:27:04.127-03:00  INFO 23412 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:27:04.128-03:00  INFO 23412 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:27:04.128-03:00  INFO 23412 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:27:04.151-03:00  INFO 23412 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:27:04.151-03:00  INFO 23412 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 247 ms
2023-01-29T02:27:04.198-03:00  INFO 23412 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:27:04.219-03:00  INFO 23412 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:2f9a7506-c8f9-4eff-9e7e-f5bd6313f3cb user=SA
2023-01-29T02:27:04.220-03:00  INFO 23412 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:27:04.245-03:00  INFO 23412 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:27:04.248-03:00  WARN 23412 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:27:04.250-03:00  INFO 23412 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:27:04.296-03:00  INFO 23412 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:27:04.297-03:00  INFO 23412 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:27:04.300-03:00  INFO 23412 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:27:04.395-03:00  WARN 23412 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:27:05.578-03:00  INFO 23412 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5ad59bed, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@51a94f7f, org.springframework.security.web.context.SecurityContextHolderFilter@63d93e91, org.springframework.security.web.header.HeaderWriterFilter@713d2fe8, org.springframework.security.web.authentication.logout.LogoutFilter@e30b8f0, com.example.ec.security.JwtTokenFilter@5028cec0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@a28296e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@127205ac, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3a8c7347, org.springframework.security.web.session.SessionManagementFilter@546c43e0, org.springframework.security.web.access.ExceptionTranslationFilter@6c40bb07, org.springframework.security.web.access.intercept.AuthorizationFilter@47c5b16b]
2023-01-29T02:27:05.689-03:00  INFO 23412 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52903 (http) with context path ''
2023-01-29T02:27:05.691-03:00  INFO 23412 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.8 seconds (process running for 11.564)
2023-01-29T02:27:05.701-03:00  INFO 23412 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:27:05.701-03:00  INFO 23412 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:27:05.702-03:00  INFO 23412 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:27:05.703-03:00  INFO 23412 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:05.706-03:00  INFO 23412 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwMDI1LCJleHAiOjE2NzQ5NzA2MjV9.C_S-Qdwnszo1r1QxivUui7gHBDgt7Xl5KD94RZwE3v8]
2023-01-29T02:27:05.714-03:00 ERROR 23412 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.RuntimeException: User already exists] with root cause

java.lang.RuntimeException: User already exists
	at com.example.ec.web.UserController.lambda$signup$1(UserController.java:35)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.signup(UserController.java:35)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:199)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.signup(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:27:05.719-03:00  INFO 23412 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:05.723-03:00  INFO 23412 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwMDI1LCJleHAiOjE2NzQ5NzA2MjV9.C_S-Qdwnszo1r1QxivUui7gHBDgt7Xl5KD94RZwE3v8]
2023-01-29T02:27:05.739-03:00  INFO 23412 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:05.740-03:00  INFO 23412 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:27:05.744-03:00 ERROR 23412 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:27:05.744-03:00  INFO 23412 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:05.744-03:00  INFO 23412 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:27:05.752-03:00  INFO 23412 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:05.755-03:00  INFO 23412 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwMDI1LCJleHAiOjE2NzQ5NzA2MjV9.C_S-Qdwnszo1r1QxivUui7gHBDgt7Xl5KD94RZwE3v8]
2023-01-29T02:27:05.764-03:00  INFO 23412 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:05.768-03:00  INFO 23412 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwMDI1LCJleHAiOjE2NzQ5NzA2MjV9.C_S-Qdwnszo1r1QxivUui7gHBDgt7Xl5KD94RZwE3v8]
2023-01-29T02:27:05.830-03:00  INFO 23412 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:27:05.831-03:00  INFO 23412 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:27:05.885-03:00  INFO 23412 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:27:05.913-03:00  INFO 23412 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:27:05.913-03:00  INFO 23412 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:27:05.959-03:00  INFO 23412 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:27:05.988-03:00  INFO 23412 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:27:05.988-03:00  INFO 23412 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:27:06.026-03:00  INFO 23412 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:27:24.820-03:00  INFO 17600 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 17600 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:27:24.820-03:00 DEBUG 17600 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:27:24.821-03:00  INFO 17600 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:27:25.502-03:00  INFO 17600 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:27:25.561-03:00  INFO 17600 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2023-01-29T02:27:26.083-03:00  INFO 17600 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:27:26.230-03:00  INFO 17600 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:e0ac5239-d145-46a5-8bdd-f4ff25ffcf41 user=SA
2023-01-29T02:27:26.231-03:00  INFO 17600 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:27:26.377-03:00  INFO 17600 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:27:26.421-03:00  INFO 17600 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:27:26.458-03:00  WARN 17600 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:27:26.563-03:00  INFO 17600 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:27:27.161-03:00  INFO 17600 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:27:27.168-03:00  INFO 17600 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:27:27.184-03:00  INFO 17600 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:27:27.868-03:00  WARN 17600 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:27:28.715-03:00  INFO 17600 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@20f94e9a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3f213e97, org.springframework.security.web.context.SecurityContextHolderFilter@fffb4a8, org.springframework.security.web.header.HeaderWriterFilter@125ace20, org.springframework.security.web.authentication.logout.LogoutFilter@54151d07, com.example.ec.security.JwtTokenFilter@693c7741, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3071d086, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@20711b02, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7d3b4646, org.springframework.security.web.session.SessionManagementFilter@6f87bc6c, org.springframework.security.web.access.ExceptionTranslationFilter@33c5e52f, org.springframework.security.web.access.intercept.AuthorizationFilter@4a1abba1]
2023-01-29T02:27:29.128-03:00  INFO 17600 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.519 seconds (process running for 5.869)
2023-01-29T02:27:29.151-03:00  INFO 17600 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:27:29.158-03:00  INFO 17600 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:27:29.293-03:00  INFO 17600 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:27:29.298-03:00  INFO 17600 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:27:29.308-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:27:29.341-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:27:29.347-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:27:29.356-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:27:29.376-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:27:29.389-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:27:29.398-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:27:29.402-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:27:29.408-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:27:29.412-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:27:29.413-03:00 DEBUG 17600 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:27:29.414-03:00 DEBUG 17600 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:27:29.414-03:00 DEBUG 17600 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:27:29.415-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:27:29.421-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:27:29.582-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:27:29.587-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:27:29.595-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:27:29.598-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:27:29.601-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:27:29.601-03:00 DEBUG 17600 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:27:29.601-03:00 DEBUG 17600 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:27:29.604-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:27:29.606-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:27:29.655-03:00  INFO 17600 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:27:29.658-03:00  INFO 17600 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:27:29.660-03:00  INFO 17600 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:27:29.664-03:00  INFO 17600 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:27:29.667-03:00  INFO 17600 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:27:30.785-03:00  INFO 17600 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:27:30.794-03:00  INFO 17600 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:27:30.818-03:00  INFO 17600 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 17600 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:27:30.818-03:00 DEBUG 17600 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:27:30.818-03:00  INFO 17600 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:27:30.976-03:00  INFO 17600 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:27:30.987-03:00  INFO 17600 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T02:27:31.160-03:00  INFO 17600 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:27:31.168-03:00  INFO 17600 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:27:31.168-03:00  INFO 17600 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:27:31.233-03:00  INFO 17600 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:27:31.233-03:00  INFO 17600 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 412 ms
2023-01-29T02:27:31.285-03:00  INFO 17600 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:27:31.288-03:00  INFO 17600 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:d1390c4a-179a-4cf0-8357-5b2c5af234a5 user=SA
2023-01-29T02:27:31.289-03:00  INFO 17600 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:27:31.319-03:00  INFO 17600 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:27:31.321-03:00  WARN 17600 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:27:31.324-03:00  INFO 17600 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:27:31.374-03:00  INFO 17600 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:27:31.374-03:00  INFO 17600 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:27:31.378-03:00  INFO 17600 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:27:31.502-03:00  WARN 17600 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:27:32.173-03:00  INFO 17600 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@16209621, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6e9e4332, org.springframework.security.web.context.SecurityContextHolderFilter@fbd9b1f, org.springframework.security.web.header.HeaderWriterFilter@519f1a7d, org.springframework.security.web.authentication.logout.LogoutFilter@39c821c6, com.example.ec.security.JwtTokenFilter@4c32d208, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7f85482c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@56e0e953, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@61df07d0, org.springframework.security.web.session.SessionManagementFilter@5b0af511, org.springframework.security.web.access.ExceptionTranslationFilter@279afa4e, org.springframework.security.web.access.intercept.AuthorizationFilter@3da20c42]
2023-01-29T02:27:32.599-03:00  INFO 17600 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52919 (http) with context path ''
2023-01-29T02:27:32.603-03:00  INFO 17600 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.805 seconds (process running for 9.343)
2023-01-29T02:27:32.760-03:00  INFO 17600 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:27:32.761-03:00  INFO 17600 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:27:32.762-03:00  INFO 17600 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:27:32.769-03:00  INFO 17600 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:32.770-03:00  INFO 17600 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:27:32.794-03:00  INFO 17600 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:27:32.863-03:00  INFO 17600 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:32.863-03:00  INFO 17600 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:27:32.864-03:00  INFO 17600 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:27:32.874-03:00  INFO 17600 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:27:32.876-03:00  INFO 17600 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:27:32.897-03:00  INFO 17600 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:32.913-03:00  INFO 17600 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDA1MiwiZXhwIjoxNjc0OTcwNjUyfQ.X51FSdq81WaO6pxJuitEcDEkaYTthJUGiPGL-t9cWEQ]
2023-01-29T02:27:32.922-03:00  INFO 17600 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:27:32.931-03:00  INFO 17600 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:32.931-03:00  INFO 17600 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:27:32.936-03:00  INFO 17600 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:27:32.965-03:00  INFO 17600 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:32.968-03:00  INFO 17600 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDA1MiwiZXhwIjoxNjc0OTcwNjUyfQ.X51FSdq81WaO6pxJuitEcDEkaYTthJUGiPGL-t9cWEQ]
2023-01-29T02:27:33.005-03:00  INFO 17600 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:27:33.014-03:00  INFO 17600 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:33.018-03:00  INFO 17600 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDA1MywiZXhwIjoxNjc0OTcwNjUzfQ.4otNTfQpb6_WgjDt64GqCC5YmWr6W-k3o_1TcPLpqmw]
2023-01-29T02:27:33.021-03:00  INFO 17600 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:27:33.027-03:00  INFO 17600 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:33.027-03:00  INFO 17600 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:27:33.029-03:00  INFO 17600 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:27:33.040-03:00  INFO 17600 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:33.043-03:00  INFO 17600 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDA1MywiZXhwIjoxNjc0OTcwNjUzfQ.4otNTfQpb6_WgjDt64GqCC5YmWr6W-k3o_1TcPLpqmw]
2023-01-29T02:27:33.047-03:00  INFO 17600 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:27:33.056-03:00  INFO 17600 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:33.059-03:00  INFO 17600 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDA1MywiZXhwIjoxNjc0OTcwNjUzfQ.4otNTfQpb6_WgjDt64GqCC5YmWr6W-k3o_1TcPLpqmw]
2023-01-29T02:27:33.061-03:00  INFO 17600 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:27:33.067-03:00  INFO 17600 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:27:33.068-03:00  INFO 17600 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:27:33.082-03:00  INFO 17600 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 17600 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:27:33.082-03:00 DEBUG 17600 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:27:33.082-03:00  INFO 17600 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:27:33.248-03:00  INFO 17600 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:27:33.259-03:00  INFO 17600 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T02:27:33.335-03:00  INFO 17600 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:27:33.336-03:00  INFO 17600 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:27:33.337-03:00  INFO 17600 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:27:33.362-03:00  INFO 17600 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:27:33.362-03:00  INFO 17600 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 279 ms
2023-01-29T02:27:33.421-03:00  INFO 17600 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:27:33.433-03:00  INFO 17600 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:f538671f-72bc-47a4-99d3-a21842c3ca77 user=SA
2023-01-29T02:27:33.434-03:00  INFO 17600 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:27:33.459-03:00  INFO 17600 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:27:33.461-03:00  WARN 17600 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:27:33.464-03:00  INFO 17600 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:27:33.507-03:00  INFO 17600 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:27:33.507-03:00  INFO 17600 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:27:33.510-03:00  INFO 17600 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:27:33.613-03:00  WARN 17600 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:27:35.081-03:00  INFO 17600 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@396d21ec, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@61e7d7f2, org.springframework.security.web.context.SecurityContextHolderFilter@35a7c477, org.springframework.security.web.header.HeaderWriterFilter@480f1b59, org.springframework.security.web.authentication.logout.LogoutFilter@dcaa310, com.example.ec.security.JwtTokenFilter@52f1d01b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@591e1df7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@697b105e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@10371dd1, org.springframework.security.web.session.SessionManagementFilter@2a28bf25, org.springframework.security.web.access.ExceptionTranslationFilter@6b00eaae, org.springframework.security.web.access.intercept.AuthorizationFilter@155afbd7]
2023-01-29T02:27:35.217-03:00  INFO 17600 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 52925 (http) with context path ''
2023-01-29T02:27:35.219-03:00  INFO 17600 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 2.149 seconds (process running for 11.96)
2023-01-29T02:27:35.228-03:00  INFO 17600 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:27:35.229-03:00  INFO 17600 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:27:35.229-03:00  INFO 17600 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2023-01-29T02:27:35.230-03:00  INFO 17600 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:35.233-03:00  INFO 17600 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDA1NSwiZXhwIjoxNjc0OTcwNjU1fQ.0vvyhGOxA6xh5k7BPqaYzs9LcGA7zYF4ixjTdI5eOXc]
2023-01-29T02:27:35.243-03:00  INFO 17600 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:35.246-03:00  INFO 17600 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDA1NSwiZXhwIjoxNjc0OTcwNjU1fQ.0vvyhGOxA6xh5k7BPqaYzs9LcGA7zYF4ixjTdI5eOXc]
2023-01-29T02:27:35.254-03:00  INFO 17600 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:35.255-03:00  INFO 17600 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:27:35.259-03:00 ERROR 17600 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:27:35.261-03:00  INFO 17600 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:35.261-03:00  INFO 17600 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:27:35.268-03:00  INFO 17600 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:35.271-03:00  INFO 17600 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwMDU1LCJleHAiOjE2NzQ5NzA2NTV9.J0A_R4foo47clnHMDQFYgiRU4baDGIRAELbocQH1i8I]
2023-01-29T02:27:35.288-03:00  INFO 17600 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:27:35.291-03:00  INFO 17600 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwMDU1LCJleHAiOjE2NzQ5NzA2NTV9.J0A_R4foo47clnHMDQFYgiRU4baDGIRAELbocQH1i8I]
2023-01-29T02:27:35.372-03:00  INFO 17600 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:27:35.373-03:00  INFO 17600 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:27:35.482-03:00  INFO 17600 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:27:35.495-03:00  INFO 17600 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:27:35.496-03:00  INFO 17600 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:27:35.607-03:00  INFO 17600 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:27:35.616-03:00  INFO 17600 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:27:35.617-03:00  INFO 17600 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:27:35.680-03:00  INFO 17600 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:33:24.464-03:00  INFO 3392 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 3392 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:33:24.464-03:00 DEBUG 3392 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:33:24.465-03:00  INFO 3392 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:33:25.140-03:00  INFO 3392 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:33:25.199-03:00  INFO 3392 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2023-01-29T02:33:25.677-03:00  INFO 3392 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:33:25.823-03:00  INFO 3392 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:3f62ba7a-5f40-40c6-bbda-ce956e32d62a user=SA
2023-01-29T02:33:25.823-03:00  INFO 3392 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:33:25.976-03:00  INFO 3392 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:33:26.025-03:00  INFO 3392 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:33:26.063-03:00  WARN 3392 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:33:26.176-03:00  INFO 3392 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:33:26.768-03:00  INFO 3392 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:33:26.775-03:00  INFO 3392 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:33:26.789-03:00  INFO 3392 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:33:27.393-03:00  WARN 3392 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:33:28.426-03:00  INFO 3392 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@31773d5b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5bbf8daa, org.springframework.security.web.context.SecurityContextHolderFilter@542759f, org.springframework.security.web.header.HeaderWriterFilter@44a972b4, org.springframework.security.web.authentication.logout.LogoutFilter@623dc0b8, com.example.ec.security.JwtTokenFilter@33c5e52f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6eb6750f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@13231e7b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@74474fc0, org.springframework.security.web.session.SessionManagementFilter@458500d1, org.springframework.security.web.access.ExceptionTranslationFilter@7e113065, org.springframework.security.web.access.intercept.AuthorizationFilter@68c05c5b]
2023-01-29T02:33:28.870-03:00  INFO 3392 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.608 seconds (process running for 5.924)
2023-01-29T02:33:28.894-03:00  INFO 3392 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:33:28.901-03:00  INFO 3392 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:33:29.031-03:00  INFO 3392 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:33:29.038-03:00  INFO 3392 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:33:29.049-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:33:29.079-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:33:29.083-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:33:29.091-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:33:29.104-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:33:29.115-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:33:29.122-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:33:29.126-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:33:29.131-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:33:29.133-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:33:29.133-03:00 DEBUG 3392 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:33:29.134-03:00 DEBUG 3392 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:33:29.134-03:00 DEBUG 3392 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:33:29.135-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:33:29.141-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:33:29.295-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:33:29.299-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:33:29.307-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:33:29.310-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:33:29.313-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:33:29.314-03:00 DEBUG 3392 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:33:29.314-03:00 DEBUG 3392 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:33:29.316-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:33:29.318-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:33:29.366-03:00  INFO 3392 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:33:29.368-03:00  INFO 3392 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:33:29.370-03:00  INFO 3392 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:33:29.373-03:00  INFO 3392 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:33:29.376-03:00  INFO 3392 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:33:30.510-03:00  INFO 3392 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:33:30.519-03:00  INFO 3392 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:33:30.540-03:00  INFO 3392 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 3392 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:33:30.540-03:00 DEBUG 3392 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:33:30.540-03:00  INFO 3392 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:33:30.701-03:00  INFO 3392 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:33:30.711-03:00  INFO 3392 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T02:33:30.868-03:00  INFO 3392 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:33:30.876-03:00  INFO 3392 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:33:30.876-03:00  INFO 3392 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:33:30.945-03:00  INFO 3392 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:33:30.945-03:00  INFO 3392 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 404 ms
2023-01-29T02:33:31.005-03:00  INFO 3392 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:33:31.008-03:00  INFO 3392 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:2bb919bd-f5f6-4cf0-a33b-095a3030a8bc user=SA
2023-01-29T02:33:31.008-03:00  INFO 3392 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:33:31.040-03:00  INFO 3392 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:33:31.042-03:00  WARN 3392 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:33:31.045-03:00  INFO 3392 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:33:31.093-03:00  INFO 3392 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:33:31.093-03:00  INFO 3392 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:33:31.098-03:00  INFO 3392 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:33:31.217-03:00  WARN 3392 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:33:32.068-03:00  INFO 3392 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@519f1a7d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5b0af511, org.springframework.security.web.context.SecurityContextHolderFilter@48d1f239, org.springframework.security.web.header.HeaderWriterFilter@26562718, org.springframework.security.web.authentication.logout.LogoutFilter@7c8ec235, com.example.ec.security.JwtTokenFilter@fbd9b1f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@798e73de, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6ef7e510, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7f85482c, org.springframework.security.web.session.SessionManagementFilter@1388c465, org.springframework.security.web.access.ExceptionTranslationFilter@441eae0b, org.springframework.security.web.access.intercept.AuthorizationFilter@279afa4e]
2023-01-29T02:33:32.324-03:00  INFO 3392 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53073 (http) with context path ''
2023-01-29T02:33:32.327-03:00  INFO 3392 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.804 seconds (process running for 9.381)
2023-01-29T02:33:32.459-03:00  INFO 3392 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:33:32.460-03:00  INFO 3392 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:33:32.461-03:00  INFO 3392 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:33:32.468-03:00  INFO 3392 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:32.468-03:00  INFO 3392 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:33:32.490-03:00  INFO 3392 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:33:32.551-03:00  INFO 3392 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:32.551-03:00  INFO 3392 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:33:32.552-03:00  INFO 3392 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:33:32.560-03:00  INFO 3392 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:33:32.561-03:00  INFO 3392 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:33:32.587-03:00  INFO 3392 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:32.603-03:00  INFO 3392 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQxMiwiZXhwIjoxNjc0OTcxMDEyfQ.lFzlspIF3NFnM0wXpqlwOaW4iXhUmJBIknhjf7eEzgY]
2023-01-29T02:33:32.611-03:00  INFO 3392 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:33:32.620-03:00  INFO 3392 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:32.620-03:00  INFO 3392 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:33:32.626-03:00  INFO 3392 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:33:32.652-03:00  INFO 3392 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:32.655-03:00  INFO 3392 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQxMiwiZXhwIjoxNjc0OTcxMDEyfQ.lFzlspIF3NFnM0wXpqlwOaW4iXhUmJBIknhjf7eEzgY]
2023-01-29T02:33:32.686-03:00  INFO 3392 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:33:32.696-03:00  INFO 3392 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:32.699-03:00  INFO 3392 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQxMiwiZXhwIjoxNjc0OTcxMDEyfQ.lFzlspIF3NFnM0wXpqlwOaW4iXhUmJBIknhjf7eEzgY]
2023-01-29T02:33:32.702-03:00  INFO 3392 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:33:32.710-03:00  INFO 3392 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:32.710-03:00  INFO 3392 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:33:32.712-03:00  INFO 3392 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:33:32.721-03:00  INFO 3392 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:32.724-03:00  INFO 3392 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQxMiwiZXhwIjoxNjc0OTcxMDEyfQ.lFzlspIF3NFnM0wXpqlwOaW4iXhUmJBIknhjf7eEzgY]
2023-01-29T02:33:32.727-03:00  INFO 3392 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:33:32.736-03:00  INFO 3392 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:32.739-03:00  INFO 3392 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQxMiwiZXhwIjoxNjc0OTcxMDEyfQ.lFzlspIF3NFnM0wXpqlwOaW4iXhUmJBIknhjf7eEzgY]
2023-01-29T02:33:32.742-03:00  INFO 3392 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:33:32.748-03:00  INFO 3392 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:33:32.749-03:00  INFO 3392 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:33:32.763-03:00  INFO 3392 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 3392 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:33:32.764-03:00 DEBUG 3392 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:33:32.764-03:00  INFO 3392 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:33:32.917-03:00  INFO 3392 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:33:32.928-03:00  INFO 3392 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T02:33:33.008-03:00  INFO 3392 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:33:33.009-03:00  INFO 3392 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:33:33.010-03:00  INFO 3392 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:33:33.035-03:00  INFO 3392 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:33:33.035-03:00  INFO 3392 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 270 ms
2023-01-29T02:33:33.106-03:00  INFO 3392 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:33:33.162-03:00  INFO 3392 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:89aa7b4b-6620-468b-9d0e-8c719a2b999e user=SA
2023-01-29T02:33:33.163-03:00  INFO 3392 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:33:33.192-03:00  INFO 3392 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:33:33.195-03:00  WARN 3392 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:33:33.198-03:00  INFO 3392 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:33:33.255-03:00  INFO 3392 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:33:33.255-03:00  INFO 3392 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:33:33.259-03:00  INFO 3392 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:33:33.412-03:00  WARN 3392 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:33:35.049-03:00  INFO 3392 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@45188301, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@47c5b16b, org.springframework.security.web.context.SecurityContextHolderFilter@713d2fe8, org.springframework.security.web.header.HeaderWriterFilter@426ead99, org.springframework.security.web.authentication.logout.LogoutFilter@127205ac, com.example.ec.security.JwtTokenFilter@5ad59bed, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@546c43e0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@63d93e91, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@51a94f7f, org.springframework.security.web.session.SessionManagementFilter@6c40bb07, org.springframework.security.web.access.ExceptionTranslationFilter@f054e29, org.springframework.security.web.access.intercept.AuthorizationFilter@e30b8f0]
2023-01-29T02:33:35.202-03:00  INFO 3392 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53078 (http) with context path ''
2023-01-29T02:33:35.204-03:00  INFO 3392 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 2.452 seconds (process running for 12.259)
2023-01-29T02:33:35.214-03:00  INFO 3392 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:33:35.215-03:00  INFO 3392 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:33:35.215-03:00  INFO 3392 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2023-01-29T02:33:35.216-03:00  INFO 3392 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:35.219-03:00  INFO 3392 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQxNSwiZXhwIjoxNjc0OTcxMDE1fQ.IZvsd7XYQsWFZieffZtZH7AjifTwtlO0Qa0fG4SATXM]
2023-01-29T02:33:35.229-03:00  INFO 3392 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:35.232-03:00  INFO 3392 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQxNSwiZXhwIjoxNjc0OTcxMDE1fQ.IZvsd7XYQsWFZieffZtZH7AjifTwtlO0Qa0fG4SATXM]
2023-01-29T02:33:35.242-03:00  INFO 3392 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:35.243-03:00  INFO 3392 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:33:35.246-03:00 ERROR 3392 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:33:35.248-03:00  INFO 3392 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:35.249-03:00  INFO 3392 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:33:35.256-03:00  INFO 3392 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:35.260-03:00  INFO 3392 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwNDE1LCJleHAiOjE2NzQ5NzEwMTV9.JPTHYr6rvNVR2V6PfRoJ7dV9e9xFc1LpUA_zpn3slHs]
2023-01-29T02:33:35.275-03:00  INFO 3392 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:33:35.279-03:00  INFO 3392 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwNDE1LCJleHAiOjE2NzQ5NzEwMTV9.JPTHYr6rvNVR2V6PfRoJ7dV9e9xFc1LpUA_zpn3slHs]
2023-01-29T02:33:35.358-03:00  INFO 3392 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:33:35.360-03:00  INFO 3392 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:33:35.436-03:00  INFO 3392 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:33:35.452-03:00  INFO 3392 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:33:35.453-03:00  INFO 3392 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:33:35.513-03:00  INFO 3392 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:33:35.547-03:00  INFO 3392 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:33:35.548-03:00  INFO 3392 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:33:35.618-03:00  INFO 3392 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:34:16.599-03:00  INFO 12732 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 12732 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:34:16.599-03:00 DEBUG 12732 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:34:16.600-03:00  INFO 12732 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:34:17.373-03:00  INFO 12732 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:34:17.434-03:00  INFO 12732 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2023-01-29T02:34:17.912-03:00  INFO 12732 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:34:18.065-03:00  INFO 12732 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:670166f8-e07f-4472-b24d-5fe4cdba7add user=SA
2023-01-29T02:34:18.066-03:00  INFO 12732 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:34:18.210-03:00  INFO 12732 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:34:18.278-03:00  INFO 12732 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:34:18.324-03:00  WARN 12732 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:34:18.464-03:00  INFO 12732 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:34:19.094-03:00  INFO 12732 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:34:19.102-03:00  INFO 12732 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:34:19.118-03:00  INFO 12732 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:34:19.746-03:00  WARN 12732 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:34:20.654-03:00  INFO 12732 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@33ac7934, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@152bb4cc, org.springframework.security.web.context.SecurityContextHolderFilter@28d2afd8, org.springframework.security.web.header.HeaderWriterFilter@5817b0d1, org.springframework.security.web.authentication.logout.LogoutFilter@125ace20, com.example.ec.security.JwtTokenFilter@6f87bc6c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@755057c7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4d62bb8b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@178f5b5b, org.springframework.security.web.session.SessionManagementFilter@61d7df22, org.springframework.security.web.access.ExceptionTranslationFilter@458500d1, org.springframework.security.web.access.intercept.AuthorizationFilter@30b2d267]
2023-01-29T02:34:21.116-03:00  INFO 12732 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.72 seconds (process running for 6.071)
2023-01-29T02:34:21.141-03:00  INFO 12732 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:34:21.147-03:00  INFO 12732 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:34:21.294-03:00  INFO 12732 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:34:21.301-03:00  INFO 12732 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:34:21.313-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:34:21.346-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:34:21.351-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:34:21.361-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:34:21.377-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:34:21.392-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:34:21.401-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:34:21.406-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:34:21.412-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:34:21.416-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:34:21.418-03:00 DEBUG 12732 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:34:21.419-03:00 DEBUG 12732 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:34:21.420-03:00 DEBUG 12732 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:34:21.421-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:34:21.428-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:34:21.583-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:34:21.588-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:34:21.595-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:34:21.598-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:34:21.600-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:34:21.600-03:00 DEBUG 12732 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:34:21.600-03:00 DEBUG 12732 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:34:21.604-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:34:21.606-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:34:21.651-03:00  INFO 12732 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:34:21.654-03:00  INFO 12732 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:34:21.655-03:00  INFO 12732 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:34:21.659-03:00  INFO 12732 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:34:21.663-03:00  INFO 12732 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:34:22.782-03:00  INFO 12732 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:34:22.791-03:00  INFO 12732 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:34:22.814-03:00  INFO 12732 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 12732 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:34:22.815-03:00 DEBUG 12732 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:34:22.815-03:00  INFO 12732 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:34:22.976-03:00  INFO 12732 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:34:22.987-03:00  INFO 12732 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T02:34:23.164-03:00  INFO 12732 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:34:23.175-03:00  INFO 12732 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:34:23.175-03:00  INFO 12732 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:34:23.258-03:00  INFO 12732 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:34:23.258-03:00  INFO 12732 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 442 ms
2023-01-29T02:34:23.336-03:00  INFO 12732 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:34:23.341-03:00  INFO 12732 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:fe5d900b-afe2-4537-90b6-c9131fe90a15 user=SA
2023-01-29T02:34:23.342-03:00  INFO 12732 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:34:23.384-03:00  INFO 12732 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:34:23.387-03:00  WARN 12732 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:34:23.391-03:00  INFO 12732 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:34:23.456-03:00  INFO 12732 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:34:23.456-03:00  INFO 12732 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:34:23.461-03:00  INFO 12732 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:34:23.619-03:00  WARN 12732 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:34:25.071-03:00  INFO 12732 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@24a26847, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@30eb427c, org.springframework.security.web.context.SecurityContextHolderFilter@61df07d0, org.springframework.security.web.header.HeaderWriterFilter@6e9e4332, org.springframework.security.web.authentication.logout.LogoutFilter@2c47135c, com.example.ec.security.JwtTokenFilter@59c9e3b9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@735c0454, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6f475ede, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@45bedfed, org.springframework.security.web.session.SessionManagementFilter@4c32d208, org.springframework.security.web.access.ExceptionTranslationFilter@16209621, org.springframework.security.web.access.intercept.AuthorizationFilter@6acec4a1]
2023-01-29T02:34:25.338-03:00  INFO 12732 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53103 (http) with context path ''
2023-01-29T02:34:25.341-03:00  INFO 12732 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 2.547 seconds (process running for 10.297)
2023-01-29T02:34:25.485-03:00  INFO 12732 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:34:25.485-03:00  INFO 12732 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:34:25.486-03:00  INFO 12732 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:34:25.492-03:00  INFO 12732 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:25.493-03:00  INFO 12732 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:34:25.516-03:00  INFO 12732 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:34:25.579-03:00  INFO 12732 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:25.579-03:00  INFO 12732 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:34:25.580-03:00  INFO 12732 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:34:25.590-03:00  INFO 12732 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:34:25.591-03:00  INFO 12732 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:34:25.617-03:00  INFO 12732 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:25.635-03:00  INFO 12732 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQ2NSwiZXhwIjoxNjc0OTcxMDY1fQ.6GULjJgjYQGvuoHC0jtMNhuf-mZxBCDjOXVdduztDxY]
2023-01-29T02:34:25.643-03:00  INFO 12732 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:34:25.653-03:00  INFO 12732 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:25.653-03:00  INFO 12732 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:34:25.659-03:00  INFO 12732 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:34:25.686-03:00  INFO 12732 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:25.689-03:00  INFO 12732 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQ2NSwiZXhwIjoxNjc0OTcxMDY1fQ.6GULjJgjYQGvuoHC0jtMNhuf-mZxBCDjOXVdduztDxY]
2023-01-29T02:34:25.723-03:00  INFO 12732 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:34:25.732-03:00  INFO 12732 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:25.735-03:00  INFO 12732 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQ2NSwiZXhwIjoxNjc0OTcxMDY1fQ.6GULjJgjYQGvuoHC0jtMNhuf-mZxBCDjOXVdduztDxY]
2023-01-29T02:34:25.738-03:00  INFO 12732 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:34:25.745-03:00  INFO 12732 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:25.745-03:00  INFO 12732 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:34:25.747-03:00  INFO 12732 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:34:25.756-03:00  INFO 12732 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:25.759-03:00  INFO 12732 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQ2NSwiZXhwIjoxNjc0OTcxMDY1fQ.6GULjJgjYQGvuoHC0jtMNhuf-mZxBCDjOXVdduztDxY]
2023-01-29T02:34:25.763-03:00  INFO 12732 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:34:25.772-03:00  INFO 12732 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:25.775-03:00  INFO 12732 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQ2NSwiZXhwIjoxNjc0OTcxMDY1fQ.6GULjJgjYQGvuoHC0jtMNhuf-mZxBCDjOXVdduztDxY]
2023-01-29T02:34:25.777-03:00  INFO 12732 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:34:25.782-03:00  INFO 12732 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:34:25.783-03:00  INFO 12732 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:34:25.798-03:00  INFO 12732 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 12732 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:34:25.798-03:00 DEBUG 12732 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:34:25.798-03:00  INFO 12732 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:34:25.938-03:00  INFO 12732 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:34:25.949-03:00  INFO 12732 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T02:34:26.014-03:00  INFO 12732 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:34:26.015-03:00  INFO 12732 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:34:26.015-03:00  INFO 12732 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:34:26.039-03:00  INFO 12732 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:34:26.039-03:00  INFO 12732 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 240 ms
2023-01-29T02:34:26.112-03:00  INFO 12732 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:34:26.159-03:00  INFO 12732 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:26b6f51b-dbc8-4d09-a5a0-dd2982a457be user=SA
2023-01-29T02:34:26.159-03:00  INFO 12732 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:34:26.199-03:00  INFO 12732 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:34:26.202-03:00  WARN 12732 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:34:26.204-03:00  INFO 12732 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:34:26.250-03:00  INFO 12732 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:34:26.251-03:00  INFO 12732 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:34:26.254-03:00  INFO 12732 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:34:26.358-03:00  WARN 12732 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:34:27.759-03:00  INFO 12732 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6c54bc3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@dcaa310, org.springframework.security.web.context.SecurityContextHolderFilter@223a679, org.springframework.security.web.header.HeaderWriterFilter@50ee7857, org.springframework.security.web.authentication.logout.LogoutFilter@35a7c477, com.example.ec.security.JwtTokenFilter@2492f6fb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6b00eaae, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@480f1b59, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@155afbd7, org.springframework.security.web.session.SessionManagementFilter@48455005, org.springframework.security.web.access.ExceptionTranslationFilter@18be3e85, org.springframework.security.web.access.intercept.AuthorizationFilter@697b105e]
2023-01-29T02:34:27.883-03:00  INFO 12732 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53108 (http) with context path ''
2023-01-29T02:34:27.886-03:00  INFO 12732 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 2.1 seconds (process running for 12.842)
2023-01-29T02:34:27.896-03:00  INFO 12732 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:34:27.896-03:00  INFO 12732 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:34:27.897-03:00  INFO 12732 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:34:27.897-03:00  INFO 12732 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:27.901-03:00  INFO 12732 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQ2NywiZXhwIjoxNjc0OTcxMDY3fQ.ZSmbDTJWiGZJi9YvH92Pz_YPcpooalNkc6oKY9Ytadw]
2023-01-29T02:34:27.911-03:00  INFO 12732 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:27.914-03:00  INFO 12732 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDQ2NywiZXhwIjoxNjc0OTcxMDY3fQ.ZSmbDTJWiGZJi9YvH92Pz_YPcpooalNkc6oKY9Ytadw]
2023-01-29T02:34:27.923-03:00  INFO 12732 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:27.923-03:00  INFO 12732 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:34:27.927-03:00 ERROR 12732 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:34:27.930-03:00  INFO 12732 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:27.930-03:00  INFO 12732 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:34:27.937-03:00  INFO 12732 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:27.939-03:00  INFO 12732 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwNDY3LCJleHAiOjE2NzQ5NzEwNjd9.yTVPNjgFUnAWDOHq_RposspStF1uxkA3D-tL_U7h-lo]
2023-01-29T02:34:27.954-03:00  INFO 12732 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:34:27.957-03:00  INFO 12732 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwNDY3LCJleHAiOjE2NzQ5NzEwNjd9.yTVPNjgFUnAWDOHq_RposspStF1uxkA3D-tL_U7h-lo]
2023-01-29T02:34:28.010-03:00  INFO 12732 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:34:28.012-03:00  INFO 12732 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:34:28.090-03:00  INFO 12732 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:34:28.105-03:00  INFO 12732 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:34:28.106-03:00  INFO 12732 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:34:28.161-03:00  INFO 12732 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:34:28.183-03:00  INFO 12732 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:34:28.183-03:00  INFO 12732 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:34:28.240-03:00  INFO 12732 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:35:14.662-03:00  INFO 26120 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 26120 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:35:14.662-03:00 DEBUG 26120 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:35:14.663-03:00  INFO 26120 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:35:15.356-03:00  INFO 26120 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:35:15.413-03:00  INFO 26120 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 51 ms. Found 5 JPA repository interfaces.
2023-01-29T02:35:16.452-03:00  INFO 26120 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:35:16.462-03:00  INFO 26120 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:35:16.463-03:00  INFO 26120 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:35:16.557-03:00  INFO 26120 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:35:16.557-03:00  INFO 26120 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1877 ms
2023-01-29T02:35:16.656-03:00  INFO 26120 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:35:16.808-03:00  INFO 26120 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:7565bd20-a599-4ca0-8be1-dd9153459dc5 user=SA
2023-01-29T02:35:16.811-03:00  INFO 26120 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:35:16.961-03:00  INFO 26120 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:35:17.010-03:00  INFO 26120 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:35:17.054-03:00  WARN 26120 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:35:17.191-03:00  INFO 26120 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:35:17.825-03:00  INFO 26120 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:35:17.832-03:00  INFO 26120 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:35:17.849-03:00  INFO 26120 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:35:18.501-03:00  WARN 26120 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:35:19.429-03:00  INFO 26120 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@67cc5a38, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@23b62cc3, org.springframework.security.web.context.SecurityContextHolderFilter@67c2ff5d, org.springframework.security.web.header.HeaderWriterFilter@7789719e, org.springframework.security.web.authentication.logout.LogoutFilter@6ed78a5e, com.example.ec.security.JwtTokenFilter@f4e235e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5d8de155, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d0590bc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1d82e396, org.springframework.security.web.session.SessionManagementFilter@375f276e, org.springframework.security.web.access.ExceptionTranslationFilter@28ec92c9, org.springframework.security.web.access.intercept.AuthorizationFilter@79864d6]
2023-01-29T02:35:19.943-03:00  INFO 26120 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53140 (http) with context path ''
2023-01-29T02:35:19.953-03:00  INFO 26120 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.487 seconds (process running for 6.726)
2023-01-29T02:35:20.168-03:00  INFO 26120 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:35:20.168-03:00  INFO 26120 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:35:20.169-03:00  INFO 26120 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:35:20.179-03:00  INFO 26120 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:35:20.207-03:00  INFO 26120 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwNTE5LCJleHAiOjE2NzQ5NzExMTl9.lJiTE31JTLuAdxxNckBZDFIqGh3zy65wSUVK4TLICCg]
2023-01-29T02:35:20.337-03:00  INFO 26120 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:35:20.340-03:00  INFO 26120 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:35:20.342-03:00  INFO 26120 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:35:40.445-03:00  INFO 26040 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 26040 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:35:40.446-03:00 DEBUG 26040 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:35:40.447-03:00  INFO 26040 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:35:41.121-03:00  INFO 26040 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:35:41.178-03:00  INFO 26040 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 5 JPA repository interfaces.
2023-01-29T02:35:42.237-03:00  INFO 26040 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:35:42.248-03:00  INFO 26040 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:35:42.249-03:00  INFO 26040 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:35:42.353-03:00  INFO 26040 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:35:42.354-03:00  INFO 26040 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1891 ms
2023-01-29T02:35:42.456-03:00  INFO 26040 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:35:42.612-03:00  INFO 26040 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:f1e4c1c2-b61e-43c3-ab75-01c2ea462231 user=SA
2023-01-29T02:35:42.613-03:00  INFO 26040 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:35:42.753-03:00  INFO 26040 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:35:42.798-03:00  INFO 26040 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:35:42.840-03:00  WARN 26040 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:35:42.961-03:00  INFO 26040 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:35:43.569-03:00  INFO 26040 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:35:43.577-03:00  INFO 26040 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:35:43.591-03:00  INFO 26040 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:35:44.193-03:00  WARN 26040 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:35:45.194-03:00  INFO 26040 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4fb1bffd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@427c9a13, org.springframework.security.web.context.SecurityContextHolderFilter@46a5aff, org.springframework.security.web.header.HeaderWriterFilter@29e8c09c, org.springframework.security.web.authentication.logout.LogoutFilter@747216b6, com.example.ec.security.JwtTokenFilter@7b842e79, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@29fa465a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4b2ca159, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6e620fa9, org.springframework.security.web.session.SessionManagementFilter@158f0af4, org.springframework.security.web.access.ExceptionTranslationFilter@3b5f72fa, org.springframework.security.web.access.intercept.AuthorizationFilter@37a74cf4]
2023-01-29T02:35:45.708-03:00  INFO 26040 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53176 (http) with context path ''
2023-01-29T02:35:45.716-03:00  INFO 26040 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.455 seconds (process running for 6.401)
2023-01-29T02:35:45.894-03:00  INFO 26040 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:35:45.894-03:00  INFO 26040 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:35:45.895-03:00  INFO 26040 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:35:45.905-03:00  INFO 26040 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:35:45.927-03:00  INFO 26040 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwNTQ1LCJleHAiOjE2NzQ5NzExNDV9.UOVgzX34IkwAMR9JCMLx2Xki0bLqy977_l0PggwB2yA]
2023-01-29T02:35:46.044-03:00  INFO 26040 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:35:46.046-03:00  INFO 26040 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:35:46.048-03:00  INFO 26040 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:36:12.849-03:00  INFO 18532 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 18532 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:36:12.850-03:00 DEBUG 18532 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:36:12.850-03:00  INFO 18532 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:36:13.618-03:00  INFO 18532 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:36:13.679-03:00  INFO 18532 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2023-01-29T02:36:14.744-03:00  INFO 18532 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:36:14.755-03:00  INFO 18532 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:36:14.755-03:00  INFO 18532 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:36:14.857-03:00  INFO 18532 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:36:14.857-03:00  INFO 18532 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1988 ms
2023-01-29T02:36:14.953-03:00  INFO 18532 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:36:15.107-03:00  INFO 18532 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:2011abd1-90e2-49ea-b54c-23378b48f17c user=SA
2023-01-29T02:36:15.109-03:00  INFO 18532 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:36:15.262-03:00  INFO 18532 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:36:15.312-03:00  INFO 18532 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:36:15.349-03:00  WARN 18532 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:36:15.476-03:00  INFO 18532 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:36:16.101-03:00  INFO 18532 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:36:16.108-03:00  INFO 18532 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:36:16.125-03:00  INFO 18532 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:36:16.739-03:00  WARN 18532 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:36:17.737-03:00  INFO 18532 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@427c9a13, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7b842e79, org.springframework.security.web.context.SecurityContextHolderFilter@695f382c, org.springframework.security.web.header.HeaderWriterFilter@5d8de155, org.springframework.security.web.authentication.logout.LogoutFilter@7ee6d5fd, com.example.ec.security.JwtTokenFilter@6e620fa9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4b2ca159, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d47b761, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2cee1bcf, org.springframework.security.web.session.SessionManagementFilter@7a174e4b, org.springframework.security.web.access.ExceptionTranslationFilter@67c2ff5d, org.springframework.security.web.access.intercept.AuthorizationFilter@40af3dd8]
2023-01-29T02:36:18.233-03:00  INFO 18532 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53203 (http) with context path ''
2023-01-29T02:36:18.242-03:00  INFO 18532 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.589 seconds (process running for 6.914)
2023-01-29T02:36:18.450-03:00  INFO 18532 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:36:18.450-03:00  INFO 18532 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:36:18.452-03:00  INFO 18532 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-01-29T02:36:18.464-03:00  INFO 18532 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:36:18.496-03:00  INFO 18532 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwNTc4LCJleHAiOjE2NzQ5NzExNzh9.PShbBeidDBBX-IF7mkrivWcvq0XpbhdFwXVI08PejUQ]
2023-01-29T02:36:18.629-03:00  INFO 18532 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:36:18.631-03:00  INFO 18532 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:36:18.633-03:00  INFO 18532 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:36:34.126-03:00  INFO 24648 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 24648 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:36:34.126-03:00 DEBUG 24648 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:36:34.127-03:00  INFO 24648 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:36:34.805-03:00  INFO 24648 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:36:34.866-03:00  INFO 24648 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54 ms. Found 5 JPA repository interfaces.
2023-01-29T02:36:35.949-03:00  INFO 24648 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:36:35.961-03:00  INFO 24648 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:36:35.961-03:00  INFO 24648 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:36:36.075-03:00  INFO 24648 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:36:36.075-03:00  INFO 24648 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1932 ms
2023-01-29T02:36:36.188-03:00  INFO 24648 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:36:36.330-03:00  INFO 24648 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:565ebcc5-573d-44b1-99b9-844af235825d user=SA
2023-01-29T02:36:36.332-03:00  INFO 24648 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:36:36.475-03:00  INFO 24648 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:36:36.531-03:00  INFO 24648 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:36:36.573-03:00  WARN 24648 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:36:36.709-03:00  INFO 24648 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:36:37.302-03:00  INFO 24648 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:36:37.309-03:00  INFO 24648 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:36:37.325-03:00  INFO 24648 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:36:37.916-03:00  WARN 24648 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:36:38.858-03:00  INFO 24648 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@79864d6, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@472d7f34, org.springframework.security.web.context.SecurityContextHolderFilter@375f276e, org.springframework.security.web.header.HeaderWriterFilter@34438b38, org.springframework.security.web.authentication.logout.LogoutFilter@421c4c3e, com.example.ec.security.JwtTokenFilter@2da7ef3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b5f72fa, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@67c2ff5d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@67cc5a38, org.springframework.security.web.session.SessionManagementFilter@738da6f2, org.springframework.security.web.access.ExceptionTranslationFilter@347770a9, org.springframework.security.web.access.intercept.AuthorizationFilter@504216ff]
2023-01-29T02:36:39.355-03:00  INFO 24648 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53222 (http) with context path ''
2023-01-29T02:36:39.363-03:00  INFO 24648 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 5.424 seconds (process running for 6.382)
2023-01-29T02:36:39.571-03:00  INFO 24648 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:36:39.571-03:00  INFO 24648 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:36:39.573-03:00  INFO 24648 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-01-29T02:36:39.582-03:00  INFO 24648 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:36:39.608-03:00  INFO 24648 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwNTk5LCJleHAiOjE2NzQ5NzExOTl9.8Ch_ZijeWhKFyY3Y_8sgOT509lbAfbiPYhQvyYHs51g]
2023-01-29T02:36:39.725-03:00  INFO 24648 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:36:39.726-03:00  INFO 24648 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:36:39.728-03:00  INFO 24648 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:39:34.805-03:00  INFO 14608 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 14608 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:39:34.805-03:00 DEBUG 14608 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:39:34.806-03:00  INFO 14608 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:39:35.507-03:00  INFO 14608 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:39:35.566-03:00  INFO 14608 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 53 ms. Found 5 JPA repository interfaces.
2023-01-29T02:39:36.033-03:00  INFO 14608 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:39:36.181-03:00  INFO 14608 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:53c8a7fe-74ca-4a26-a4c4-0847db91d8e4 user=SA
2023-01-29T02:39:36.182-03:00  INFO 14608 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:39:36.325-03:00  INFO 14608 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:39:36.372-03:00  INFO 14608 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:39:36.415-03:00  WARN 14608 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:39:36.523-03:00  INFO 14608 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:39:37.134-03:00  INFO 14608 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:39:37.140-03:00  INFO 14608 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:39:37.155-03:00  INFO 14608 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:39:37.768-03:00  WARN 14608 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:39:38.635-03:00  INFO 14608 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@324e62e2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1018552d, org.springframework.security.web.context.SecurityContextHolderFilter@7be9582e, org.springframework.security.web.header.HeaderWriterFilter@23657729, org.springframework.security.web.authentication.logout.LogoutFilter@58a93f51, com.example.ec.security.JwtTokenFilter@75eca6d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@125ace20, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7dbc77ca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2d2afbdf, org.springframework.security.web.session.SessionManagementFilter@9203db8, org.springframework.security.web.access.ExceptionTranslationFilter@1d642682, org.springframework.security.web.access.intercept.AuthorizationFilter@509e4d53]
2023-01-29T02:39:39.077-03:00  INFO 14608 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.474 seconds (process running for 5.849)
2023-01-29T02:39:39.105-03:00  INFO 14608 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:39:39.111-03:00  INFO 14608 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:39:39.237-03:00  INFO 14608 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:39:39.242-03:00  INFO 14608 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:39:39.253-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:39:39.297-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:39:39.306-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:39:39.317-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:39:39.333-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:39:39.345-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:39:39.352-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:39:39.356-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:39:39.362-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:39:39.365-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:39:39.365-03:00 DEBUG 14608 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:39:39.366-03:00 DEBUG 14608 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:39:39.366-03:00 DEBUG 14608 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:39:39.367-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:39:39.373-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:39:39.536-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:39:39.541-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:39:39.549-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:39:39.551-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:39:39.554-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:39:39.554-03:00 DEBUG 14608 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:39:39.554-03:00 DEBUG 14608 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:39:39.560-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:39:39.563-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:39:39.613-03:00  INFO 14608 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:39:39.616-03:00  INFO 14608 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:39:39.618-03:00  INFO 14608 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:39:39.624-03:00  INFO 14608 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:39:39.628-03:00  INFO 14608 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:39:40.756-03:00  INFO 14608 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:39:40.765-03:00  INFO 14608 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:39:40.788-03:00  INFO 14608 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 14608 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:39:40.788-03:00 DEBUG 14608 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:39:40.788-03:00  INFO 14608 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:39:40.949-03:00  INFO 14608 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:39:40.959-03:00  INFO 14608 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T02:39:41.141-03:00  INFO 14608 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:39:41.151-03:00  INFO 14608 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:39:41.151-03:00  INFO 14608 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:39:41.213-03:00  INFO 14608 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:39:41.214-03:00  INFO 14608 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 424 ms
2023-01-29T02:39:41.272-03:00  INFO 14608 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:39:41.275-03:00  INFO 14608 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:27630d86-1626-4bf6-8546-089d6446ab11 user=SA
2023-01-29T02:39:41.275-03:00  INFO 14608 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:39:41.307-03:00  INFO 14608 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:39:41.309-03:00  WARN 14608 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:39:41.312-03:00  INFO 14608 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:39:41.365-03:00  INFO 14608 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:39:41.365-03:00  INFO 14608 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:39:41.369-03:00  INFO 14608 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:39:41.486-03:00  WARN 14608 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:39:42.155-03:00  INFO 14608 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@26562718, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1388c465, org.springframework.security.web.context.SecurityContextHolderFilter@73f937d9, org.springframework.security.web.header.HeaderWriterFilter@71da8575, org.springframework.security.web.authentication.logout.LogoutFilter@47ce44ab, com.example.ec.security.JwtTokenFilter@48d1f239, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@65bd41d8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@40699137, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@798e73de, org.springframework.security.web.session.SessionManagementFilter@620bfd8c, org.springframework.security.web.access.ExceptionTranslationFilter@12008a54, org.springframework.security.web.access.intercept.AuthorizationFilter@441eae0b]
2023-01-29T02:39:42.497-03:00  INFO 14608 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53389 (http) with context path ''
2023-01-29T02:39:42.501-03:00  INFO 14608 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.733 seconds (process running for 9.273)
2023-01-29T02:39:42.636-03:00  INFO 14608 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:39:42.636-03:00  INFO 14608 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:39:42.638-03:00  INFO 14608 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:39:42.645-03:00  INFO 14608 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:42.646-03:00  INFO 14608 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:39:42.668-03:00  INFO 14608 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:39:42.727-03:00  INFO 14608 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:42.728-03:00  INFO 14608 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:39:42.728-03:00  INFO 14608 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:39:42.737-03:00  INFO 14608 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:39:42.739-03:00  INFO 14608 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:39:42.763-03:00  INFO 14608 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:42.780-03:00  INFO 14608 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDc4MiwiZXhwIjoxNjc0OTcxMzgyfQ.hLYIDQuOvKad0ct-6Qf6HMPq-y2JfoIXG0cevdX0FmM]
2023-01-29T02:39:42.788-03:00  INFO 14608 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:39:42.798-03:00  INFO 14608 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:42.798-03:00  INFO 14608 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:39:42.803-03:00  INFO 14608 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:39:42.829-03:00  INFO 14608 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:42.833-03:00  INFO 14608 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDc4MiwiZXhwIjoxNjc0OTcxMzgyfQ.hLYIDQuOvKad0ct-6Qf6HMPq-y2JfoIXG0cevdX0FmM]
2023-01-29T02:39:42.864-03:00  INFO 14608 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:39:42.873-03:00  INFO 14608 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:42.876-03:00  INFO 14608 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDc4MiwiZXhwIjoxNjc0OTcxMzgyfQ.hLYIDQuOvKad0ct-6Qf6HMPq-y2JfoIXG0cevdX0FmM]
2023-01-29T02:39:42.878-03:00  INFO 14608 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:39:42.885-03:00  INFO 14608 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:42.886-03:00  INFO 14608 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:39:42.888-03:00  INFO 14608 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:39:42.897-03:00  INFO 14608 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:42.901-03:00  INFO 14608 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDc4MiwiZXhwIjoxNjc0OTcxMzgyfQ.hLYIDQuOvKad0ct-6Qf6HMPq-y2JfoIXG0cevdX0FmM]
2023-01-29T02:39:42.906-03:00  INFO 14608 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:39:42.915-03:00  INFO 14608 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:42.920-03:00  INFO 14608 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDc4MiwiZXhwIjoxNjc0OTcxMzgyfQ.hLYIDQuOvKad0ct-6Qf6HMPq-y2JfoIXG0cevdX0FmM]
2023-01-29T02:39:42.922-03:00  INFO 14608 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:39:42.928-03:00  INFO 14608 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:39:42.931-03:00  INFO 14608 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:39:42.952-03:00  INFO 14608 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 14608 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:39:42.952-03:00 DEBUG 14608 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:39:42.952-03:00  INFO 14608 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:39:43.103-03:00  INFO 14608 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:39:43.114-03:00  INFO 14608 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T02:39:43.196-03:00  INFO 14608 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:39:43.198-03:00  INFO 14608 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:39:43.198-03:00  INFO 14608 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:39:43.227-03:00  INFO 14608 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:39:43.227-03:00  INFO 14608 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 274 ms
2023-01-29T02:39:43.332-03:00  INFO 14608 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:39:43.355-03:00  INFO 14608 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:1494cd91-0868-43e9-9944-cf7aeb113e62 user=SA
2023-01-29T02:39:43.355-03:00  INFO 14608 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:39:43.387-03:00  INFO 14608 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:39:43.389-03:00  WARN 14608 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:39:43.394-03:00  INFO 14608 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:39:43.452-03:00  INFO 14608 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:39:43.452-03:00  INFO 14608 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:39:43.456-03:00  INFO 14608 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:39:43.549-03:00  WARN 14608 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:39:44.691-03:00  INFO 14608 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@59a8891e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@f054e29, org.springframework.security.web.context.SecurityContextHolderFilter@24ed4582, org.springframework.security.web.header.HeaderWriterFilter@45e38356, org.springframework.security.web.authentication.logout.LogoutFilter@62068fa5, com.example.ec.security.JwtTokenFilter@426ead99, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@18601f1e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4140d677, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6c40bb07, org.springframework.security.web.session.SessionManagementFilter@7882a4d8, org.springframework.security.web.access.ExceptionTranslationFilter@484e9fee, org.springframework.security.web.access.intercept.AuthorizationFilter@3db2665d]
2023-01-29T02:39:44.791-03:00  INFO 14608 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53394 (http) with context path ''
2023-01-29T02:39:44.793-03:00  INFO 14608 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.856 seconds (process running for 11.565)
2023-01-29T02:39:44.802-03:00  INFO 14608 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:39:44.802-03:00  INFO 14608 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:39:44.803-03:00  INFO 14608 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:39:44.804-03:00  INFO 14608 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:44.807-03:00  INFO 14608 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDc4NCwiZXhwIjoxNjc0OTcxMzg0fQ.Dl4hWeAkX6zpfOrRefmwNoRVbwVBMj5Vhnx_ZkzsvSI]
2023-01-29T02:39:44.817-03:00  INFO 14608 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:44.820-03:00  INFO 14608 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDc4NCwiZXhwIjoxNjc0OTcxMzg0fQ.Dl4hWeAkX6zpfOrRefmwNoRVbwVBMj5Vhnx_ZkzsvSI]
2023-01-29T02:39:44.830-03:00  INFO 14608 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:44.830-03:00  INFO 14608 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:39:44.834-03:00 ERROR 14608 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:39:44.838-03:00  INFO 14608 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:44.838-03:00  INFO 14608 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:39:44.845-03:00  INFO 14608 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:44.848-03:00  INFO 14608 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwNzg0LCJleHAiOjE2NzQ5NzEzODR9.41gozIbmx9YH6Vs6FRAmqx-muBXS5AY8ZHNsyOowwL4]
2023-01-29T02:39:44.859-03:00  INFO 14608 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:39:44.862-03:00  INFO 14608 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwNzg0LCJleHAiOjE2NzQ5NzEzODR9.41gozIbmx9YH6Vs6FRAmqx-muBXS5AY8ZHNsyOowwL4]
2023-01-29T02:39:44.908-03:00  INFO 14608 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:39:44.910-03:00  INFO 14608 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:39:44.949-03:00  INFO 14608 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:39:44.962-03:00  INFO 14608 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:39:44.963-03:00  INFO 14608 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:39:44.989-03:00  INFO 14608 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:39:45.011-03:00  INFO 14608 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:39:45.011-03:00  INFO 14608 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:39:45.036-03:00  INFO 14608 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:40:11.252-03:00  INFO 11652 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 11652 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:40:11.253-03:00 DEBUG 11652 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:40:11.254-03:00  INFO 11652 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:40:11.983-03:00  INFO 11652 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:40:12.046-03:00  INFO 11652 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 55 ms. Found 5 JPA repository interfaces.
2023-01-29T02:40:12.520-03:00  INFO 11652 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:40:12.673-03:00  INFO 11652 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:3b1cf9bb-9a02-409e-9d42-e1e74f8f7ad4 user=SA
2023-01-29T02:40:12.675-03:00  INFO 11652 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:40:12.818-03:00  INFO 11652 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:40:12.868-03:00  INFO 11652 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:40:12.905-03:00  WARN 11652 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:40:13.026-03:00  INFO 11652 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:40:13.664-03:00  INFO 11652 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:40:13.672-03:00  INFO 11652 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:40:13.691-03:00  INFO 11652 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:40:14.430-03:00  WARN 11652 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:40:15.466-03:00  INFO 11652 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@67263db7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4a2bc71f, org.springframework.security.web.context.SecurityContextHolderFilter@178f5b5b, org.springframework.security.web.header.HeaderWriterFilter@7be9582e, org.springframework.security.web.authentication.logout.LogoutFilter@3ed1446c, com.example.ec.security.JwtTokenFilter@20f94e9a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@fffb4a8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5dc90de7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3f213e97, org.springframework.security.web.session.SessionManagementFilter@33ac7934, org.springframework.security.web.access.ExceptionTranslationFilter@31773d5b, org.springframework.security.web.access.intercept.AuthorizationFilter@2d10160a]
2023-01-29T02:40:15.955-03:00  INFO 11652 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.932 seconds (process running for 6.215)
2023-01-29T02:40:15.982-03:00  INFO 11652 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:40:15.991-03:00  INFO 11652 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:40:16.182-03:00  INFO 11652 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:40:16.189-03:00  INFO 11652 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:40:16.202-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:40:16.237-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:40:16.243-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:40:16.254-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:40:16.268-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:40:16.280-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:40:16.287-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:40:16.290-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:40:16.296-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:40:16.299-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:40:16.300-03:00 DEBUG 11652 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:40:16.301-03:00 DEBUG 11652 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:40:16.301-03:00 DEBUG 11652 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:40:16.302-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:40:16.307-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:40:16.467-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:40:16.472-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:40:16.479-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:40:16.482-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:40:16.485-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:40:16.485-03:00 DEBUG 11652 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:40:16.485-03:00 DEBUG 11652 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:40:16.488-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:40:16.490-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:40:16.537-03:00  INFO 11652 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:40:16.540-03:00  INFO 11652 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:40:16.541-03:00  INFO 11652 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:40:16.544-03:00  INFO 11652 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:40:16.547-03:00  INFO 11652 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:40:17.681-03:00  INFO 11652 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:40:17.689-03:00  INFO 11652 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:40:17.709-03:00  INFO 11652 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 11652 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:40:17.710-03:00 DEBUG 11652 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:40:17.710-03:00  INFO 11652 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:40:17.861-03:00  INFO 11652 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:40:17.872-03:00  INFO 11652 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T02:40:18.046-03:00  INFO 11652 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:40:18.054-03:00  INFO 11652 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:40:18.055-03:00  INFO 11652 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:40:18.129-03:00  INFO 11652 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:40:18.129-03:00  INFO 11652 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 418 ms
2023-01-29T02:40:18.193-03:00  INFO 11652 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:40:18.197-03:00  INFO 11652 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:1e5f189d-3030-48f9-9170-b104fabdc25b user=SA
2023-01-29T02:40:18.198-03:00  INFO 11652 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:40:18.229-03:00  INFO 11652 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:40:18.231-03:00  WARN 11652 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:40:18.234-03:00  INFO 11652 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:40:18.281-03:00  INFO 11652 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:40:18.281-03:00  INFO 11652 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:40:18.285-03:00  INFO 11652 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:40:18.407-03:00  WARN 11652 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:40:18.848-03:00  INFO 11652 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3da20c42, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@16209621, org.springframework.security.web.context.SecurityContextHolderFilter@5b0af511, org.springframework.security.web.header.HeaderWriterFilter@279afa4e, org.springframework.security.web.authentication.logout.LogoutFilter@5ace2ce3, com.example.ec.security.JwtTokenFilter@6e9e4332, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@fbd9b1f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7f85482c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4c32d208, org.springframework.security.web.session.SessionManagementFilter@519f1a7d, org.springframework.security.web.access.ExceptionTranslationFilter@76145ef9, org.springframework.security.web.access.intercept.AuthorizationFilter@6cd9cafb]
2023-01-29T02:40:19.089-03:00  INFO 11652 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53413 (http) with context path ''
2023-01-29T02:40:19.093-03:00  INFO 11652 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.4 seconds (process running for 9.354)
2023-01-29T02:40:19.235-03:00  INFO 11652 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:40:19.235-03:00  INFO 11652 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:40:19.237-03:00  INFO 11652 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:40:19.246-03:00  INFO 11652 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:19.247-03:00  INFO 11652 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:40:19.272-03:00  INFO 11652 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:40:19.364-03:00  INFO 11652 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:19.364-03:00  INFO 11652 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:40:19.365-03:00  INFO 11652 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:40:19.378-03:00  INFO 11652 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:40:19.379-03:00  INFO 11652 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:40:19.405-03:00  INFO 11652 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:19.424-03:00  INFO 11652 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDgxOSwiZXhwIjoxNjc0OTcxNDE5fQ.W0X5j81XQVn-vLtyym545iTD39zKOHpDX8_y8zkLLUU]
2023-01-29T02:40:19.436-03:00  INFO 11652 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:40:19.455-03:00  INFO 11652 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:19.455-03:00  INFO 11652 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:40:19.460-03:00  INFO 11652 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:40:19.491-03:00  INFO 11652 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:19.495-03:00  INFO 11652 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDgxOSwiZXhwIjoxNjc0OTcxNDE5fQ.W0X5j81XQVn-vLtyym545iTD39zKOHpDX8_y8zkLLUU]
2023-01-29T02:40:19.528-03:00  INFO 11652 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:40:19.537-03:00  INFO 11652 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:19.540-03:00  INFO 11652 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDgxOSwiZXhwIjoxNjc0OTcxNDE5fQ.W0X5j81XQVn-vLtyym545iTD39zKOHpDX8_y8zkLLUU]
2023-01-29T02:40:19.543-03:00  INFO 11652 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:40:19.550-03:00  INFO 11652 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:19.550-03:00  INFO 11652 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:40:19.552-03:00  INFO 11652 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:40:19.562-03:00  INFO 11652 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:19.565-03:00  INFO 11652 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDgxOSwiZXhwIjoxNjc0OTcxNDE5fQ.W0X5j81XQVn-vLtyym545iTD39zKOHpDX8_y8zkLLUU]
2023-01-29T02:40:19.568-03:00  INFO 11652 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:40:19.577-03:00  INFO 11652 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:19.580-03:00  INFO 11652 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDgxOSwiZXhwIjoxNjc0OTcxNDE5fQ.W0X5j81XQVn-vLtyym545iTD39zKOHpDX8_y8zkLLUU]
2023-01-29T02:40:19.582-03:00  INFO 11652 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:40:19.589-03:00  INFO 11652 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:40:19.590-03:00  INFO 11652 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:40:19.606-03:00  INFO 11652 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 11652 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:40:19.607-03:00 DEBUG 11652 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:40:19.607-03:00  INFO 11652 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:40:19.736-03:00  INFO 11652 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:40:19.746-03:00  INFO 11652 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T02:40:19.817-03:00  INFO 11652 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:40:19.819-03:00  INFO 11652 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:40:19.819-03:00  INFO 11652 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:40:19.844-03:00  INFO 11652 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:40:19.844-03:00  INFO 11652 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 236 ms
2023-01-29T02:40:19.875-03:00  INFO 11652 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:40:19.890-03:00  INFO 11652 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:e55d8d13-3714-4573-b8ca-3f76692d283b user=SA
2023-01-29T02:40:19.890-03:00  INFO 11652 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:40:19.932-03:00  INFO 11652 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:40:19.935-03:00  WARN 11652 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:40:19.939-03:00  INFO 11652 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:40:20.004-03:00  INFO 11652 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:40:20.004-03:00  INFO 11652 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:40:20.009-03:00  INFO 11652 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:40:20.125-03:00  WARN 11652 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:40:21.153-03:00  INFO 11652 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4cf08d08, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5739e15e, org.springframework.security.web.context.SecurityContextHolderFilter@e30b8f0, org.springframework.security.web.header.HeaderWriterFilter@127205ac, org.springframework.security.web.authentication.logout.LogoutFilter@51a94f7f, com.example.ec.security.JwtTokenFilter@41f17bb7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@45188301, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@47c5b16b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@18be3e85, org.springframework.security.web.session.SessionManagementFilter@24b73741, org.springframework.security.web.access.ExceptionTranslationFilter@a28296e, org.springframework.security.web.access.intercept.AuthorizationFilter@3a8c7347]
2023-01-29T02:40:21.285-03:00  INFO 11652 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53418 (http) with context path ''
2023-01-29T02:40:21.289-03:00  INFO 11652 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.696 seconds (process running for 11.55)
2023-01-29T02:40:21.298-03:00  INFO 11652 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:40:21.298-03:00  INFO 11652 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:40:21.299-03:00  INFO 11652 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:40:21.299-03:00  INFO 11652 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:21.302-03:00  INFO 11652 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDgyMSwiZXhwIjoxNjc0OTcxNDIxfQ.ywuoziY-8BBk3ENVVNyXi4I0m8IcFbfECQh59T0aIiI]
2023-01-29T02:40:21.312-03:00  INFO 11652 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:21.315-03:00  INFO 11652 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDgyMSwiZXhwIjoxNjc0OTcxNDIxfQ.ywuoziY-8BBk3ENVVNyXi4I0m8IcFbfECQh59T0aIiI]
2023-01-29T02:40:21.325-03:00  INFO 11652 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:21.326-03:00  INFO 11652 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:40:21.329-03:00 ERROR 11652 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:40:21.332-03:00  INFO 11652 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:21.332-03:00  INFO 11652 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:40:21.338-03:00  INFO 11652 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:21.342-03:00  INFO 11652 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwODIxLCJleHAiOjE2NzQ5NzE0MjF9.VQFznigVumz5FGGR33uK8WeLC9KU9h_ZTeNF93yheX0]
2023-01-29T02:40:21.353-03:00  INFO 11652 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:40:21.356-03:00  INFO 11652 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwODIxLCJleHAiOjE2NzQ5NzE0MjF9.VQFznigVumz5FGGR33uK8WeLC9KU9h_ZTeNF93yheX0]
2023-01-29T02:40:21.444-03:00  INFO 11652 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:40:21.446-03:00  INFO 11652 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:40:21.537-03:00  INFO 11652 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:40:21.552-03:00  INFO 11652 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:40:21.552-03:00  INFO 11652 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:40:21.610-03:00  INFO 11652 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:40:21.648-03:00  INFO 11652 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:40:21.649-03:00  INFO 11652 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:40:21.717-03:00  INFO 11652 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:40:54.300-03:00  INFO 29048 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 29048 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:40:54.301-03:00 DEBUG 29048 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:40:54.302-03:00  INFO 29048 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:40:54.991-03:00  INFO 29048 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:40:55.049-03:00  INFO 29048 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 51 ms. Found 5 JPA repository interfaces.
2023-01-29T02:40:55.500-03:00  INFO 29048 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:40:55.673-03:00  INFO 29048 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:53cd484f-4f0c-46db-9007-f96d3139da9a user=SA
2023-01-29T02:40:55.675-03:00  INFO 29048 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:40:55.820-03:00  INFO 29048 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:40:55.883-03:00  INFO 29048 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:40:56.031-03:00  WARN 29048 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:40:56.152-03:00  INFO 29048 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:40:56.850-03:00  INFO 29048 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:40:56.857-03:00  INFO 29048 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:40:56.875-03:00  INFO 29048 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:40:57.513-03:00  WARN 29048 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:40:58.355-03:00  INFO 29048 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@59f56892, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@389fad5b, org.springframework.security.web.context.SecurityContextHolderFilter@3599b7e8, org.springframework.security.web.header.HeaderWriterFilter@32db94fb, org.springframework.security.web.authentication.logout.LogoutFilter@3cc5ca01, com.example.ec.security.JwtTokenFilter@5d72da0b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@52e5ad71, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@696a6506, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@285b63eb, org.springframework.security.web.session.SessionManagementFilter@56897de0, org.springframework.security.web.access.ExceptionTranslationFilter@cf82c58, org.springframework.security.web.access.intercept.AuthorizationFilter@53a645a2]
2023-01-29T02:40:58.804-03:00  INFO 29048 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.667 seconds (process running for 5.622)
2023-01-29T02:40:58.976-03:00  INFO 29048 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:40:58.982-03:00  INFO 29048 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:40:59.291-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:40:59.301-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:40:59.310-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:40:59.313-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:40:59.316-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:40:59.316-03:00 DEBUG 29048 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:40:59.316-03:00 DEBUG 29048 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:40:59.319-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:40:59.323-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:40:59.367-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:40:59.370-03:00  INFO 29048 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:40:59.375-03:00  INFO 29048 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:40:59.385-03:00  INFO 29048 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:40:59.388-03:00  INFO 29048 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:41:00.406-03:00  INFO 29048 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:41:00.408-03:00  INFO 29048 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:41:00.413-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:41:00.433-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:41:00.438-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:41:00.447-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:41:00.461-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:41:00.466-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:41:00.474-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:41:00.478-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:41:00.485-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:41:00.488-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:41:00.489-03:00 DEBUG 29048 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:41:00.489-03:00 DEBUG 29048 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:41:00.490-03:00 DEBUG 29048 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:41:00.491-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:41:00.498-03:00  INFO 29048 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:41:00.644-03:00  INFO 29048 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:41:00.653-03:00  INFO 29048 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:41:00.676-03:00  INFO 29048 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 29048 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:41:00.677-03:00 DEBUG 29048 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:41:00.677-03:00  INFO 29048 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:41:00.834-03:00  INFO 29048 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:41:00.847-03:00  INFO 29048 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 5 JPA repository interfaces.
2023-01-29T02:41:01.055-03:00  INFO 29048 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:41:01.064-03:00  INFO 29048 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:41:01.065-03:00  INFO 29048 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:41:01.131-03:00  INFO 29048 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:41:01.131-03:00  INFO 29048 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 453 ms
2023-01-29T02:41:01.183-03:00  INFO 29048 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:41:01.186-03:00  INFO 29048 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:f050e84a-52bc-4a41-885c-504f63d29580 user=SA
2023-01-29T02:41:01.187-03:00  INFO 29048 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:41:01.219-03:00  INFO 29048 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:41:01.223-03:00  WARN 29048 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:41:01.228-03:00  INFO 29048 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:41:01.284-03:00  INFO 29048 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:41:01.284-03:00  INFO 29048 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:41:01.287-03:00  INFO 29048 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:41:01.409-03:00  WARN 29048 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:41:01.762-03:00  INFO 29048 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6066cf5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3d63becf, org.springframework.security.web.context.SecurityContextHolderFilter@479885d, org.springframework.security.web.header.HeaderWriterFilter@4ccfd904, org.springframework.security.web.authentication.logout.LogoutFilter@72b92ce6, com.example.ec.security.JwtTokenFilter@5248688c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@47609e3d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7555782c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@37736bf1, org.springframework.security.web.session.SessionManagementFilter@5de25642, org.springframework.security.web.access.ExceptionTranslationFilter@3d7fc4b3, org.springframework.security.web.access.intercept.AuthorizationFilter@6f215ff3]
2023-01-29T02:41:01.983-03:00  INFO 29048 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53450 (http) with context path ''
2023-01-29T02:41:01.987-03:00  INFO 29048 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.33 seconds (process running for 8.805)
2023-01-29T02:41:02.121-03:00  INFO 29048 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:41:02.122-03:00  INFO 29048 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:41:02.123-03:00  INFO 29048 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:41:02.130-03:00  INFO 29048 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:02.130-03:00  INFO 29048 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:41:02.150-03:00  INFO 29048 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:41:02.220-03:00  INFO 29048 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:02.220-03:00  INFO 29048 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:41:02.221-03:00  INFO 29048 --- [http-nio-auto-1-exec-3] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:41:02.232-03:00  INFO 29048 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:41:02.233-03:00  INFO 29048 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:41:02.250-03:00  INFO 29048 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 29048 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:41:02.250-03:00 DEBUG 29048 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:41:02.250-03:00  INFO 29048 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:41:02.413-03:00  INFO 29048 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:41:02.426-03:00  INFO 29048 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 5 JPA repository interfaces.
2023-01-29T02:41:02.547-03:00  INFO 29048 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:41:02.549-03:00  INFO 29048 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:41:02.549-03:00  INFO 29048 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:41:02.583-03:00  INFO 29048 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:41:02.583-03:00  INFO 29048 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 331 ms
2023-01-29T02:41:02.609-03:00  INFO 29048 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:41:02.611-03:00  INFO 29048 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:9d45a049-6a2a-408b-9e45-1bef502108dd user=SA
2023-01-29T02:41:02.612-03:00  INFO 29048 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:41:02.639-03:00  INFO 29048 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:41:02.643-03:00  WARN 29048 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:41:02.648-03:00  INFO 29048 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:41:02.700-03:00  INFO 29048 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:41:02.700-03:00  INFO 29048 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:41:02.704-03:00  INFO 29048 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:41:02.820-03:00  WARN 29048 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:41:03.096-03:00  INFO 29048 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@60219a32, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@63792a7a, org.springframework.security.web.context.SecurityContextHolderFilter@4fa0e166, org.springframework.security.web.header.HeaderWriterFilter@1d691240, org.springframework.security.web.authentication.logout.LogoutFilter@12223f2b, com.example.ec.security.JwtTokenFilter@6911005b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@22c5c530, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@77eb383a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b7d363c, org.springframework.security.web.session.SessionManagementFilter@69789fec, org.springframework.security.web.access.ExceptionTranslationFilter@49648d97, org.springframework.security.web.access.intercept.AuthorizationFilter@30464500]
2023-01-29T02:41:03.177-03:00  INFO 29048 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53455 (http) with context path ''
2023-01-29T02:41:03.181-03:00  INFO 29048 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 0.945 seconds (process running for 9.999)
2023-01-29T02:41:03.216-03:00  INFO 29048 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:41:03.216-03:00  INFO 29048 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:41:03.217-03:00  INFO 29048 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:41:03.218-03:00  INFO 29048 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.238-03:00  INFO 29048 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg2MywiZXhwIjoxNjc0OTcxNDYzfQ.NwmOFxSGaEvgmj94qqDUBdlviLNXfZDZMjvwrBKfC70]
2023-01-29T02:41:03.281-03:00  INFO 29048 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.285-03:00  INFO 29048 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg2MywiZXhwIjoxNjc0OTcxNDYzfQ.NwmOFxSGaEvgmj94qqDUBdlviLNXfZDZMjvwrBKfC70]
2023-01-29T02:41:03.299-03:00  INFO 29048 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.300-03:00  INFO 29048 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:41:03.304-03:00 ERROR 29048 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:41:03.306-03:00  INFO 29048 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.306-03:00  INFO 29048 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:41:03.315-03:00  INFO 29048 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.319-03:00  INFO 29048 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwODYzLCJleHAiOjE2NzQ5NzE0NjN9.cQTq9XKUL_nPfYFsFIp-Y12vJqP47UdxndHdkZP_7M8]
2023-01-29T02:41:03.332-03:00  INFO 29048 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.335-03:00  INFO 29048 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwODYzLCJleHAiOjE2NzQ5NzE0NjN9.cQTq9XKUL_nPfYFsFIp-Y12vJqP47UdxndHdkZP_7M8]
2023-01-29T02:41:03.342-03:00  INFO 29048 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:41:03.344-03:00  INFO 29048 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:41:03.351-03:00  INFO 29048 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.355-03:00  INFO 29048 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg2MywiZXhwIjoxNjc0OTcxNDYzfQ.NwmOFxSGaEvgmj94qqDUBdlviLNXfZDZMjvwrBKfC70]
2023-01-29T02:41:03.358-03:00  INFO 29048 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:41:03.369-03:00  INFO 29048 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.369-03:00  INFO 29048 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:41:03.374-03:00  INFO 29048 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:41:03.407-03:00  INFO 29048 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.411-03:00  INFO 29048 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg2MywiZXhwIjoxNjc0OTcxNDYzfQ.NwmOFxSGaEvgmj94qqDUBdlviLNXfZDZMjvwrBKfC70]
2023-01-29T02:41:03.425-03:00  INFO 29048 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:41:03.440-03:00  INFO 29048 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.444-03:00  INFO 29048 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg2MywiZXhwIjoxNjc0OTcxNDYzfQ.NwmOFxSGaEvgmj94qqDUBdlviLNXfZDZMjvwrBKfC70]
2023-01-29T02:41:03.448-03:00  INFO 29048 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:41:03.458-03:00  INFO 29048 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.458-03:00  INFO 29048 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:41:03.460-03:00  INFO 29048 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:41:03.472-03:00  INFO 29048 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.476-03:00  INFO 29048 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg2MywiZXhwIjoxNjc0OTcxNDYzfQ.NwmOFxSGaEvgmj94qqDUBdlviLNXfZDZMjvwrBKfC70]
2023-01-29T02:41:03.480-03:00  INFO 29048 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:41:03.489-03:00  INFO 29048 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:03.493-03:00  INFO 29048 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg2MywiZXhwIjoxNjc0OTcxNDYzfQ.NwmOFxSGaEvgmj94qqDUBdlviLNXfZDZMjvwrBKfC70]
2023-01-29T02:41:03.495-03:00  INFO 29048 --- [http-nio-auto-1-exec-2] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:41:03.517-03:00  INFO 29048 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:41:03.518-03:00  INFO 29048 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:41:03.520-03:00  INFO 29048 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:41:03.536-03:00  INFO 29048 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:41:03.536-03:00  INFO 29048 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:41:03.537-03:00  INFO 29048 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:41:03.546-03:00  INFO 29048 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:41:03.547-03:00  INFO 29048 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:41:03.547-03:00  INFO 29048 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T02:41:26.088-03:00  INFO 28028 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 28028 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:41:26.089-03:00 DEBUG 28028 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:41:26.090-03:00  INFO 28028 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:41:26.747-03:00  INFO 28028 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:41:26.805-03:00  INFO 28028 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 52 ms. Found 5 JPA repository interfaces.
2023-01-29T02:41:27.251-03:00  INFO 28028 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T02:41:27.405-03:00  INFO 28028 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:7f154505-e7e7-4aa0-95ae-2e878a6b60b0 user=SA
2023-01-29T02:41:27.407-03:00  INFO 28028 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T02:41:27.553-03:00  INFO 28028 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:41:27.594-03:00  INFO 28028 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T02:41:27.632-03:00  WARN 28028 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:41:27.737-03:00  INFO 28028 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:41:28.303-03:00  INFO 28028 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:41:28.310-03:00  INFO 28028 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:41:28.324-03:00  INFO 28028 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:41:28.962-03:00  WARN 28028 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:41:29.846-03:00  INFO 28028 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6f87bc6c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@178f5b5b, org.springframework.security.web.context.SecurityContextHolderFilter@755057c7, org.springframework.security.web.header.HeaderWriterFilter@75e068dc, org.springframework.security.web.authentication.logout.LogoutFilter@4c25687b, com.example.ec.security.JwtTokenFilter@47baf547, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@70f37190, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1d642682, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@fffb4a8, org.springframework.security.web.session.SessionManagementFilter@4cce889e, org.springframework.security.web.access.ExceptionTranslationFilter@3299ee2c, org.springframework.security.web.access.intercept.AuthorizationFilter@4f66f2dd]
2023-01-29T02:41:30.279-03:00  INFO 28028 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.392 seconds (process running for 5.675)
2023-01-29T02:41:30.304-03:00  INFO 28028 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:41:30.310-03:00  INFO 28028 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T02:41:30.439-03:00  INFO 28028 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:41:30.444-03:00  INFO 28028 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T02:41:30.454-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:41:30.480-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:41:30.485-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T02:41:30.493-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:41:30.507-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:41:30.516-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:41:30.522-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:41:30.525-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T02:41:30.531-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:41:30.533-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T02:41:30.534-03:00 DEBUG 28028 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T02:41:30.535-03:00 DEBUG 28028 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T02:41:30.535-03:00 DEBUG 28028 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T02:41:30.536-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:41:30.541-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T02:41:30.686-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T02:41:30.690-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T02:41:30.697-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T02:41:30.700-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T02:41:30.702-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T02:41:30.702-03:00 DEBUG 28028 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T02:41:30.702-03:00 DEBUG 28028 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T02:41:30.705-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T02:41:30.707-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T02:41:30.750-03:00  INFO 28028 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T02:41:30.753-03:00  INFO 28028 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:41:30.753-03:00  INFO 28028 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T02:41:30.757-03:00  INFO 28028 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T02:41:30.759-03:00  INFO 28028 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T02:41:31.895-03:00  INFO 28028 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:41:31.902-03:00  INFO 28028 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T02:41:31.921-03:00  INFO 28028 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 28028 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:41:31.921-03:00 DEBUG 28028 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:41:31.921-03:00  INFO 28028 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:41:32.072-03:00  INFO 28028 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:41:32.084-03:00  INFO 28028 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T02:41:32.262-03:00  INFO 28028 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:41:32.271-03:00  INFO 28028 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:41:32.271-03:00  INFO 28028 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:41:32.340-03:00  INFO 28028 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T02:41:32.341-03:00  INFO 28028 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 419 ms
2023-01-29T02:41:32.403-03:00  INFO 28028 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T02:41:32.408-03:00  INFO 28028 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:66ec9f2f-e26e-4bc7-b6c7-8c0d8eb36005 user=SA
2023-01-29T02:41:32.408-03:00  INFO 28028 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T02:41:32.441-03:00  INFO 28028 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:41:32.443-03:00  WARN 28028 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:41:32.446-03:00  INFO 28028 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:41:32.501-03:00  INFO 28028 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:41:32.502-03:00  INFO 28028 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:41:32.505-03:00  INFO 28028 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:41:32.622-03:00  WARN 28028 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:41:33.396-03:00  INFO 28028 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6f475ede, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@353f73ac, org.springframework.security.web.context.SecurityContextHolderFilter@6cd9cafb, org.springframework.security.web.header.HeaderWriterFilter@5ace2ce3, org.springframework.security.web.authentication.logout.LogoutFilter@4c32d208, com.example.ec.security.JwtTokenFilter@2c47135c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3da20c42, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@16209621, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3faadc24, org.springframework.security.web.session.SessionManagementFilter@39c821c6, org.springframework.security.web.access.ExceptionTranslationFilter@56e0e953, org.springframework.security.web.access.intercept.AuthorizationFilter@735c0454]
2023-01-29T02:41:33.644-03:00  INFO 28028 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53472 (http) with context path ''
2023-01-29T02:41:33.648-03:00  INFO 28028 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 1.742 seconds (process running for 9.044)
2023-01-29T02:41:33.779-03:00  INFO 28028 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:41:33.780-03:00  INFO 28028 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:41:33.781-03:00  INFO 28028 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:41:33.788-03:00  INFO 28028 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:33.789-03:00  INFO 28028 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:41:33.811-03:00  INFO 28028 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T02:41:33.874-03:00  INFO 28028 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:33.874-03:00  INFO 28028 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:41:33.875-03:00  INFO 28028 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T02:41:33.885-03:00  INFO 28028 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:41:33.886-03:00  INFO 28028 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T02:41:33.910-03:00  INFO 28028 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:33.928-03:00  INFO 28028 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg5MywiZXhwIjoxNjc0OTcxNDkzfQ.mK-NK-VvoqZOT8M8NITRdzB7UlGwPAisQFKSS4x9pZc]
2023-01-29T02:41:33.937-03:00  INFO 28028 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T02:41:33.951-03:00  INFO 28028 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:33.951-03:00  INFO 28028 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:41:33.957-03:00  INFO 28028 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T02:41:33.984-03:00  INFO 28028 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:33.988-03:00  INFO 28028 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg5MywiZXhwIjoxNjc0OTcxNDkzfQ.mK-NK-VvoqZOT8M8NITRdzB7UlGwPAisQFKSS4x9pZc]
2023-01-29T02:41:34.021-03:00  INFO 28028 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T02:41:34.032-03:00  INFO 28028 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:34.035-03:00  INFO 28028 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg5NCwiZXhwIjoxNjc0OTcxNDk0fQ.R_O5GhsJcjtJu0MiHGTbPzf_k2Wrogj72PB0IW44US8]
2023-01-29T02:41:34.039-03:00  INFO 28028 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T02:41:34.047-03:00  INFO 28028 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:34.047-03:00  INFO 28028 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:41:34.048-03:00  INFO 28028 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T02:41:34.059-03:00  INFO 28028 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:34.062-03:00  INFO 28028 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg5NCwiZXhwIjoxNjc0OTcxNDk0fQ.R_O5GhsJcjtJu0MiHGTbPzf_k2Wrogj72PB0IW44US8]
2023-01-29T02:41:34.067-03:00  INFO 28028 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T02:41:34.076-03:00  INFO 28028 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:34.079-03:00  INFO 28028 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg5NCwiZXhwIjoxNjc0OTcxNDk0fQ.R_O5GhsJcjtJu0MiHGTbPzf_k2Wrogj72PB0IW44US8]
2023-01-29T02:41:34.081-03:00  INFO 28028 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T02:41:34.086-03:00  INFO 28028 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T02:41:34.088-03:00  INFO 28028 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T02:41:34.101-03:00  INFO 28028 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 28028 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T02:41:34.101-03:00 DEBUG 28028 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T02:41:34.101-03:00  INFO 28028 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T02:41:34.233-03:00  INFO 28028 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T02:41:34.243-03:00  INFO 28028 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T02:41:34.303-03:00  INFO 28028 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T02:41:34.304-03:00  INFO 28028 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T02:41:34.304-03:00  INFO 28028 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T02:41:34.326-03:00  INFO 28028 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T02:41:34.327-03:00  INFO 28028 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 225 ms
2023-01-29T02:41:34.371-03:00  INFO 28028 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T02:41:34.403-03:00  INFO 28028 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:17f63b05-4b05-4879-8882-2567256df3e5 user=SA
2023-01-29T02:41:34.403-03:00  INFO 28028 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T02:41:34.430-03:00  INFO 28028 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T02:41:34.433-03:00  WARN 28028 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T02:41:34.436-03:00  INFO 28028 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2023-01-29T02:41:34.482-03:00  INFO 28028 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T02:41:34.483-03:00  INFO 28028 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:41:34.486-03:00  INFO 28028 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T02:41:34.645-03:00  WARN 28028 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T02:41:35.583-03:00  INFO 28028 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@480f1b59, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2a28bf25, org.springframework.security.web.context.SecurityContextHolderFilter@5739e15e, org.springframework.security.web.header.HeaderWriterFilter@3a8c7347, org.springframework.security.web.authentication.logout.LogoutFilter@48455005, com.example.ec.security.JwtTokenFilter@35a7c477, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41f17bb7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@18be3e85, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@591e1df7, org.springframework.security.web.session.SessionManagementFilter@4cf08d08, org.springframework.security.web.access.ExceptionTranslationFilter@5028cec0, org.springframework.security.web.access.intercept.AuthorizationFilter@6b00eaae]
2023-01-29T02:41:35.722-03:00  INFO 28028 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 53476 (http) with context path ''
2023-01-29T02:41:35.725-03:00  INFO 28028 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.635 seconds (process running for 11.121)
2023-01-29T02:41:35.734-03:00  INFO 28028 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T02:41:35.734-03:00  INFO 28028 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T02:41:35.735-03:00  INFO 28028 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T02:41:35.735-03:00  INFO 28028 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:35.739-03:00  INFO 28028 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg5NSwiZXhwIjoxNjc0OTcxNDk1fQ.F-Fee4aIrYx9JnzyML_3GAJYdsDuL_rszWVHPd2QRVI]
2023-01-29T02:41:35.750-03:00  INFO 28028 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:35.753-03:00  INFO 28028 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NDk3MDg5NSwiZXhwIjoxNjc0OTcxNDk1fQ.F-Fee4aIrYx9JnzyML_3GAJYdsDuL_rszWVHPd2QRVI]
2023-01-29T02:41:35.762-03:00  INFO 28028 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:35.762-03:00  INFO 28028 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:41:35.766-03:00 ERROR 28028 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T02:41:35.769-03:00  INFO 28028 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:35.769-03:00  INFO 28028 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T02:41:35.775-03:00  INFO 28028 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:35.779-03:00  INFO 28028 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwODk1LCJleHAiOjE2NzQ5NzE0OTV9.sXln-coLItR12zAvqvm7T6qgoCZgm_gIP1qj5vmBLW8]
2023-01-29T02:41:35.789-03:00  INFO 28028 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T02:41:35.793-03:00  INFO 28028 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc0OTcwODk1LCJleHAiOjE2NzQ5NzE0OTV9.sXln-coLItR12zAvqvm7T6qgoCZgm_gIP1qj5vmBLW8]
2023-01-29T02:41:35.864-03:00  INFO 28028 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:41:35.865-03:00  INFO 28028 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T02:41:35.948-03:00  INFO 28028 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T02:41:35.961-03:00  INFO 28028 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:41:35.962-03:00  INFO 28028 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T02:41:36.020-03:00  INFO 28028 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T02:41:36.030-03:00  INFO 28028 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T02:41:36.030-03:00  INFO 28028 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T02:41:36.090-03:00  INFO 28028 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T11:12:50.006-03:00  INFO 16368 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 16368 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T11:12:50.020-03:00 DEBUG 16368 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T11:12:50.021-03:00  INFO 16368 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T11:12:50.767-03:00  INFO 16368 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T11:12:50.833-03:00  INFO 16368 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 58 ms. Found 5 JPA repository interfaces.
2023-01-29T11:12:51.344-03:00  INFO 16368 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T11:12:51.938-03:00  INFO 16368 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@149b53fa
2023-01-29T11:12:51.940-03:00  INFO 16368 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T11:12:52.871-03:00  INFO 16368 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T11:12:53.129-03:00  INFO 16368 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T11:12:53.177-03:00  WARN 16368 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T11:12:53.478-03:00  INFO 16368 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T11:12:54.072-03:00  INFO 16368 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T11:12:54.079-03:00  INFO 16368 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T11:12:54.095-03:00  INFO 16368 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T11:12:54.716-03:00  WARN 16368 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T11:12:55.602-03:00  INFO 16368 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2150dc64, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3f33c5e4, org.springframework.security.web.context.SecurityContextHolderFilter@33ed6546, org.springframework.security.web.header.HeaderWriterFilter@136480b, org.springframework.security.web.authentication.logout.LogoutFilter@63bb52ea, com.example.ec.security.JwtTokenFilter@258ff54a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5eb4b746, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4ed94e6a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@50c462b8, org.springframework.security.web.session.SessionManagementFilter@44046b0d, org.springframework.security.web.access.ExceptionTranslationFilter@24090832, org.springframework.security.web.access.intercept.AuthorizationFilter@47fb30ca]
2023-01-29T11:12:56.041-03:00  INFO 16368 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 6.25 seconds (process running for 8.048)
2023-01-29T11:12:56.066-03:00  INFO 16368 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T11:12:56.072-03:00  INFO 16368 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T11:12:56.246-03:00  INFO 16368 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T11:12:56.252-03:00  INFO 16368 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T11:12:56.264-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T11:12:56.298-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T11:12:56.307-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T11:12:56.319-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T11:12:56.339-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T11:12:56.353-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T11:12:56.367-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T11:12:56.375-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T11:12:56.388-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T11:12:56.396-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T11:12:56.397-03:00 DEBUG 16368 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T11:12:56.399-03:00 DEBUG 16368 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T11:12:56.401-03:00 DEBUG 16368 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T11:12:56.403-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T11:12:56.417-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T11:12:56.576-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T11:12:56.580-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T11:12:56.587-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T11:12:56.589-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T11:12:56.591-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T11:12:56.591-03:00 DEBUG 16368 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T11:12:56.592-03:00 DEBUG 16368 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T11:12:56.594-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T11:12:56.596-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T11:12:56.645-03:00  INFO 16368 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T11:12:56.648-03:00  INFO 16368 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T11:12:56.649-03:00  INFO 16368 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T11:12:56.657-03:00  INFO 16368 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T11:12:56.666-03:00  INFO 16368 --- [main] com.example.ec.service.UserService       : john doe is signing up with username: dummyUsername, password: dummypassword and role: ROLE_CSR.
2023-01-29T11:12:57.809-03:00  INFO 16368 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T11:12:57.818-03:00  INFO 16368 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T11:12:57.842-03:00  INFO 16368 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 16368 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T11:12:57.842-03:00 DEBUG 16368 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T11:12:57.842-03:00  INFO 16368 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T11:12:58.015-03:00  INFO 16368 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T11:12:58.027-03:00  INFO 16368 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T11:12:58.237-03:00  INFO 16368 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T11:12:58.246-03:00  INFO 16368 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T11:12:58.247-03:00  INFO 16368 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T11:12:58.319-03:00  INFO 16368 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T11:12:58.319-03:00  INFO 16368 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 475 ms
2023-01-29T11:12:58.386-03:00  INFO 16368 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T11:12:58.405-03:00  INFO 16368 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3e8742de
2023-01-29T11:12:58.406-03:00  INFO 16368 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T11:12:58.626-03:00  INFO 16368 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T11:12:58.629-03:00  WARN 16368 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T11:12:58.635-03:00  INFO 16368 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T11:12:58.691-03:00  INFO 16368 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T11:12:58.691-03:00  INFO 16368 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T11:12:58.696-03:00  INFO 16368 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T11:12:58.824-03:00  WARN 16368 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T11:12:59.608-03:00  INFO 16368 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4b96b0bd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@487befb, org.springframework.security.web.context.SecurityContextHolderFilter@3c7b89ae, org.springframework.security.web.header.HeaderWriterFilter@e08853d, org.springframework.security.web.authentication.logout.LogoutFilter@4251b1ed, com.example.ec.security.JwtTokenFilter@3f5743d9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1723640f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5dc83abb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@17a17af5, org.springframework.security.web.session.SessionManagementFilter@3828f303, org.springframework.security.web.access.ExceptionTranslationFilter@7efaa137, org.springframework.security.web.access.intercept.AuthorizationFilter@52df4036]
2023-01-29T11:13:00.094-03:00  INFO 16368 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 55864 (http) with context path ''
2023-01-29T11:13:00.097-03:00  INFO 16368 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 2.275 seconds (process running for 12.104)
2023-01-29T11:13:00.230-03:00  INFO 16368 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T11:13:00.230-03:00  INFO 16368 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T11:13:00.231-03:00  INFO 16368 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T11:13:00.240-03:00  INFO 16368 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:00.240-03:00  INFO 16368 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T11:13:00.263-03:00  INFO 16368 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T11:13:00.332-03:00  INFO 16368 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:00.332-03:00  INFO 16368 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T11:13:00.333-03:00  INFO 16368 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T11:13:00.343-03:00  INFO 16368 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T11:13:00.344-03:00  INFO 16368 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T11:13:00.372-03:00  INFO 16368 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:00.387-03:00  INFO 16368 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwMTU4MCwiZXhwIjoxNjc1MDAyMTgwfQ.Jex0WFllPUWdLmQ2kGtPR0RPfx1bXaqG9jlkRxIjyUg]
2023-01-29T11:13:00.396-03:00  INFO 16368 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T11:13:00.405-03:00  INFO 16368 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:00.405-03:00  INFO 16368 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T11:13:00.410-03:00  INFO 16368 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T11:13:00.435-03:00  INFO 16368 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:00.438-03:00  INFO 16368 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwMTU4MCwiZXhwIjoxNjc1MDAyMTgwfQ.Jex0WFllPUWdLmQ2kGtPR0RPfx1bXaqG9jlkRxIjyUg]
2023-01-29T11:13:00.469-03:00  INFO 16368 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T11:13:00.478-03:00  INFO 16368 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:00.481-03:00  INFO 16368 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwMTU4MCwiZXhwIjoxNjc1MDAyMTgwfQ.Jex0WFllPUWdLmQ2kGtPR0RPfx1bXaqG9jlkRxIjyUg]
2023-01-29T11:13:00.484-03:00  INFO 16368 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T11:13:00.491-03:00  INFO 16368 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:00.491-03:00  INFO 16368 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T11:13:00.493-03:00  INFO 16368 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T11:13:00.502-03:00  INFO 16368 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:00.505-03:00  INFO 16368 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwMTU4MCwiZXhwIjoxNjc1MDAyMTgwfQ.Jex0WFllPUWdLmQ2kGtPR0RPfx1bXaqG9jlkRxIjyUg]
2023-01-29T11:13:00.509-03:00  INFO 16368 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T11:13:00.516-03:00  INFO 16368 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:00.519-03:00  INFO 16368 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwMTU4MCwiZXhwIjoxNjc1MDAyMTgwfQ.Jex0WFllPUWdLmQ2kGtPR0RPfx1bXaqG9jlkRxIjyUg]
2023-01-29T11:13:00.522-03:00  INFO 16368 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T11:13:00.527-03:00  INFO 16368 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T11:13:00.528-03:00  INFO 16368 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T11:13:00.542-03:00  INFO 16368 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 16368 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T11:13:00.542-03:00 DEBUG 16368 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T11:13:00.542-03:00  INFO 16368 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T11:13:00.671-03:00  INFO 16368 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T11:13:00.680-03:00  INFO 16368 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T11:13:00.747-03:00  INFO 16368 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T11:13:00.748-03:00  INFO 16368 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T11:13:00.748-03:00  INFO 16368 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T11:13:00.772-03:00  INFO 16368 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T11:13:00.772-03:00  INFO 16368 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 229 ms
2023-01-29T11:13:00.822-03:00  INFO 16368 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T11:13:00.853-03:00  INFO 16368 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6cb84986
2023-01-29T11:13:00.854-03:00  INFO 16368 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T11:13:01.125-03:00  INFO 16368 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T11:13:01.128-03:00  WARN 16368 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T11:13:01.133-03:00  INFO 16368 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T11:13:01.185-03:00  INFO 16368 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T11:13:01.185-03:00  INFO 16368 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T11:13:01.189-03:00  INFO 16368 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T11:13:01.309-03:00  WARN 16368 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T11:13:02.107-03:00  INFO 16368 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@276ccfec, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6f76289d, org.springframework.security.web.context.SecurityContextHolderFilter@44474e84, org.springframework.security.web.header.HeaderWriterFilter@2da2bc89, org.springframework.security.web.authentication.logout.LogoutFilter@369fc9bd, com.example.ec.security.JwtTokenFilter@56a640a2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@375c6b98, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@f22cf0e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@697c0ae6, org.springframework.security.web.session.SessionManagementFilter@48d1fcd3, org.springframework.security.web.access.ExceptionTranslationFilter@41865dc1, org.springframework.security.web.access.intercept.AuthorizationFilter@7b088db5]
2023-01-29T11:13:02.201-03:00  INFO 16368 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 55878 (http) with context path ''
2023-01-29T11:13:02.204-03:00  INFO 16368 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.674 seconds (process running for 14.211)
2023-01-29T11:13:02.213-03:00  INFO 16368 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T11:13:02.213-03:00  INFO 16368 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T11:13:02.214-03:00  INFO 16368 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T11:13:02.214-03:00  INFO 16368 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:02.217-03:00  INFO 16368 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwMTU4MiwiZXhwIjoxNjc1MDAyMTgyfQ.tqVRwB_v29waBnm2ppnm_WsAOJz1BraI59ymW1qDuzQ]
2023-01-29T11:13:02.228-03:00  INFO 16368 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:02.230-03:00  INFO 16368 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwMTU4MiwiZXhwIjoxNjc1MDAyMTgyfQ.tqVRwB_v29waBnm2ppnm_WsAOJz1BraI59ymW1qDuzQ]
2023-01-29T11:13:02.240-03:00  INFO 16368 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:02.241-03:00  INFO 16368 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T11:13:02.244-03:00 ERROR 16368 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T11:13:02.247-03:00  INFO 16368 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:02.247-03:00  INFO 16368 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T11:13:02.255-03:00  INFO 16368 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:02.258-03:00  INFO 16368 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc1MDAxNTgyLCJleHAiOjE2NzUwMDIxODJ9.a7y9v7b7IMZaM-H3Nb-CjOz4WPAOiRdiLXHTR8C_8ro]
2023-01-29T11:13:02.269-03:00  INFO 16368 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T11:13:02.271-03:00  INFO 16368 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc1MDAxNTgyLCJleHAiOjE2NzUwMDIxODJ9.a7y9v7b7IMZaM-H3Nb-CjOz4WPAOiRdiLXHTR8C_8ro]
2023-01-29T11:13:02.315-03:00  INFO 16368 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T11:13:02.317-03:00  INFO 16368 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T11:13:02.387-03:00  INFO 16368 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T11:13:02.421-03:00  INFO 16368 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T11:13:02.422-03:00  INFO 16368 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T11:13:02.482-03:00  INFO 16368 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T11:13:02.491-03:00  INFO 16368 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T11:13:02.491-03:00  INFO 16368 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T11:13:02.539-03:00  INFO 16368 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T13:28:52.650-03:00  INFO 18348 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 18348 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:28:52.651-03:00 DEBUG 18348 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:28:52.652-03:00  INFO 18348 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:28:53.371-03:00  INFO 18348 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:28:53.438-03:00  INFO 18348 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 59 ms. Found 5 JPA repository interfaces.
2023-01-29T13:28:53.889-03:00  INFO 18348 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T13:28:54.234-03:00  INFO 18348 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@bfd97fb
2023-01-29T13:28:54.236-03:00  INFO 18348 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T13:28:54.599-03:00  INFO 18348 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T13:28:54.655-03:00  INFO 18348 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T13:28:54.706-03:00  WARN 18348 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T13:28:54.841-03:00  INFO 18348 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T13:28:55.444-03:00  INFO 18348 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T13:28:55.453-03:00  INFO 18348 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:28:55.468-03:00  INFO 18348 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T13:28:56.153-03:00  WARN 18348 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T13:28:57.125-03:00  INFO 18348 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@535b016, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@359b4846, org.springframework.security.web.context.SecurityContextHolderFilter@5713e35f, org.springframework.security.web.header.HeaderWriterFilter@5eb4b746, org.springframework.security.web.authentication.logout.LogoutFilter@7fb02869, com.example.ec.security.JwtTokenFilter@79122f5f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@c42ee90, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@70c2a046, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5f59b6c5, org.springframework.security.web.session.SessionManagementFilter@4f50e974, org.springframework.security.web.access.ExceptionTranslationFilter@6529b078, org.springframework.security.web.access.intercept.AuthorizationFilter@632a7680]
2023-01-29T13:28:57.693-03:00  INFO 18348 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 5.252 seconds (process running for 6.695)
2023-01-29T13:28:57.724-03:00  INFO 18348 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:28:57.732-03:00  INFO 18348 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T13:28:57.885-03:00  INFO 18348 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:28:57.891-03:00  INFO 18348 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T13:28:57.906-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T13:28:57.944-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:28:57.953-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T13:28:57.963-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:28:57.994-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T13:28:58.009-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T13:28:58.023-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T13:28:58.031-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T13:28:58.046-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:28:58.054-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T13:28:58.055-03:00 DEBUG 18348 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T13:28:58.058-03:00 DEBUG 18348 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T13:28:58.060-03:00 DEBUG 18348 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T13:28:58.063-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:28:58.078-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T13:28:58.250-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T13:28:58.256-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T13:28:58.262-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T13:28:58.266-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T13:28:58.268-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T13:28:58.269-03:00 DEBUG 18348 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T13:28:58.269-03:00 DEBUG 18348 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T13:28:58.271-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T13:28:58.273-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:28:58.322-03:00  INFO 18348 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T13:28:58.324-03:00  INFO 18348 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:28:58.325-03:00  INFO 18348 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T13:28:58.331-03:00  INFO 18348 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T13:28:58.495-03:00  INFO 18348 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:28:58.504-03:00  INFO 18348 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T13:28:58.535-03:00  INFO 18348 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 18348 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:28:58.535-03:00 DEBUG 18348 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:28:58.535-03:00  INFO 18348 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:28:58.701-03:00  INFO 18348 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:28:58.711-03:00  INFO 18348 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T13:28:58.886-03:00  INFO 18348 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:28:58.895-03:00  INFO 18348 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:28:58.895-03:00  INFO 18348 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:28:58.977-03:00  INFO 18348 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T13:28:58.978-03:00  INFO 18348 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 441 ms
2023-01-29T13:28:59.073-03:00  INFO 18348 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T13:28:59.101-03:00  INFO 18348 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7dc779bb
2023-01-29T13:28:59.102-03:00  INFO 18348 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T13:28:59.392-03:00  INFO 18348 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T13:28:59.394-03:00  WARN 18348 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T13:28:59.401-03:00  INFO 18348 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T13:28:59.473-03:00  INFO 18348 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T13:28:59.474-03:00  INFO 18348 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:28:59.478-03:00  INFO 18348 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T13:28:59.617-03:00  WARN 18348 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T13:29:00.604-03:00  INFO 18348 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@479f5c35, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@37264d08, org.springframework.security.web.context.SecurityContextHolderFilter@207283b4, org.springframework.security.web.header.HeaderWriterFilter@64e06cf0, org.springframework.security.web.authentication.logout.LogoutFilter@3d49b00e, com.example.ec.security.JwtTokenFilter@194e116d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6b6d68d2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c8d0ea3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3471bdfd, org.springframework.security.web.session.SessionManagementFilter@6e9d60e1, org.springframework.security.web.access.ExceptionTranslationFilter@3a4e3343, org.springframework.security.web.access.intercept.AuthorizationFilter@59fe8d94]
2023-01-29T13:29:00.835-03:00  INFO 18348 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 57963 (http) with context path ''
2023-01-29T13:29:00.838-03:00  INFO 18348 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 2.328 seconds (process running for 9.839)
2023-01-29T13:29:00.973-03:00  INFO 18348 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T13:29:00.973-03:00  INFO 18348 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T13:29:00.975-03:00  INFO 18348 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T13:29:00.983-03:00  INFO 18348 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:00.983-03:00  INFO 18348 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:29:01.004-03:00  INFO 18348 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T13:29:01.068-03:00  INFO 18348 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:01.068-03:00  INFO 18348 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:29:01.069-03:00  INFO 18348 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T13:29:01.080-03:00  INFO 18348 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:29:01.082-03:00  INFO 18348 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T13:29:01.111-03:00  INFO 18348 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:01.129-03:00  INFO 18348 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc0MSwiZXhwIjoxNjc1MDEwMzQxfQ.HrbEc_EaVOrVcO6mhFav7QalmLyGvOqgoZuk60a0qGM]
2023-01-29T13:29:01.147-03:00  INFO 18348 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T13:29:01.160-03:00  INFO 18348 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:01.161-03:00  INFO 18348 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:29:01.169-03:00  INFO 18348 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T13:29:01.205-03:00  INFO 18348 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:01.209-03:00  INFO 18348 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc0MSwiZXhwIjoxNjc1MDEwMzQxfQ.HrbEc_EaVOrVcO6mhFav7QalmLyGvOqgoZuk60a0qGM]
2023-01-29T13:29:01.251-03:00  INFO 18348 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T13:29:01.267-03:00  INFO 18348 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:01.273-03:00  INFO 18348 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc0MSwiZXhwIjoxNjc1MDEwMzQxfQ.HrbEc_EaVOrVcO6mhFav7QalmLyGvOqgoZuk60a0qGM]
2023-01-29T13:29:01.279-03:00  INFO 18348 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T13:29:01.289-03:00  INFO 18348 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:01.290-03:00  INFO 18348 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:29:01.292-03:00  INFO 18348 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T13:29:01.304-03:00  INFO 18348 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:01.307-03:00  INFO 18348 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc0MSwiZXhwIjoxNjc1MDEwMzQxfQ.HrbEc_EaVOrVcO6mhFav7QalmLyGvOqgoZuk60a0qGM]
2023-01-29T13:29:01.313-03:00  INFO 18348 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T13:29:01.321-03:00  INFO 18348 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:01.325-03:00  INFO 18348 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc0MSwiZXhwIjoxNjc1MDEwMzQxfQ.HrbEc_EaVOrVcO6mhFav7QalmLyGvOqgoZuk60a0qGM]
2023-01-29T13:29:01.327-03:00  INFO 18348 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T13:29:01.332-03:00  INFO 18348 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:29:01.334-03:00  INFO 18348 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T13:29:01.348-03:00  INFO 18348 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 18348 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:29:01.348-03:00 DEBUG 18348 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:29:01.349-03:00  INFO 18348 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:29:01.482-03:00  INFO 18348 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:29:01.493-03:00  INFO 18348 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T13:29:01.567-03:00  INFO 18348 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:29:01.568-03:00  INFO 18348 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:29:01.568-03:00  INFO 18348 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:29:01.592-03:00  INFO 18348 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T13:29:01.592-03:00  INFO 18348 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 242 ms
2023-01-29T13:29:01.693-03:00  INFO 18348 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T13:29:01.790-03:00  INFO 18348 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3a182eaf
2023-01-29T13:29:01.791-03:00  INFO 18348 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T13:29:02.404-03:00  INFO 18348 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T13:29:02.406-03:00  WARN 18348 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T13:29:02.411-03:00  INFO 18348 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T13:29:02.457-03:00  INFO 18348 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T13:29:02.457-03:00  INFO 18348 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:29:02.460-03:00  INFO 18348 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T13:29:02.586-03:00  WARN 18348 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T13:29:05.858-03:00  INFO 18348 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@40d2a644, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@56fe2233, org.springframework.security.web.context.SecurityContextHolderFilter@c005d62, org.springframework.security.web.header.HeaderWriterFilter@2892b704, org.springframework.security.web.authentication.logout.LogoutFilter@754c6edb, com.example.ec.security.JwtTokenFilter@6e879a78, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@451f5e53, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7808fb63, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@882364e, org.springframework.security.web.session.SessionManagementFilter@6b2d01e2, org.springframework.security.web.access.ExceptionTranslationFilter@4631ecf5, org.springframework.security.web.access.intercept.AuthorizationFilter@75f27234]
2023-01-29T13:29:06.003-03:00  INFO 18348 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 57980 (http) with context path ''
2023-01-29T13:29:06.006-03:00  INFO 18348 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 4.67 seconds (process running for 15.007)
2023-01-29T13:29:06.015-03:00  INFO 18348 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T13:29:06.015-03:00  INFO 18348 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T13:29:06.016-03:00  INFO 18348 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T13:29:06.016-03:00  INFO 18348 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:06.019-03:00  INFO 18348 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc0NiwiZXhwIjoxNjc1MDEwMzQ2fQ.iyZl5FHnid_VO01lDFbqCQnclgfvZ4dd2kMlf77f23g]
2023-01-29T13:29:06.029-03:00  INFO 18348 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:06.031-03:00  INFO 18348 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc0NiwiZXhwIjoxNjc1MDEwMzQ2fQ.iyZl5FHnid_VO01lDFbqCQnclgfvZ4dd2kMlf77f23g]
2023-01-29T13:29:06.040-03:00  INFO 18348 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:06.040-03:00  INFO 18348 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:29:06.044-03:00 ERROR 18348 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T13:29:06.046-03:00  INFO 18348 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:06.046-03:00  INFO 18348 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:29:06.053-03:00  INFO 18348 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:06.056-03:00  INFO 18348 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc1MDA5NzQ2LCJleHAiOjE2NzUwMTAzNDZ9.QZXhc8u99JolQ-doPXuPbV4H7ZtwksMaUWRMmTiyMA0]
2023-01-29T13:29:06.065-03:00  INFO 18348 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:06.068-03:00  INFO 18348 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc1MDA5NzQ2LCJleHAiOjE2NzUwMTAzNDZ9.QZXhc8u99JolQ-doPXuPbV4H7ZtwksMaUWRMmTiyMA0]
2023-01-29T13:29:06.210-03:00  INFO 18348 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:29:06.211-03:00  INFO 18348 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T13:29:06.401-03:00  INFO 18348 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T13:29:06.415-03:00  INFO 18348 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:29:06.416-03:00  INFO 18348 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T13:29:06.583-03:00  INFO 18348 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T13:29:06.594-03:00  INFO 18348 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:29:06.595-03:00  INFO 18348 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T13:29:06.736-03:00  INFO 18348 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T13:29:37.001-03:00  INFO 11856 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 11856 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:29:37.002-03:00 DEBUG 11856 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:29:37.002-03:00  INFO 11856 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:29:37.717-03:00  INFO 11856 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:29:37.777-03:00  INFO 11856 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 51 ms. Found 5 JPA repository interfaces.
2023-01-29T13:29:38.208-03:00  INFO 11856 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T13:29:38.545-03:00  INFO 11856 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4e3283f6
2023-01-29T13:29:38.546-03:00  INFO 11856 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T13:29:38.960-03:00  INFO 11856 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T13:29:39.008-03:00  INFO 11856 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T13:29:39.152-03:00  WARN 11856 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T13:29:39.300-03:00  INFO 11856 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T13:29:40.005-03:00  INFO 11856 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T13:29:40.011-03:00  INFO 11856 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:29:40.028-03:00  INFO 11856 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T13:29:40.645-03:00  WARN 11856 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T13:29:41.600-03:00  INFO 11856 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@37e967df, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@16a89351, org.springframework.security.web.context.SecurityContextHolderFilter@62d72091, org.springframework.security.web.header.HeaderWriterFilter@523e019c, org.springframework.security.web.authentication.logout.LogoutFilter@45f32b12, com.example.ec.security.JwtTokenFilter@395854dd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b863b4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2524f9bf, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@53b60595, org.springframework.security.web.session.SessionManagementFilter@ea3491d, org.springframework.security.web.access.ExceptionTranslationFilter@6abbdcde, org.springframework.security.web.access.intercept.AuthorizationFilter@19370af1]
2023-01-29T13:29:42.056-03:00  INFO 11856 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 5.217 seconds (process running for 6.538)
2023-01-29T13:29:42.227-03:00  INFO 11856 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:29:42.234-03:00  INFO 11856 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T13:29:42.389-03:00  INFO 11856 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:29:42.396-03:00  INFO 11856 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T13:29:42.421-03:00  INFO 11856 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T13:29:42.619-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T13:29:42.629-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T13:29:42.641-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T13:29:42.646-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T13:29:42.650-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T13:29:42.651-03:00 DEBUG 11856 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T13:29:42.651-03:00 DEBUG 11856 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T13:29:42.655-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T13:29:42.659-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:29:42.707-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T13:29:42.710-03:00  INFO 11856 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:29:42.712-03:00  INFO 11856 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T13:29:42.720-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T13:29:42.765-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:29:42.775-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T13:29:42.785-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:29:42.808-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T13:29:42.824-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T13:29:42.839-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T13:29:42.848-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T13:29:42.862-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:29:42.871-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T13:29:42.871-03:00 DEBUG 11856 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T13:29:42.874-03:00 DEBUG 11856 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T13:29:42.876-03:00 DEBUG 11856 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T13:29:42.879-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:29:42.893-03:00  INFO 11856 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T13:29:42.929-03:00  INFO 11856 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:29:42.939-03:00  INFO 11856 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T13:29:42.968-03:00  INFO 11856 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 11856 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:29:42.968-03:00 DEBUG 11856 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:29:42.969-03:00  INFO 11856 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:29:43.146-03:00  INFO 11856 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:29:43.160-03:00  INFO 11856 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 5 JPA repository interfaces.
2023-01-29T13:29:43.335-03:00  INFO 11856 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:29:43.345-03:00  INFO 11856 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:29:43.345-03:00  INFO 11856 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:29:43.415-03:00  INFO 11856 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T13:29:43.415-03:00  INFO 11856 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 445 ms
2023-01-29T13:29:43.475-03:00  INFO 11856 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T13:29:43.493-03:00  INFO 11856 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@8c68f7f
2023-01-29T13:29:43.494-03:00  INFO 11856 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T13:29:43.759-03:00  INFO 11856 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T13:29:43.763-03:00  WARN 11856 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T13:29:43.770-03:00  INFO 11856 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T13:29:43.837-03:00  INFO 11856 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T13:29:43.837-03:00  INFO 11856 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:29:43.842-03:00  INFO 11856 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T13:29:43.962-03:00  WARN 11856 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T13:29:44.326-03:00  INFO 11856 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@48adb967, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@136cd71b, org.springframework.security.web.context.SecurityContextHolderFilter@19e86461, org.springframework.security.web.header.HeaderWriterFilter@3532f633, org.springframework.security.web.authentication.logout.LogoutFilter@69765d94, com.example.ec.security.JwtTokenFilter@631f188a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@31475919, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@13e6b26c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@285bee4e, org.springframework.security.web.session.SessionManagementFilter@6d49bd08, org.springframework.security.web.access.ExceptionTranslationFilter@6a4859fc, org.springframework.security.web.access.intercept.AuthorizationFilter@44a1e5d2]
2023-01-29T13:29:44.536-03:00  INFO 11856 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 58031 (http) with context path ''
2023-01-29T13:29:44.539-03:00  INFO 11856 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 1.596 seconds (process running for 9.021)
2023-01-29T13:29:44.695-03:00  INFO 11856 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T13:29:44.695-03:00  INFO 11856 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T13:29:44.696-03:00  INFO 11856 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T13:29:44.704-03:00  INFO 11856 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:44.727-03:00  INFO 11856 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc4NCwiZXhwIjoxNjc1MDEwMzg0fQ.iXy6oM0DXLtzV2VsgZQm-L6tVitlU_IuVbjvImynhYY]
2023-01-29T13:29:44.786-03:00  INFO 11856 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:44.790-03:00  INFO 11856 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc4NCwiZXhwIjoxNjc1MDEwMzg0fQ.iXy6oM0DXLtzV2VsgZQm-L6tVitlU_IuVbjvImynhYY]
2023-01-29T13:29:44.818-03:00  INFO 11856 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:44.818-03:00  INFO 11856 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:29:44.823-03:00 ERROR 11856 --- [http-nio-auto-1-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T13:29:44.825-03:00  INFO 11856 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:44.825-03:00  INFO 11856 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:29:44.837-03:00  INFO 11856 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:44.841-03:00  INFO 11856 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc1MDA5Nzg0LCJleHAiOjE2NzUwMTAzODR9.wSN1ERKiQdyqPOEb7Ta01aNR0WDe820G6AoBRAg1KNA]
2023-01-29T13:29:44.862-03:00  INFO 11856 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:44.867-03:00  INFO 11856 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc1MDA5Nzg0LCJleHAiOjE2NzUwMTAzODR9.wSN1ERKiQdyqPOEb7Ta01aNR0WDe820G6AoBRAg1KNA]
2023-01-29T13:29:44.880-03:00  INFO 11856 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:29:44.882-03:00  INFO 11856 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T13:29:44.911-03:00  INFO 11856 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 11856 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:29:44.912-03:00 DEBUG 11856 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:29:44.912-03:00  INFO 11856 --- [main] c.e.ec.web.TourRatingControllerTest      : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:29:45.228-03:00  INFO 11856 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:29:45.247-03:00  INFO 11856 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 5 JPA repository interfaces.
2023-01-29T13:29:45.374-03:00  INFO 11856 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:29:45.375-03:00  INFO 11856 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:29:45.376-03:00  INFO 11856 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:29:45.408-03:00  INFO 11856 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T13:29:45.408-03:00  INFO 11856 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 493 ms
2023-01-29T13:29:45.433-03:00  INFO 11856 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T13:29:45.450-03:00  INFO 11856 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4731c9af
2023-01-29T13:29:45.450-03:00  INFO 11856 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T13:29:45.758-03:00  INFO 11856 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T13:29:45.763-03:00  WARN 11856 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T13:29:45.770-03:00  INFO 11856 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T13:29:45.833-03:00  INFO 11856 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T13:29:45.833-03:00  INFO 11856 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:29:45.836-03:00  INFO 11856 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T13:29:45.931-03:00  WARN 11856 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T13:29:46.240-03:00  INFO 11856 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@74889ebe, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7f52aba0, org.springframework.security.web.context.SecurityContextHolderFilter@3269e790, org.springframework.security.web.header.HeaderWriterFilter@34dcad0d, org.springframework.security.web.authentication.logout.LogoutFilter@394642e5, com.example.ec.security.JwtTokenFilter@6ae67bf6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@42eeb996, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@138bd003, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@47fa54d, org.springframework.security.web.session.SessionManagementFilter@5ab1b065, org.springframework.security.web.access.ExceptionTranslationFilter@30081ff4, org.springframework.security.web.access.intercept.AuthorizationFilter@4395bc43]
2023-01-29T13:29:46.350-03:00  INFO 11856 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 58046 (http) with context path ''
2023-01-29T13:29:46.356-03:00  INFO 11856 --- [main] c.e.ec.web.TourRatingControllerTest      : Started TourRatingControllerTest in 1.467 seconds (process running for 10.837)
2023-01-29T13:29:46.373-03:00  INFO 11856 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T13:29:46.373-03:00  INFO 11856 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T13:29:46.375-03:00  INFO 11856 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-01-29T13:29:46.376-03:00  INFO 11856 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:46.381-03:00  INFO 11856 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc4NiwiZXhwIjoxNjc1MDEwMzg2fQ.35n1c-nq3eGWKIFT7f2GxtjUvijztT28BBRIcuzPtLI]
2023-01-29T13:29:46.385-03:00  INFO 11856 --- [http-nio-auto-2-exec-1] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T13:29:46.397-03:00  INFO 11856 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:46.398-03:00  INFO 11856 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:29:46.404-03:00  INFO 11856 --- [http-nio-auto-2-exec-2] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T13:29:46.493-03:00  INFO 11856 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:46.497-03:00  INFO 11856 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc4NiwiZXhwIjoxNjc1MDEwMzg2fQ.35n1c-nq3eGWKIFT7f2GxtjUvijztT28BBRIcuzPtLI]
2023-01-29T13:29:46.518-03:00  INFO 11856 --- [http-nio-auto-2-exec-3] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T13:29:46.533-03:00  INFO 11856 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:46.538-03:00  INFO 11856 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc4NiwiZXhwIjoxNjc1MDEwMzg2fQ.35n1c-nq3eGWKIFT7f2GxtjUvijztT28BBRIcuzPtLI]
2023-01-29T13:29:46.542-03:00  INFO 11856 --- [http-nio-auto-2-exec-4] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T13:29:46.551-03:00  INFO 11856 --- [http-nio-auto-2-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:46.551-03:00  INFO 11856 --- [http-nio-auto-2-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:29:46.553-03:00  INFO 11856 --- [http-nio-auto-2-exec-5] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T13:29:46.563-03:00  INFO 11856 --- [http-nio-auto-2-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:46.568-03:00  INFO 11856 --- [http-nio-auto-2-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc4NiwiZXhwIjoxNjc1MDEwMzg2fQ.35n1c-nq3eGWKIFT7f2GxtjUvijztT28BBRIcuzPtLI]
2023-01-29T13:29:46.572-03:00  INFO 11856 --- [http-nio-auto-2-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T13:29:46.582-03:00  INFO 11856 --- [http-nio-auto-2-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:46.586-03:00  INFO 11856 --- [http-nio-auto-2-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTc4NiwiZXhwIjoxNjc1MDEwMzg2fQ.35n1c-nq3eGWKIFT7f2GxtjUvijztT28BBRIcuzPtLI]
2023-01-29T13:29:46.588-03:00  INFO 11856 --- [http-nio-auto-2-exec-7] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T13:29:46.597-03:00  INFO 11856 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:29:46.598-03:00  INFO 11856 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T13:29:46.615-03:00  INFO 11856 --- [http-nio-auto-2-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:46.615-03:00  INFO 11856 --- [http-nio-auto-2-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:29:46.616-03:00  INFO 11856 --- [http-nio-auto-2-exec-8] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T13:29:46.632-03:00  INFO 11856 --- [http-nio-auto-2-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:29:46.633-03:00  INFO 11856 --- [http-nio-auto-2-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:29:46.634-03:00  INFO 11856 --- [http-nio-auto-2-exec-9] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T13:29:46.721-03:00  INFO 11856 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:29:46.722-03:00  INFO 11856 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T13:29:46.735-03:00  INFO 11856 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T13:29:46.750-03:00  INFO 11856 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:29:46.751-03:00  INFO 11856 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T13:29:46.762-03:00  INFO 11856 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T13:29:46.771-03:00  INFO 11856 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:29:46.772-03:00  INFO 11856 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T13:29:46.782-03:00  INFO 11856 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T13:31:32.939-03:00  INFO 11044 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 11044 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:31:32.940-03:00 DEBUG 11044 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:31:32.940-03:00  INFO 11044 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:31:33.619-03:00  INFO 11044 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:31:33.673-03:00  INFO 11044 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 47 ms. Found 5 JPA repository interfaces.
2023-01-29T13:31:34.085-03:00  INFO 11044 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T13:31:34.413-03:00  INFO 11044 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4e85dcb2
2023-01-29T13:31:34.415-03:00  INFO 11044 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T13:31:34.841-03:00  INFO 11044 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T13:31:34.883-03:00  INFO 11044 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T13:31:34.916-03:00  WARN 11044 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T13:31:35.056-03:00  INFO 11044 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T13:31:35.656-03:00  INFO 11044 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T13:31:35.662-03:00  INFO 11044 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:31:35.677-03:00  INFO 11044 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T13:31:36.284-03:00  WARN 11044 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T13:31:37.177-03:00  INFO 11044 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@69c7fe78, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1ffe7c42, org.springframework.security.web.context.SecurityContextHolderFilter@7cecd959, org.springframework.security.web.header.HeaderWriterFilter@794b139b, org.springframework.security.web.authentication.logout.LogoutFilter@4cce421e, com.example.ec.security.JwtTokenFilter@5f72aaed, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2150dc64, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3f33c5e4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1d9295e2, org.springframework.security.web.session.SessionManagementFilter@31d64d0f, org.springframework.security.web.access.ExceptionTranslationFilter@76ecbfbf, org.springframework.security.web.access.intercept.AuthorizationFilter@3c4940d2]
2023-01-29T13:31:37.590-03:00  INFO 11044 --- [main] c.e.ec.ExplorecaliApplicationTests       : Started ExplorecaliApplicationTests in 4.833 seconds (process running for 7.001)
2023-01-29T13:31:37.613-03:00  INFO 11044 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:31:37.618-03:00  INFO 11044 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T13:31:37.768-03:00  INFO 11044 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:31:37.773-03:00  INFO 11044 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T13:31:37.785-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T13:31:37.819-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:31:37.827-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 4
2023-01-29T13:31:37.837-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:31:37.860-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T13:31:37.876-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T13:31:37.889-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T13:31:37.896-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 456
2023-01-29T13:31:37.907-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:31:37.916-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [100, 101, 102]
2023-01-29T13:31:37.916-03:00 DEBUG 11044 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 100
2023-01-29T13:31:37.918-03:00 DEBUG 11044 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 101
2023-01-29T13:31:37.920-03:00 DEBUG 11044 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 102
2023-01-29T13:31:37.922-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:31:37.934-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 456
2023-01-29T13:31:38.090-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T13:31:38.094-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T13:31:38.101-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T13:31:38.103-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T13:31:38.105-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T13:31:38.106-03:00 DEBUG 11044 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T13:31:38.106-03:00 DEBUG 11044 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T13:31:38.108-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T13:31:38.111-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:31:38.160-03:00  INFO 11044 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T13:31:38.163-03:00  INFO 11044 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:31:38.164-03:00  INFO 11044 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T13:31:38.170-03:00  INFO 11044 --- [main] com.example.ec.service.UserService       : New user attempting to sign in
2023-01-29T13:31:38.302-03:00  INFO 11044 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:31:38.309-03:00  INFO 11044 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T13:31:38.328-03:00  INFO 11044 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 11044 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:31:38.328-03:00 DEBUG 11044 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:31:38.328-03:00  INFO 11044 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:31:38.469-03:00  INFO 11044 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:31:38.480-03:00  INFO 11044 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T13:31:38.653-03:00  INFO 11044 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:31:38.663-03:00  INFO 11044 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:31:38.663-03:00  INFO 11044 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:31:38.722-03:00  INFO 11044 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T13:31:38.722-03:00  INFO 11044 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 392 ms
2023-01-29T13:31:38.779-03:00  INFO 11044 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T13:31:38.803-03:00  INFO 11044 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@391720c3
2023-01-29T13:31:38.803-03:00  INFO 11044 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T13:31:39.069-03:00  INFO 11044 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T13:31:39.072-03:00  WARN 11044 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T13:31:39.077-03:00  INFO 11044 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T13:31:39.127-03:00  INFO 11044 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T13:31:39.127-03:00  INFO 11044 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:31:39.132-03:00  INFO 11044 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T13:31:39.264-03:00  WARN 11044 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T13:31:39.915-03:00  INFO 11044 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@56cd8903, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd0d62f, org.springframework.security.web.context.SecurityContextHolderFilter@3f78a75, org.springframework.security.web.header.HeaderWriterFilter@5cf21908, org.springframework.security.web.authentication.logout.LogoutFilter@57a94530, com.example.ec.security.JwtTokenFilter@71ebd1d9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4819a11f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@46fdb4d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@49f82f95, org.springframework.security.web.session.SessionManagementFilter@44d51c85, org.springframework.security.web.access.ExceptionTranslationFilter@65d5de1a, org.springframework.security.web.access.intercept.AuthorizationFilter@28f20b2a]
2023-01-29T13:31:40.509-03:00  INFO 11044 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 58122 (http) with context path ''
2023-01-29T13:31:40.512-03:00  INFO 11044 --- [main] c.example.ec.web.RatingControllerTest    : Started RatingControllerTest in 2.201 seconds (process running for 9.923)
2023-01-29T13:31:40.636-03:00  INFO 11044 --- [http-nio-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T13:31:40.636-03:00  INFO 11044 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T13:31:40.637-03:00  INFO 11044 --- [http-nio-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T13:31:40.644-03:00  INFO 11044 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:40.645-03:00  INFO 11044 --- [http-nio-auto-1-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:31:40.667-03:00  INFO 11044 --- [http-nio-auto-1-exec-1] com.example.ec.web.RatingController      : GET /ratings/{id}
2023-01-29T13:31:40.728-03:00  INFO 11044 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:40.729-03:00  INFO 11044 --- [http-nio-auto-1-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:31:40.729-03:00  INFO 11044 --- [http-nio-auto-1-exec-2] com.example.ec.web.RatingController      : GET /ratings
2023-01-29T13:31:40.738-03:00  INFO 11044 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:31:40.739-03:00  INFO 11044 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T13:31:40.766-03:00  INFO 11044 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:40.782-03:00  INFO 11044 --- [http-nio-auto-1-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTkwMCwiZXhwIjoxNjc1MDEwNTAwfQ.gbfBKzLmYrJu24ANKfrdwBRiI7IHD7BnmsbrM4gWKb4]
2023-01-29T13:31:40.791-03:00  INFO 11044 --- [http-nio-auto-1-exec-3] c.example.ec.web.TourRatingController    : DELETE /tours/999/ratings/1000
2023-01-29T13:31:40.800-03:00  INFO 11044 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:40.800-03:00  INFO 11044 --- [http-nio-auto-1-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:31:40.805-03:00  INFO 11044 --- [http-nio-auto-1-exec-4] c.example.ec.web.TourRatingController    : GET /tours/999/ratings
2023-01-29T13:31:40.831-03:00  INFO 11044 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:40.835-03:00  INFO 11044 --- [http-nio-auto-1-exec-5] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTkwMCwiZXhwIjoxNjc1MDEwNTAwfQ.gbfBKzLmYrJu24ANKfrdwBRiI7IHD7BnmsbrM4gWKb4]
2023-01-29T13:31:40.870-03:00  INFO 11044 --- [http-nio-auto-1-exec-5] c.example.ec.web.TourRatingController    : PUT /tours/999/ratings
2023-01-29T13:31:40.878-03:00  INFO 11044 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:40.882-03:00  INFO 11044 --- [http-nio-auto-1-exec-6] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTkwMCwiZXhwIjoxNjc1MDEwNTAwfQ.gbfBKzLmYrJu24ANKfrdwBRiI7IHD7BnmsbrM4gWKb4]
2023-01-29T13:31:40.885-03:00  INFO 11044 --- [http-nio-auto-1-exec-6] c.example.ec.web.TourRatingController    : POST /tours/999/ratings
2023-01-29T13:31:40.891-03:00  INFO 11044 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:40.891-03:00  INFO 11044 --- [http-nio-auto-1-exec-7] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:31:40.893-03:00  INFO 11044 --- [http-nio-auto-1-exec-7] c.example.ec.web.TourRatingController    : GET /tours/999/ratings/average
2023-01-29T13:31:40.901-03:00  INFO 11044 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:40.905-03:00  INFO 11044 --- [http-nio-auto-1-exec-8] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTkwMCwiZXhwIjoxNjc1MDEwNTAwfQ.gbfBKzLmYrJu24ANKfrdwBRiI7IHD7BnmsbrM4gWKb4]
2023-01-29T13:31:40.908-03:00  INFO 11044 --- [http-nio-auto-1-exec-8] c.example.ec.web.TourRatingController    : POST /tours/999/ratings/3
2023-01-29T13:31:40.916-03:00  INFO 11044 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:40.919-03:00  INFO 11044 --- [http-nio-auto-1-exec-9] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTkwMCwiZXhwIjoxNjc1MDEwNTAwfQ.gbfBKzLmYrJu24ANKfrdwBRiI7IHD7BnmsbrM4gWKb4]
2023-01-29T13:31:40.921-03:00  INFO 11044 --- [http-nio-auto-1-exec-9] c.example.ec.web.TourRatingController    : PATCH /tours/999/ratings
2023-01-29T13:31:40.926-03:00  INFO 11044 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:31:40.927-03:00  INFO 11044 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T13:31:40.941-03:00  INFO 11044 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 11044 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:31:40.942-03:00 DEBUG 11044 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:31:40.942-03:00  INFO 11044 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:31:41.101-03:00  INFO 11044 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:31:41.111-03:00  INFO 11044 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T13:31:41.183-03:00  INFO 11044 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:31:41.184-03:00  INFO 11044 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:31:41.184-03:00  INFO 11044 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:31:41.207-03:00  INFO 11044 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T13:31:41.207-03:00  INFO 11044 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 264 ms
2023-01-29T13:31:41.332-03:00  INFO 11044 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T13:31:41.396-03:00  INFO 11044 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@905e189
2023-01-29T13:31:41.396-03:00  INFO 11044 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T13:31:42.009-03:00  INFO 11044 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T13:31:42.011-03:00  WARN 11044 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T13:31:42.015-03:00  INFO 11044 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T13:31:42.061-03:00  INFO 11044 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T13:31:42.061-03:00  INFO 11044 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:31:42.065-03:00  INFO 11044 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T13:31:42.173-03:00  WARN 11044 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T13:31:43.189-03:00  INFO 11044 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@44c01e8c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6d7232a5, org.springframework.security.web.context.SecurityContextHolderFilter@416c28e, org.springframework.security.web.header.HeaderWriterFilter@66f18fa, org.springframework.security.web.authentication.logout.LogoutFilter@17e7df9e, com.example.ec.security.JwtTokenFilter@6c769cd8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2cf5cc43, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@52a3a9ef, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3b7bc23a, org.springframework.security.web.session.SessionManagementFilter@33588b68, org.springframework.security.web.access.ExceptionTranslationFilter@3463851a, org.springframework.security.web.access.intercept.AuthorizationFilter@5ad1b175]
2023-01-29T13:31:43.329-03:00  INFO 11044 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 58137 (http) with context path ''
2023-01-29T13:31:43.332-03:00  INFO 11044 --- [main] com.example.ec.web.UserControllerTest    : Started UserControllerTest in 2.402 seconds (process running for 12.742)
2023-01-29T13:31:43.341-03:00  INFO 11044 --- [http-nio-auto-2-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-01-29T13:31:43.342-03:00  INFO 11044 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-01-29T13:31:43.343-03:00  INFO 11044 --- [http-nio-auto-2-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-01-29T13:31:43.343-03:00  INFO 11044 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:43.346-03:00  INFO 11044 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTkwMywiZXhwIjoxNjc1MDEwNTAzfQ.w-kZrxXKou6HeAFGJyysD1uvxPk5DnwJK8jjMaxkpkM]
2023-01-29T13:31:43.355-03:00  INFO 11044 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:43.357-03:00  INFO 11044 --- [http-nio-auto-2-exec-1] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9DU1IifV0sImlhdCI6MTY3NTAwOTkwMywiZXhwIjoxNjc1MDEwNTAzfQ.w-kZrxXKou6HeAFGJyysD1uvxPk5DnwJK8jjMaxkpkM]
2023-01-29T13:31:43.367-03:00  INFO 11044 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:43.367-03:00  INFO 11044 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:31:43.372-03:00 ERROR 11044 --- [http-nio-auto-2-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.client.HttpServerErrorException: 403 Login Failed] with root cause

org.springframework.web.client.HttpServerErrorException: 403 Login Failed
	at com.example.ec.web.UserController.lambda$login$0(UserController.java:28)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.example.ec.web.UserController.login(UserController.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:699)
	at com.example.ec.web.UserController$$SpringCGLIB$$0.login(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:577)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:906)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.example.ec.security.JwtTokenFilter.doFilter(JwtTokenFilter.java:62)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)

2023-01-29T13:31:43.374-03:00  INFO 11044 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:43.374-03:00  INFO 11044 --- [http-nio-auto-2-exec-2] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional.empty
2023-01-29T13:31:43.382-03:00  INFO 11044 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:43.385-03:00  INFO 11044 --- [http-nio-auto-2-exec-3] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc1MDA5OTAzLCJleHAiOjE2NzUwMTA1MDN9.wh95btzDVbiVwa-kVjcOFctlfNSUbCLkkpg-Bha2BD8]
2023-01-29T13:31:43.396-03:00  INFO 11044 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : Process request to check for a JSON Web Token 
2023-01-29T13:31:43.399-03:00  INFO 11044 --- [http-nio-auto-2-exec-4] com.example.ec.security.JwtTokenFilter   : TOKEN: Optional[eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJyb2xlcyI6W3siYXV0aG9yaXR5IjoiUk9MRV9BRE1JTiJ9XSwiaWF0IjoxNjc1MDA5OTAzLCJleHAiOjE2NzUwMTA1MDN9.wh95btzDVbiVwa-kVjcOFctlfNSUbCLkkpg-Bha2BD8]
2023-01-29T13:31:43.447-03:00  INFO 11044 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:31:43.449-03:00  INFO 11044 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T13:31:43.476-03:00  INFO 11044 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T13:31:43.490-03:00  INFO 11044 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:31:43.491-03:00  INFO 11044 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T13:31:43.503-03:00  INFO 11044 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T13:31:43.512-03:00  INFO 11044 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T13:31:43.512-03:00  INFO 11044 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T13:31:43.525-03:00  INFO 11044 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T13:53:26.865-03:00  INFO 28592 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:26.866-03:00 DEBUG 28592 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:26.867-03:00  INFO 28592 --- [main] c.e.ec.ExplorecaliApplicationTests       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:27.548-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:27.605-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:28.130-03:00  INFO 28592 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.5.1 by Redgate
2023-01-29T13:53:28.130-03:00  INFO 28592 --- [main] o.f.c.internal.license.VersionPrinter    : See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#9.5.1
2023-01-29T13:53:28.130-03:00  INFO 28592 --- [main] o.f.c.internal.license.VersionPrinter    : 
2023-01-29T13:53:28.138-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T13:53:28.474-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@57b33c29
2023-01-29T13:53:28.487-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T13:53:28.494-03:00  WARN 28592 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:28.494-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T13:53:28.500-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T13:53:28.510-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:28.524-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:28.539-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@3dfc59c5] to prepare test instance [com.example.ec.ExplorecaliApplicationTests@2cff5aa3]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@23708f14 testClass = com.example.ec.ExplorecaliApplicationTests, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@b8d58a5a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:28.546-03:00  INFO 28592 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:53:28.554-03:00  INFO 28592 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T13:53:28.585-03:00  INFO 28592 --- [main] com.example.ec.repo.UserRepositoryTest   : Starting UserRepositoryTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:28.585-03:00 DEBUG 28592 --- [main] com.example.ec.repo.UserRepositoryTest   : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:28.585-03:00  INFO 28592 --- [main] com.example.ec.repo.UserRepositoryTest   : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:28.742-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:28.755-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:28.857-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T13:53:28.885-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5906ebfb
2023-01-29T13:53:28.885-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T13:53:28.885-03:00  WARN 28592 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:28.885-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T13:53:28.890-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T13:53:28.892-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:28.894-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:28.895-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@7eebb316] to prepare test instance [com.example.ec.repo.UserRepositoryTest@45273d40]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@eb695e8 testClass = com.example.ec.repo.UserRepositoryTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@b8d58a5a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:28.900-03:00  INFO 28592 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:53:28.906-03:00  INFO 28592 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T13:53:28.939-03:00  INFO 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Starting TourRatingServiceIntegrationTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:28.939-03:00 DEBUG 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:28.939-03:00  INFO 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:29.101-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:29.115-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:29.233-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T13:53:29.267-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@64a8d575
2023-01-29T13:53:29.268-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T13:53:29.268-03:00  WARN 28592 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:29.268-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T13:53:29.273-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T13:53:29.276-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:29.278-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:29.279-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@44a485bc] to prepare test instance [com.example.ec.service.TourRatingServiceIntegrationTest@1c66cd02]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@73db7df0 testClass = com.example.ec.service.TourRatingServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@b8d58a5a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:29.307-03:00  INFO 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Starting TourRatingServiceIntegrationTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:29.307-03:00 DEBUG 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:29.307-03:00  INFO 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:29.442-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:29.453-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:29.523-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2023-01-29T13:53:29.548-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection com.mysql.cj.jdbc.ConnectionImpl@282240
2023-01-29T13:53:29.548-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2023-01-29T13:53:29.549-03:00  WARN 28592 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:29.549-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2023-01-29T13:53:29.554-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2023-01-29T13:53:29.557-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:29.558-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:29.559-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@44a485bc] to prepare test instance [com.example.ec.service.TourRatingServiceIntegrationTest@9c5d76b]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@73db7df0 testClass = com.example.ec.service.TourRatingServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@b8d58a5a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:29.584-03:00  INFO 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Starting TourRatingServiceIntegrationTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:29.584-03:00 DEBUG 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:29.584-03:00  INFO 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:29.713-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:29.724-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:29.790-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2023-01-29T13:53:29.816-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-5 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4df5f119
2023-01-29T13:53:29.817-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2023-01-29T13:53:29.817-03:00  WARN 28592 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:29.817-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2023-01-29T13:53:29.823-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2023-01-29T13:53:29.828-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:29.830-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:29.832-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@44a485bc] to prepare test instance [com.example.ec.service.TourRatingServiceIntegrationTest@42db3ff]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@73db7df0 testClass = com.example.ec.service.TourRatingServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@b8d58a5a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:29.857-03:00  INFO 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Starting TourRatingServiceIntegrationTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:29.858-03:00 DEBUG 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:29.858-03:00  INFO 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:30.007-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:30.027-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:30.102-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Starting...
2023-01-29T13:53:30.129-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-6 - Added connection com.mysql.cj.jdbc.ConnectionImpl@218fc40d
2023-01-29T13:53:30.130-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Start completed.
2023-01-29T13:53:30.131-03:00  WARN 28592 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:30.131-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2023-01-29T13:53:30.136-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.
2023-01-29T13:53:30.138-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:30.139-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:30.140-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@44a485bc] to prepare test instance [com.example.ec.service.TourRatingServiceIntegrationTest@714d7c7b]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@73db7df0 testClass = com.example.ec.service.TourRatingServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@b8d58a5a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:30.164-03:00  INFO 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Starting TourRatingServiceIntegrationTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:30.164-03:00 DEBUG 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:30.165-03:00  INFO 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:30.285-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:30.296-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:30.367-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2023-01-29T13:53:30.394-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-7 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a1c4f69
2023-01-29T13:53:30.400-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2023-01-29T13:53:30.400-03:00  WARN 28592 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:30.400-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2023-01-29T13:53:30.405-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.
2023-01-29T13:53:30.407-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:30.409-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:30.410-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@44a485bc] to prepare test instance [com.example.ec.service.TourRatingServiceIntegrationTest@1cc878e6]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@73db7df0 testClass = com.example.ec.service.TourRatingServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@b8d58a5a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:30.438-03:00  INFO 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Starting TourRatingServiceIntegrationTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:30.438-03:00 DEBUG 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:30.438-03:00  INFO 28592 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:30.560-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:30.570-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:30.628-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2023-01-29T13:53:30.651-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-8 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e674698
2023-01-29T13:53:30.652-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2023-01-29T13:53:30.652-03:00  WARN 28592 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:30.652-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2023-01-29T13:53:30.657-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.
2023-01-29T13:53:30.659-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:30.661-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:30.662-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@44a485bc] to prepare test instance [com.example.ec.service.TourRatingServiceIntegrationTest@7bb996e0]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@73db7df0 testClass = com.example.ec.service.TourRatingServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@b8d58a5a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:30.873-03:00  INFO 28592 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T13:53:30.880-03:00  INFO 28592 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T13:53:30.888-03:00  INFO 28592 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T13:53:30.891-03:00  INFO 28592 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T13:53:30.893-03:00  INFO 28592 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T13:53:30.894-03:00 DEBUG 28592 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T13:53:30.894-03:00 DEBUG 28592 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T13:53:30.897-03:00  INFO 28592 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T13:53:30.900-03:00  INFO 28592 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T13:53:30.952-03:00  INFO 28592 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T13:53:30.954-03:00  INFO 28592 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:53:30.956-03:00  INFO 28592 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T13:53:31.019-03:00  INFO 28592 --- [main] c.e.e.s.UserServiceIntegrationTest       : Starting UserServiceIntegrationTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:31.020-03:00 DEBUG 28592 --- [main] c.e.e.s.UserServiceIntegrationTest       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:31.020-03:00  INFO 28592 --- [main] c.e.e.s.UserServiceIntegrationTest       : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:31.142-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:31.152-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:31.223-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Starting...
2023-01-29T13:53:31.246-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-9 - Added connection com.mysql.cj.jdbc.ConnectionImpl@77d80294
2023-01-29T13:53:31.247-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Start completed.
2023-01-29T13:53:31.247-03:00  WARN 28592 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:31.247-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2023-01-29T13:53:31.251-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.
2023-01-29T13:53:31.254-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:31.255-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:31.256-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@39000894] to prepare test instance [com.example.ec.service.UserServiceIntegrationTest@4f5080ea]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6ddccee4 testClass = com.example.ec.service.UserServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@b8d58a5a], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted

2023-01-29T13:53:31.409-03:00  INFO 28592 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:53:31.416-03:00  INFO 28592 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T13:53:31.439-03:00  INFO 28592 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:31.440-03:00 DEBUG 28592 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:31.440-03:00  INFO 28592 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:31.558-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:31.568-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:31.822-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:31.830-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:31.831-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:31.896-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:31.896-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 455 ms
2023-01-29T13:53:31.964-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Starting...
2023-01-29T13:53:31.987-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-10 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2dda28a3
2023-01-29T13:53:31.987-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Start completed.
2023-01-29T13:53:31.987-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:31.988-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2023-01-29T13:53:31.990-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
2023-01-29T13:53:31.991-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:31.997-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:31.998-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:31.999-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2e43fc06] to prepare test instance [com.example.ec.web.RatingControllerTest@5fb7b227]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@721e5f57 testClass = com.example.ec.web.RatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@8e63732a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:32.020-03:00  INFO 28592 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:32.020-03:00 DEBUG 28592 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:32.021-03:00  INFO 28592 --- [main] c.example.ec.web.RatingControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:32.137-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:32.146-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:32.205-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:32.206-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:32.206-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:32.231-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:32.231-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 209 ms
2023-01-29T13:53:32.261-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Starting...
2023-01-29T13:53:32.285-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-11 - Added connection com.mysql.cj.jdbc.ConnectionImpl@606cb314
2023-01-29T13:53:32.285-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Start completed.
2023-01-29T13:53:32.285-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:32.285-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown initiated...
2023-01-29T13:53:32.288-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown completed.
2023-01-29T13:53:32.288-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:32.291-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:32.293-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:32.294-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2e43fc06] to prepare test instance [com.example.ec.web.RatingControllerTest@3fc0a2c]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@721e5f57 testClass = com.example.ec.web.RatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@8e63732a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:32.297-03:00  INFO 28592 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:53:32.298-03:00  INFO 28592 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T13:53:32.323-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:32.323-03:00 DEBUG 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:32.323-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:32.426-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:32.436-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:32.492-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:32.493-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:32.493-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:32.522-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:32.522-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 197 ms
2023-01-29T13:53:32.547-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Starting...
2023-01-29T13:53:32.569-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-12 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2f074818
2023-01-29T13:53:32.569-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Start completed.
2023-01-29T13:53:32.569-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:32.570-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown initiated...
2023-01-29T13:53:32.571-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown completed.
2023-01-29T13:53:32.572-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:32.574-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:32.575-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:32.576-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4169db10] to prepare test instance [com.example.ec.web.TourRatingControllerTest@270b527f]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3a0773 testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@8e63732a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:32.595-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:32.596-03:00 DEBUG 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:32.596-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:32.720-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:32.729-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:32.797-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:32.797-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:32.798-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:32.822-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat-3].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:32.822-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 225 ms
2023-01-29T13:53:32.852-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Starting...
2023-01-29T13:53:32.873-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-13 - Added connection com.mysql.cj.jdbc.ConnectionImpl@613c829c
2023-01-29T13:53:32.873-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Start completed.
2023-01-29T13:53:32.873-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:32.873-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown initiated...
2023-01-29T13:53:32.877-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown completed.
2023-01-29T13:53:32.877-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:32.880-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:32.881-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:32.882-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4169db10] to prepare test instance [com.example.ec.web.TourRatingControllerTest@14c05ad9]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3a0773 testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@8e63732a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:32.899-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:32.899-03:00 DEBUG 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:32.899-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:32.992-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:33.001-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:33.051-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:33.051-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:33.052-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:33.073-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat-4].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:33.073-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 173 ms
2023-01-29T13:53:33.097-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Starting...
2023-01-29T13:53:33.118-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-14 - Added connection com.mysql.cj.jdbc.ConnectionImpl@687d4471
2023-01-29T13:53:33.118-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Start completed.
2023-01-29T13:53:33.118-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:33.118-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Shutdown initiated...
2023-01-29T13:53:33.121-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Shutdown completed.
2023-01-29T13:53:33.121-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:33.124-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:33.125-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:33.125-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4169db10] to prepare test instance [com.example.ec.web.TourRatingControllerTest@79d15b02]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3a0773 testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@8e63732a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:33.142-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:33.142-03:00 DEBUG 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:33.142-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:33.235-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:33.245-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:33.301-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:33.301-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:33.302-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:33.323-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat-5].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:33.324-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 181 ms
2023-01-29T13:53:33.349-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Starting...
2023-01-29T13:53:33.375-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-15 - Added connection com.mysql.cj.jdbc.ConnectionImpl@644e2230
2023-01-29T13:53:33.375-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Start completed.
2023-01-29T13:53:33.376-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:33.376-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Shutdown initiated...
2023-01-29T13:53:33.381-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Shutdown completed.
2023-01-29T13:53:33.382-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:33.385-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:33.386-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:33.387-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4169db10] to prepare test instance [com.example.ec.web.TourRatingControllerTest@36df566]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3a0773 testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@8e63732a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:33.408-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:33.408-03:00 DEBUG 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:33.408-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:33.507-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:33.515-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:33.569-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:33.570-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:33.570-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:33.592-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat-6].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:33.592-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 183 ms
2023-01-29T13:53:33.620-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Starting...
2023-01-29T13:53:33.641-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-16 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2169596d
2023-01-29T13:53:33.642-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Start completed.
2023-01-29T13:53:33.642-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:33.642-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Shutdown initiated...
2023-01-29T13:53:33.648-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Shutdown completed.
2023-01-29T13:53:33.649-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:33.652-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:33.652-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:33.653-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4169db10] to prepare test instance [com.example.ec.web.TourRatingControllerTest@78500fc9]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3a0773 testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@8e63732a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:33.671-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:33.671-03:00 DEBUG 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:33.671-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:33.759-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:33.767-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:33.811-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:33.812-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:33.812-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:33.833-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat-7].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:33.833-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 161 ms
2023-01-29T13:53:33.855-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Starting...
2023-01-29T13:53:33.873-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-17 - Added connection com.mysql.cj.jdbc.ConnectionImpl@16e557d4
2023-01-29T13:53:33.874-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Start completed.
2023-01-29T13:53:33.874-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:33.874-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Shutdown initiated...
2023-01-29T13:53:33.878-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Shutdown completed.
2023-01-29T13:53:33.879-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:33.881-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:33.882-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:33.883-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4169db10] to prepare test instance [com.example.ec.web.TourRatingControllerTest@4a0d3295]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3a0773 testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@8e63732a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:33.899-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:33.899-03:00 DEBUG 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:33.899-03:00  INFO 28592 --- [main] c.e.ec.web.TourRatingControllerTest      : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:33.988-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:33.997-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:34.054-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:34.054-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:34.054-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:34.085-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat-8].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:34.085-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 185 ms
2023-01-29T13:53:34.109-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Starting...
2023-01-29T13:53:34.131-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-18 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4c18545
2023-01-29T13:53:34.131-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Start completed.
2023-01-29T13:53:34.131-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:34.131-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Shutdown initiated...
2023-01-29T13:53:34.137-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Shutdown completed.
2023-01-29T13:53:34.138-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:34.140-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:34.141-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:34.142-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4169db10] to prepare test instance [com.example.ec.web.TourRatingControllerTest@3ceeb6ba]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3a0773 testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@8e63732a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:34.144-03:00  INFO 28592 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T13:53:34.146-03:00  INFO 28592 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T13:53:34.165-03:00  INFO 28592 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:34.165-03:00 DEBUG 28592 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:34.165-03:00  INFO 28592 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:34.250-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:34.260-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:34.317-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:34.317-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:34.317-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:34.338-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat-9].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:34.338-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 172 ms
2023-01-29T13:53:34.364-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Starting...
2023-01-29T13:53:34.385-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-19 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6eba7c33
2023-01-29T13:53:34.385-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Start completed.
2023-01-29T13:53:34.385-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:34.385-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Shutdown initiated...
2023-01-29T13:53:34.390-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Shutdown completed.
2023-01-29T13:53:34.390-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:34.393-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:34.394-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:34.395-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2f6b2b06] to prepare test instance [com.example.ec.web.UserControllerTest@11bf44c0]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6748d248 testClass = com.example.ec.web.UserControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@145a2a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:34.410-03:00  INFO 28592 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:34.410-03:00 DEBUG 28592 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:34.410-03:00  INFO 28592 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:34.502-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:34.509-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:34.564-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:34.564-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:34.565-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:34.585-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat-10].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:34.586-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 175 ms
2023-01-29T13:53:34.608-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-20 - Starting...
2023-01-29T13:53:34.628-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-20 - Added connection com.mysql.cj.jdbc.ConnectionImpl@ffeb49c
2023-01-29T13:53:34.628-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-20 - Start completed.
2023-01-29T13:53:34.628-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:34.628-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-20 - Shutdown initiated...
2023-01-29T13:53:34.634-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-20 - Shutdown completed.
2023-01-29T13:53:34.635-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:34.637-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:34.638-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:34.639-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2f6b2b06] to prepare test instance [com.example.ec.web.UserControllerTest@94cdf07]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6748d248 testClass = com.example.ec.web.UserControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@145a2a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:34.654-03:00  INFO 28592 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:34.654-03:00 DEBUG 28592 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:34.654-03:00  INFO 28592 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:34.739-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:34.747-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:34.799-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:34.799-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:34.800-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:34.830-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat-11].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:34.830-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 175 ms
2023-01-29T13:53:34.853-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-21 - Starting...
2023-01-29T13:53:34.874-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-21 - Added connection com.mysql.cj.jdbc.ConnectionImpl@567349f5
2023-01-29T13:53:34.874-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-21 - Start completed.
2023-01-29T13:53:34.875-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:34.875-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-21 - Shutdown initiated...
2023-01-29T13:53:34.880-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-21 - Shutdown completed.
2023-01-29T13:53:34.881-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:34.883-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:34.884-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:34.885-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2f6b2b06] to prepare test instance [com.example.ec.web.UserControllerTest@43687954]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6748d248 testClass = com.example.ec.web.UserControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@145a2a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:34.901-03:00  INFO 28592 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 28592 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T13:53:34.901-03:00 DEBUG 28592 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T13:53:34.901-03:00  INFO 28592 --- [main] com.example.ec.web.UserControllerTest    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T13:53:34.993-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T13:53:35.003-03:00  INFO 28592 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T13:53:35.058-03:00  INFO 28592 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T13:53:35.059-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T13:53:35.059-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T13:53:35.082-03:00  INFO 28592 --- [main] o.a.c.c.C.[Tomcat-12].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2023-01-29T13:53:35.082-03:00  INFO 28592 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 181 ms
2023-01-29T13:53:35.109-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-22 - Starting...
2023-01-29T13:53:35.132-03:00  INFO 28592 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-22 - Added connection com.mysql.cj.jdbc.ConnectionImpl@560e6cbe
2023-01-29T13:53:35.132-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-22 - Start completed.
2023-01-29T13:53:35.133-03:00  WARN 28592 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
2023-01-29T13:53:35.133-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-22 - Shutdown initiated...
2023-01-29T13:53:35.143-03:00  INFO 28592 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-22 - Shutdown completed.
2023-01-29T13:53:35.144-03:00  INFO 28592 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T13:53:35.146-03:00  INFO 28592 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T13:53:35.147-03:00 ERROR 28592 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T13:53:35.155-03:00 ERROR 28592 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@2f6b2b06] to prepare test instance [com.example.ec.web.UserControllerTest@7809027c]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6748d248 testClass = com.example.ec.web.UserControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@189b5fb1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@43cf6ea3, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@145a2a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6a4d7f76, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4bdc8b5d, org.springframework.boot.test.context.SpringBootTestAnnotation@96f47692], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Unsupported Database: MySQL 8.0
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.api.FlywayException: Unsupported Database: MySQL 8.0
	at org.flywaydb.core.internal.database.DatabaseTypeRegister.getDatabaseTypeForConnection(DatabaseTypeRegister.java:105)
	at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.<init>(JdbcConnectionFactory.java:76)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:146)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted

2023-01-29T14:22:05.749-03:00  INFO 27952 --- [main] c.e.ec.ExplorecaliApplicationTests       : Starting ExplorecaliApplicationTests using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:05.750-03:00 DEBUG 27952 --- [main] c.e.ec.ExplorecaliApplicationTests       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:05.751-03:00  INFO 27952 --- [main] c.e.ec.ExplorecaliApplicationTests       : The following 1 profile is active: "default"
2023-01-29T14:22:06.432-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:06.488-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:07.013-03:00  INFO 27952 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.5.1 by Redgate
2023-01-29T14:22:07.014-03:00  INFO 27952 --- [main] o.f.c.internal.license.VersionPrinter    : See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#9.5.1
2023-01-29T14:22:07.014-03:00  INFO 27952 --- [main] o.f.c.internal.license.VersionPrinter    : 
2023-01-29T14:22:07.021-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T14:22:07.180-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:e8945657-e37c-485b-bbb7-fad932c7582c user=SA
2023-01-29T14:22:07.190-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T14:22:07.199-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:e8945657-e37c-485b-bbb7-fad932c7582c (H2 2.1)
2023-01-29T14:22:07.256-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.016s)
2023-01-29T14:22:07.261-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:07.281-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:07.286-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:07.319-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:07.331-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:07.337-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:07.342-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:07.349-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:07.351-03:00  WARN 27952 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:07.352-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T14:22:07.365-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T14:22:07.373-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:07.389-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:07.397-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@2295566b] to prepare test instance [com.example.ec.ExplorecaliApplicationTests@174e1b99]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@71e7c13f testClass = com.example.ec.ExplorecaliApplicationTests, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@c85664f4], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:07.408-03:00  INFO 27952 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.repo.UserRepositoryTest]: UserRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T14:22:07.420-03:00  INFO 27952 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.repo.UserRepositoryTest
2023-01-29T14:22:07.452-03:00  INFO 27952 --- [main] com.example.ec.repo.UserRepositoryTest   : Starting UserRepositoryTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:07.452-03:00 DEBUG 27952 --- [main] com.example.ec.repo.UserRepositoryTest   : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:07.453-03:00  INFO 27952 --- [main] com.example.ec.repo.UserRepositoryTest   : The following 1 profile is active: "default"
2023-01-29T14:22:07.623-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:07.636-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:07.724-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2023-01-29T14:22:07.729-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn6: url=jdbc:h2:mem:f66f7a3a-ca53-4d02-aa64-a956aebf20c7 user=SA
2023-01-29T14:22:07.729-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2023-01-29T14:22:07.729-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:f66f7a3a-ca53-4d02-aa64-a956aebf20c7 (H2 2.1)
2023-01-29T14:22:07.735-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:07.736-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:07.741-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:07.744-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:07.765-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:07.774-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:07.779-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:07.784-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:07.785-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:07.787-03:00  WARN 27952 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:07.788-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-01-29T14:22:07.789-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-01-29T14:22:07.792-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:07.793-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:07.795-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@554d040d] to prepare test instance [com.example.ec.repo.UserRepositoryTest@3fe24670]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@309e3f34 testClass = com.example.ec.repo.UserRepositoryTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@c85664f4], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:07.801-03:00  INFO 27952 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.TourRatingServiceIntegrationTest]: TourRatingServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T14:22:07.807-03:00  INFO 27952 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.TourRatingServiceIntegrationTest
2023-01-29T14:22:07.838-03:00  INFO 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Starting TourRatingServiceIntegrationTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:07.839-03:00 DEBUG 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:07.839-03:00  INFO 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : The following 1 profile is active: "default"
2023-01-29T14:22:07.996-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:08.008-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:08.105-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2023-01-29T14:22:08.112-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn10: url=jdbc:h2:mem:3c3542d8-d338-476f-803d-5d6a1e9a6838 user=SA
2023-01-29T14:22:08.112-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2023-01-29T14:22:08.112-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:3c3542d8-d338-476f-803d-5d6a1e9a6838 (H2 2.1)
2023-01-29T14:22:08.119-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.003s)
2023-01-29T14:22:08.120-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:08.126-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:08.127-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:08.140-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:08.148-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:08.154-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:08.158-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:08.159-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:08.161-03:00  WARN 27952 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:08.161-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-01-29T14:22:08.168-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-01-29T14:22:08.171-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:08.173-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:08.175-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@7aca299e] to prepare test instance [com.example.ec.service.TourRatingServiceIntegrationTest@1bf52f10]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@280099a0 testClass = com.example.ec.service.TourRatingServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@c85664f4], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:08.210-03:00  INFO 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Starting TourRatingServiceIntegrationTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:08.211-03:00 DEBUG 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:08.211-03:00  INFO 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : The following 1 profile is active: "default"
2023-01-29T14:22:08.348-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:08.360-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:08.428-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2023-01-29T14:22:08.433-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection conn14: url=jdbc:h2:mem:d1973732-fd18-41a1-8709-f7e9f9121cf5 user=SA
2023-01-29T14:22:08.433-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2023-01-29T14:22:08.434-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:d1973732-fd18-41a1-8709-f7e9f9121cf5 (H2 2.1)
2023-01-29T14:22:08.439-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:08.440-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:08.445-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:08.447-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:08.459-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:08.466-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:08.472-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:08.476-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:08.477-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:08.478-03:00  WARN 27952 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:08.479-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2023-01-29T14:22:08.485-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2023-01-29T14:22:08.491-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:08.492-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:08.493-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@7aca299e] to prepare test instance [com.example.ec.service.TourRatingServiceIntegrationTest@675bf541]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@280099a0 testClass = com.example.ec.service.TourRatingServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@c85664f4], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:08.520-03:00  INFO 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Starting TourRatingServiceIntegrationTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:08.521-03:00 DEBUG 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:08.521-03:00  INFO 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : The following 1 profile is active: "default"
2023-01-29T14:22:08.654-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:08.664-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:08.728-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2023-01-29T14:22:08.734-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-5 - Added connection conn17: url=jdbc:h2:mem:6132203f-155e-499c-9f93-5dcea1eb95ca user=SA
2023-01-29T14:22:08.734-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2023-01-29T14:22:08.734-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:6132203f-155e-499c-9f93-5dcea1eb95ca (H2 2.1)
2023-01-29T14:22:08.739-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:08.740-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:08.744-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:08.746-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:08.756-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:08.762-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:08.766-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:08.770-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:08.770-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:08.772-03:00  WARN 27952 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:08.772-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2023-01-29T14:22:08.787-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2023-01-29T14:22:08.789-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:08.791-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:08.792-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@7aca299e] to prepare test instance [com.example.ec.service.TourRatingServiceIntegrationTest@41a3c6f5]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@280099a0 testClass = com.example.ec.service.TourRatingServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@c85664f4], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:08.816-03:00  INFO 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Starting TourRatingServiceIntegrationTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:08.817-03:00 DEBUG 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:08.817-03:00  INFO 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : The following 1 profile is active: "default"
2023-01-29T14:22:08.940-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:08.958-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:09.020-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Starting...
2023-01-29T14:22:09.026-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-6 - Added connection conn21: url=jdbc:h2:mem:9e29c76a-e84b-4a7c-a9c5-963c2a53be14 user=SA
2023-01-29T14:22:09.026-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Start completed.
2023-01-29T14:22:09.027-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:9e29c76a-e84b-4a7c-a9c5-963c2a53be14 (H2 2.1)
2023-01-29T14:22:09.031-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:09.032-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:09.036-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:09.038-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:09.047-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:09.053-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:09.057-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:09.062-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:09.063-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:09.064-03:00  WARN 27952 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:09.065-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2023-01-29T14:22:09.074-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.
2023-01-29T14:22:09.076-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:09.077-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:09.079-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@7aca299e] to prepare test instance [com.example.ec.service.TourRatingServiceIntegrationTest@47d0195b]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@280099a0 testClass = com.example.ec.service.TourRatingServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@c85664f4], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:09.104-03:00  INFO 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Starting TourRatingServiceIntegrationTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:09.104-03:00 DEBUG 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:09.105-03:00  INFO 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : The following 1 profile is active: "default"
2023-01-29T14:22:09.233-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:09.244-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:09.321-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2023-01-29T14:22:09.327-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-7 - Added connection conn24: url=jdbc:h2:mem:16ed6718-182d-4850-8bbe-f92e19b52fa7 user=SA
2023-01-29T14:22:09.327-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2023-01-29T14:22:09.327-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:16ed6718-182d-4850-8bbe-f92e19b52fa7 (H2 2.1)
2023-01-29T14:22:09.332-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:09.332-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:09.336-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:09.338-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:09.347-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:09.353-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:09.357-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:09.361-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:09.362-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:09.363-03:00  WARN 27952 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:09.363-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2023-01-29T14:22:09.373-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.
2023-01-29T14:22:09.375-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:09.376-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:09.377-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@7aca299e] to prepare test instance [com.example.ec.service.TourRatingServiceIntegrationTest@7ca2319f]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@280099a0 testClass = com.example.ec.service.TourRatingServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@c85664f4], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:09.402-03:00  INFO 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Starting TourRatingServiceIntegrationTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:09.402-03:00 DEBUG 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:09.402-03:00  INFO 27952 --- [main] c.e.e.s.TourRatingServiceIntegrationTest : The following 1 profile is active: "default"
2023-01-29T14:22:09.519-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:09.528-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:09.587-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2023-01-29T14:22:09.592-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-8 - Added connection conn27: url=jdbc:h2:mem:61d3ba66-036d-40fd-a6b2-5c94197a9c0c user=SA
2023-01-29T14:22:09.592-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2023-01-29T14:22:09.592-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:61d3ba66-036d-40fd-a6b2-5c94197a9c0c (H2 2.1)
2023-01-29T14:22:09.597-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:09.598-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:09.604-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:09.605-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:09.623-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:09.629-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:09.633-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:09.636-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:09.637-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:09.638-03:00  WARN 27952 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:09.639-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2023-01-29T14:22:09.643-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.
2023-01-29T14:22:09.645-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:09.646-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:09.648-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@7aca299e] to prepare test instance [com.example.ec.service.TourRatingServiceIntegrationTest@72dc7f0a]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@280099a0 testClass = com.example.ec.service.TourRatingServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@c85664f4], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:09.849-03:00  INFO 27952 --- [main] c.example.ec.service.TourRatingService   : Get average score of tour 1 by customers {}
2023-01-29T14:22:09.855-03:00  INFO 27952 --- [main] c.example.ec.service.TourRatingService   : Delete Rating for tour 1 and customer 123
2023-01-29T14:22:09.862-03:00  INFO 27952 --- [main] c.example.ec.service.TourRatingService   : Update all of Rating for tour 1 of customers 123
2023-01-29T14:22:09.865-03:00  INFO 27952 --- [main] c.example.ec.service.TourRatingService   : Update some of Rating for tour 1 of customers 123
2023-01-29T14:22:09.867-03:00  INFO 27952 --- [main] c.example.ec.service.TourRatingService   : Rate tour 1 by customers [123, 124]
2023-01-29T14:22:09.867-03:00 DEBUG 27952 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 123
2023-01-29T14:22:09.867-03:00 DEBUG 27952 --- [main] c.example.ec.service.TourRatingService   : Attempt to create Tour Rating for customer 124
2023-01-29T14:22:09.870-03:00  INFO 27952 --- [main] c.example.ec.service.TourRatingService   : Create Rating for tour 1 of customers 123
2023-01-29T14:22:09.873-03:00  INFO 27952 --- [main] c.example.ec.service.TourRatingService   : Lookup all Ratings
2023-01-29T14:22:09.921-03:00  INFO 27952 --- [main] c.example.ec.service.TourRatingService   : Lookup Rating for tour 1
2023-01-29T14:22:09.924-03:00  INFO 27952 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.service.UserServiceIntegrationTest]: UserServiceIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T14:22:09.926-03:00  INFO 27952 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.service.UserServiceIntegrationTest
2023-01-29T14:22:09.953-03:00  INFO 27952 --- [main] c.e.e.s.UserServiceIntegrationTest       : Starting UserServiceIntegrationTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:09.953-03:00 DEBUG 27952 --- [main] c.e.e.s.UserServiceIntegrationTest       : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:09.953-03:00  INFO 27952 --- [main] c.e.e.s.UserServiceIntegrationTest       : The following 1 profile is active: "default"
2023-01-29T14:22:10.080-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:10.092-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:10.154-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Starting...
2023-01-29T14:22:10.158-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-9 - Added connection conn30: url=jdbc:h2:mem:f175a231-7f0b-4c03-966c-252784cd773d user=SA
2023-01-29T14:22:10.158-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Start completed.
2023-01-29T14:22:10.159-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:f175a231-7f0b-4c03-966c-252784cd773d (H2 2.1)
2023-01-29T14:22:10.165-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:10.166-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:10.173-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:10.174-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:10.184-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:10.196-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:10.199-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:10.202-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:10.203-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:10.204-03:00  WARN 27952 --- [main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:10.204-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2023-01-29T14:22:10.209-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.
2023-01-29T14:22:10.211-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:10.212-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:10.213-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener@2e7a6dcd] to prepare test instance [com.example.ec.service.UserServiceIntegrationTest@762261fd]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@15db4dc testClass = com.example.ec.service.UserServiceIntegrationTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@c85664f4], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:192)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:131)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 67 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 90 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 114 common frames omitted

2023-01-29T14:22:10.375-03:00  INFO 27952 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.RatingControllerTest]: RatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T14:22:10.383-03:00  INFO 27952 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.RatingControllerTest
2023-01-29T14:22:10.410-03:00  INFO 27952 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:10.410-03:00 DEBUG 27952 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:10.410-03:00  INFO 27952 --- [main] c.example.ec.web.RatingControllerTest    : The following 1 profile is active: "default"
2023-01-29T14:22:10.528-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:10.538-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:10.756-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:10.763-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:10.763-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:10.842-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:10.842-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 431 ms
2023-01-29T14:22:10.916-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Starting...
2023-01-29T14:22:10.918-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-10 - Added connection conn33: url=jdbc:h2:mem:020d59ce-e0fb-45e9-9575-6798d18392e0 user=SA
2023-01-29T14:22:10.919-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Start completed.
2023-01-29T14:22:10.919-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:020d59ce-e0fb-45e9-9575-6798d18392e0 (H2 2.1)
2023-01-29T14:22:10.923-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:10.924-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:10.932-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:10.934-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:10.945-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:10.949-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:10.954-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:10.957-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:10.957-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:10.958-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:10.958-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2023-01-29T14:22:10.966-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
2023-01-29T14:22:10.967-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:10.971-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:10.972-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:10.974-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@447dec7e] to prepare test instance [com.example.ec.web.RatingControllerTest@1edad178]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@519e110b testClass = com.example.ec.web.RatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@968cd07d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:10.994-03:00  INFO 27952 --- [main] c.example.ec.web.RatingControllerTest    : Starting RatingControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:10.994-03:00 DEBUG 27952 --- [main] c.example.ec.web.RatingControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:10.994-03:00  INFO 27952 --- [main] c.example.ec.web.RatingControllerTest    : The following 1 profile is active: "default"
2023-01-29T14:22:11.114-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:11.128-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:11.203-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:11.204-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:11.204-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:11.237-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:11.237-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 242 ms
2023-01-29T14:22:11.278-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Starting...
2023-01-29T14:22:11.285-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-11 - Added connection conn36: url=jdbc:h2:mem:6bfb30db-f106-488b-802b-4e218b9cc094 user=SA
2023-01-29T14:22:11.285-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Start completed.
2023-01-29T14:22:11.286-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:6bfb30db-f106-488b-802b-4e218b9cc094 (H2 2.1)
2023-01-29T14:22:11.290-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:11.291-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:11.294-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:11.296-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:11.305-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:11.309-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:11.313-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:11.315-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:11.316-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:11.317-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:11.317-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown initiated...
2023-01-29T14:22:11.324-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown completed.
2023-01-29T14:22:11.325-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:11.328-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:11.329-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:11.330-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@447dec7e] to prepare test instance [com.example.ec.web.RatingControllerTest@6c92af74]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@519e110b testClass = com.example.ec.web.RatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@968cd07d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:11.334-03:00  INFO 27952 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.TourRatingControllerTest]: TourRatingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T14:22:11.335-03:00  INFO 27952 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.TourRatingControllerTest
2023-01-29T14:22:11.358-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:11.358-03:00 DEBUG 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:11.358-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : The following 1 profile is active: "default"
2023-01-29T14:22:11.460-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:11.469-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:11.526-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:11.527-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:11.527-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:11.553-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:11.554-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 195 ms
2023-01-29T14:22:11.586-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Starting...
2023-01-29T14:22:11.592-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-12 - Added connection conn38: url=jdbc:h2:mem:3cfa3428-c83e-4a20-bab5-15d702737bfd user=SA
2023-01-29T14:22:11.593-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Start completed.
2023-01-29T14:22:11.593-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:3cfa3428-c83e-4a20-bab5-15d702737bfd (H2 2.1)
2023-01-29T14:22:11.597-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:11.597-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:11.604-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:11.606-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:11.618-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:11.622-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:11.626-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:11.628-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:11.629-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:11.630-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:11.630-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown initiated...
2023-01-29T14:22:11.637-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown completed.
2023-01-29T14:22:11.637-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:11.640-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:11.641-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:11.643-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@30e2c9dc] to prepare test instance [com.example.ec.web.TourRatingControllerTest@be1c8aa]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6c5a347d testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@968cd07d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:11.665-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:11.665-03:00 DEBUG 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:11.665-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : The following 1 profile is active: "default"
2023-01-29T14:22:11.771-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:11.779-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:11.832-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:11.833-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:11.833-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:11.855-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat-3].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:11.855-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 189 ms
2023-01-29T14:22:11.881-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Starting...
2023-01-29T14:22:11.887-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-13 - Added connection conn41: url=jdbc:h2:mem:c93a8ee8-5aa4-447f-95d7-317ad27d298c user=SA
2023-01-29T14:22:11.887-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Start completed.
2023-01-29T14:22:11.887-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:c93a8ee8-5aa4-447f-95d7-317ad27d298c (H2 2.1)
2023-01-29T14:22:11.891-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.001s)
2023-01-29T14:22:11.892-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:11.896-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:11.898-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:11.906-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:11.910-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:11.914-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:11.917-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:11.917-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:11.918-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:11.918-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown initiated...
2023-01-29T14:22:11.929-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown completed.
2023-01-29T14:22:11.930-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:11.934-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:11.934-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:11.936-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@30e2c9dc] to prepare test instance [com.example.ec.web.TourRatingControllerTest@46577744]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6c5a347d testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@968cd07d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:11.958-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:11.958-03:00 DEBUG 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:11.958-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : The following 1 profile is active: "default"
2023-01-29T14:22:12.054-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:12.064-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:12.118-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:12.119-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:12.119-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:12.143-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat-4].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:12.143-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 184 ms
2023-01-29T14:22:12.170-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Starting...
2023-01-29T14:22:12.175-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-14 - Added connection conn44: url=jdbc:h2:mem:4ac48a01-adf3-4ece-824d-9c0dcdbdee4f user=SA
2023-01-29T14:22:12.175-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Start completed.
2023-01-29T14:22:12.175-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:4ac48a01-adf3-4ece-824d-9c0dcdbdee4f (H2 2.1)
2023-01-29T14:22:12.179-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:12.180-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:12.184-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:12.185-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:12.193-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:12.196-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:12.199-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:12.202-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:12.203-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:12.203-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:12.203-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Shutdown initiated...
2023-01-29T14:22:12.216-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Shutdown completed.
2023-01-29T14:22:12.217-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:12.220-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:12.221-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:12.222-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@30e2c9dc] to prepare test instance [com.example.ec.web.TourRatingControllerTest@980142a]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6c5a347d testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@968cd07d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:12.240-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:12.240-03:00 DEBUG 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:12.240-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : The following 1 profile is active: "default"
2023-01-29T14:22:12.340-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:12.349-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:12.399-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:12.399-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:12.399-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:12.420-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat-5].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:12.421-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 180 ms
2023-01-29T14:22:12.444-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Starting...
2023-01-29T14:22:12.449-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-15 - Added connection conn47: url=jdbc:h2:mem:4b5d1f96-d913-424b-a08d-8d0f91a33ab1 user=SA
2023-01-29T14:22:12.449-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Start completed.
2023-01-29T14:22:12.449-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:4b5d1f96-d913-424b-a08d-8d0f91a33ab1 (H2 2.1)
2023-01-29T14:22:12.452-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:12.453-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:12.457-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:12.459-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:12.467-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:12.470-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:12.474-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:12.476-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:12.476-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:12.477-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:12.477-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Shutdown initiated...
2023-01-29T14:22:12.487-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Shutdown completed.
2023-01-29T14:22:12.487-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:12.490-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:12.491-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:12.492-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@30e2c9dc] to prepare test instance [com.example.ec.web.TourRatingControllerTest@d0da1d6]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6c5a347d testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@968cd07d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:12.509-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:12.509-03:00 DEBUG 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:12.509-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : The following 1 profile is active: "default"
2023-01-29T14:22:12.601-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:12.609-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:12.663-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:12.664-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:12.664-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:12.687-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat-6].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:12.687-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 177 ms
2023-01-29T14:22:12.721-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Starting...
2023-01-29T14:22:12.727-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-16 - Added connection conn50: url=jdbc:h2:mem:7479cc38-374c-4e55-a7b8-8c64dd9d45d0 user=SA
2023-01-29T14:22:12.728-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Start completed.
2023-01-29T14:22:12.728-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:7479cc38-374c-4e55-a7b8-8c64dd9d45d0 (H2 2.1)
2023-01-29T14:22:12.731-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:12.732-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:12.736-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:12.737-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:12.746-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:12.750-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:12.753-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:12.756-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:12.757-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:12.758-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:12.758-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Shutdown initiated...
2023-01-29T14:22:12.770-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Shutdown completed.
2023-01-29T14:22:12.771-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:12.774-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:12.775-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:12.776-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@30e2c9dc] to prepare test instance [com.example.ec.web.TourRatingControllerTest@6ea4403f]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6c5a347d testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@968cd07d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:12.798-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:12.798-03:00 DEBUG 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:12.798-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : The following 1 profile is active: "default"
2023-01-29T14:22:12.886-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:12.894-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:12.944-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:12.945-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:12.945-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:12.975-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat-7].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:12.975-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 176 ms
2023-01-29T14:22:12.997-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Starting...
2023-01-29T14:22:13.002-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-17 - Added connection conn53: url=jdbc:h2:mem:404378c6-78ce-4361-9861-51c0cffbcadf user=SA
2023-01-29T14:22:13.002-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Start completed.
2023-01-29T14:22:13.002-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:404378c6-78ce-4361-9861-51c0cffbcadf (H2 2.1)
2023-01-29T14:22:13.005-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.001s)
2023-01-29T14:22:13.005-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:13.008-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:13.010-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:13.017-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:13.020-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:13.023-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:13.025-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:13.026-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:13.027-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:13.027-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Shutdown initiated...
2023-01-29T14:22:13.041-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Shutdown completed.
2023-01-29T14:22:13.041-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:13.044-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:13.045-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:13.046-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@30e2c9dc] to prepare test instance [com.example.ec.web.TourRatingControllerTest@2b4f99e5]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6c5a347d testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@968cd07d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:13.066-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Starting TourRatingControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:13.066-03:00 DEBUG 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:13.066-03:00  INFO 27952 --- [main] c.e.ec.web.TourRatingControllerTest      : The following 1 profile is active: "default"
2023-01-29T14:22:13.156-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:13.164-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:13.214-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:13.214-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:13.214-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:13.235-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat-8].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:13.235-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 168 ms
2023-01-29T14:22:13.264-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Starting...
2023-01-29T14:22:13.270-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-18 - Added connection conn56: url=jdbc:h2:mem:423bdabd-3610-42df-929a-c9d60dbbb545 user=SA
2023-01-29T14:22:13.270-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Start completed.
2023-01-29T14:22:13.271-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:423bdabd-3610-42df-929a-c9d60dbbb545 (H2 2.1)
2023-01-29T14:22:13.274-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:13.275-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:13.277-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:13.279-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:13.288-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:13.292-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:13.295-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:13.297-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:13.298-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:13.299-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:13.299-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Shutdown initiated...
2023-01-29T14:22:13.311-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Shutdown completed.
2023-01-29T14:22:13.311-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:13.315-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:13.315-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:13.317-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@30e2c9dc] to prepare test instance [com.example.ec.web.TourRatingControllerTest@18ad4396]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6c5a347d testClass = com.example.ec.web.TourRatingControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@968cd07d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:13.319-03:00  INFO 27952 --- [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.example.ec.web.UserControllerTest]: UserControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-01-29T14:22:13.319-03:00  INFO 27952 --- [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.example.ec.ExplorecaliApplication for test class com.example.ec.web.UserControllerTest
2023-01-29T14:22:13.338-03:00  INFO 27952 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:13.338-03:00 DEBUG 27952 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:13.338-03:00  INFO 27952 --- [main] com.example.ec.web.UserControllerTest    : The following 1 profile is active: "default"
2023-01-29T14:22:13.431-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:13.438-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:13.501-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:13.502-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:13.502-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:13.532-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat-9].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:13.532-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 193 ms
2023-01-29T14:22:13.555-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Starting...
2023-01-29T14:22:13.561-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-19 - Added connection conn59: url=jdbc:h2:mem:8c7ba963-9fb9-4f2a-b5fc-2e2eddfb0595 user=SA
2023-01-29T14:22:13.562-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Start completed.
2023-01-29T14:22:13.562-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:8c7ba963-9fb9-4f2a-b5fc-2e2eddfb0595 (H2 2.1)
2023-01-29T14:22:13.566-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.002s)
2023-01-29T14:22:13.567-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:13.571-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:13.572-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:13.578-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:13.582-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:13.584-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:13.586-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:13.587-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:13.588-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:13.588-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Shutdown initiated...
2023-01-29T14:22:13.597-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Shutdown completed.
2023-01-29T14:22:13.598-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:13.601-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:13.602-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:13.603-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@84e6336] to prepare test instance [com.example.ec.web.UserControllerTest@63daf2e1]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@2ee76d8d testClass = com.example.ec.web.UserControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@2798c43d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:13.620-03:00  INFO 27952 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:13.620-03:00 DEBUG 27952 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:13.620-03:00  INFO 27952 --- [main] com.example.ec.web.UserControllerTest    : The following 1 profile is active: "default"
2023-01-29T14:22:13.711-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:13.719-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:13.773-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:13.774-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:13.775-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:13.804-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat-10].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:13.804-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 183 ms
2023-01-29T14:22:13.825-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-20 - Starting...
2023-01-29T14:22:13.831-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-20 - Added connection conn62: url=jdbc:h2:mem:2917a5e9-93de-4577-9989-675d1c8458c1 user=SA
2023-01-29T14:22:13.831-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-20 - Start completed.
2023-01-29T14:22:13.831-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:2917a5e9-93de-4577-9989-675d1c8458c1 (H2 2.1)
2023-01-29T14:22:13.834-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.001s)
2023-01-29T14:22:13.834-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:13.838-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:13.839-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:13.845-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:13.848-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:13.851-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:13.853-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:13.853-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:13.854-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:13.854-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-20 - Shutdown initiated...
2023-01-29T14:22:13.866-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-20 - Shutdown completed.
2023-01-29T14:22:13.866-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:13.869-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:13.870-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:13.883-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@84e6336] to prepare test instance [com.example.ec.web.UserControllerTest@2b4ab7]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@2ee76d8d testClass = com.example.ec.web.UserControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@2798c43d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:13.911-03:00  INFO 27952 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:13.911-03:00 DEBUG 27952 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:13.911-03:00  INFO 27952 --- [main] com.example.ec.web.UserControllerTest    : The following 1 profile is active: "default"
2023-01-29T14:22:14.007-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:14.016-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:14.071-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:14.071-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:14.072-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:14.093-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat-11].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:14.093-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 181 ms
2023-01-29T14:22:14.129-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-21 - Starting...
2023-01-29T14:22:14.135-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-21 - Added connection conn65: url=jdbc:h2:mem:e030535b-3527-44ab-9f57-abe190fc0e63 user=SA
2023-01-29T14:22:14.136-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-21 - Start completed.
2023-01-29T14:22:14.136-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:e030535b-3527-44ab-9f57-abe190fc0e63 (H2 2.1)
2023-01-29T14:22:14.139-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.001s)
2023-01-29T14:22:14.139-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:14.146-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:14.147-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:14.155-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:14.157-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:14.160-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:14.161-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:14.162-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:14.162-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:14.162-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-21 - Shutdown initiated...
2023-01-29T14:22:14.166-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-21 - Shutdown completed.
2023-01-29T14:22:14.166-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:14.169-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:14.170-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:14.171-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@84e6336] to prepare test instance [com.example.ec.web.UserControllerTest@5abe46b7]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@2ee76d8d testClass = com.example.ec.web.UserControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@2798c43d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:14.187-03:00  INFO 27952 --- [main] com.example.ec.web.UserControllerTest    : Starting UserControllerTest using Java 18.0.2.1 with PID 27952 (started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:22:14.187-03:00 DEBUG 27952 --- [main] com.example.ec.web.UserControllerTest    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:22:14.187-03:00  INFO 27952 --- [main] com.example.ec.web.UserControllerTest    : The following 1 profile is active: "default"
2023-01-29T14:22:14.276-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:22:14.285-03:00  INFO 27952 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 5 JPA repository interfaces.
2023-01-29T14:22:14.330-03:00  INFO 27952 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2023-01-29T14:22:14.331-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:22:14.331-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:22:14.370-03:00  INFO 27952 --- [main] o.a.c.c.C.[Tomcat-12].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2023-01-29T14:22:14.371-03:00  INFO 27952 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 183 ms
2023-01-29T14:22:14.394-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-22 - Starting...
2023-01-29T14:22:14.399-03:00  INFO 27952 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-22 - Added connection conn67: url=jdbc:h2:mem:8858b686-a159-49c8-b979-88af326cb74a user=SA
2023-01-29T14:22:14.400-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-22 - Start completed.
2023-01-29T14:22:14.400-03:00  INFO 27952 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:8858b686-a159-49c8-b979-88af326cb74a (H2 2.1)
2023-01-29T14:22:14.403-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.001s)
2023-01-29T14:22:14.403-03:00  INFO 27952 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:22:14.411-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:22:14.412-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:22:14.421-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:22:14.424-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:22:14.426-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:22:14.428-03:00  INFO 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:22:14.428-03:00 ERROR 27952 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:22:14.429-03:00  WARN 27952 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

2023-01-29T14:22:14.429-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-22 - Shutdown initiated...
2023-01-29T14:22:14.437-03:00  INFO 27952 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-22 - Shutdown completed.
2023-01-29T14:22:14.438-03:00  INFO 27952 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:22:14.440-03:00  INFO 27952 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:22:14.441-03:00 ERROR 27952 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:22:14.442-03:00 ERROR 27952 --- [main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@84e6336] to prepare test instance [com.example.ec.web.UserControllerTest@323fe1f5]

java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@2ee76d8d testClass = com.example.ec.web.UserControllerTest, locations = [], classes = [com.example.ec.ExplorecaliApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@43cf6ea3, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@703feacd, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@2798c43d, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@aced190, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@c4c0b41, org.springframework.boot.test.context.SpringBootTestAnnotation@fbb12c25], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:141)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:249)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)
	at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)
	at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:183)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117)
	... 68 common frames omitted
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 92 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 2
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 110 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE[*]=INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE=INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 116 common frames omitted

2023-01-29T14:27:12.744-03:00  INFO 9196 --- [main] com.example.ec.ExplorecaliApplication    : Starting ExplorecaliApplication using Java 18.0.2.1 with PID 9196 (D:\javaestudos\explorecali\target\classes started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:27:12.746-03:00 DEBUG 9196 --- [main] com.example.ec.ExplorecaliApplication    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:27:12.746-03:00  INFO 9196 --- [main] com.example.ec.ExplorecaliApplication    : The following 1 profile is active: "default"
2023-01-29T14:27:13.274-03:00  INFO 9196 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:27:13.318-03:00  INFO 9196 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 5 JPA repository interfaces.
2023-01-29T14:27:13.786-03:00  INFO 9196 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2023-01-29T14:27:13.794-03:00  INFO 9196 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:27:13.794-03:00  INFO 9196 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:27:13.870-03:00  INFO 9196 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T14:27:13.870-03:00  INFO 9196 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1088 ms
2023-01-29T14:27:13.989-03:00  INFO 9196 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.5.1 by Redgate
2023-01-29T14:27:13.989-03:00  INFO 9196 --- [main] o.f.c.internal.license.VersionPrinter    : See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#9.5.1
2023-01-29T14:27:13.989-03:00  INFO 9196 --- [main] o.f.c.internal.license.VersionPrinter    : 
2023-01-29T14:27:13.996-03:00  INFO 9196 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T14:27:14.130-03:00  INFO 9196 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:24eb9f3c-4f90-47ad-a5c4-b582240f227f user=SA
2023-01-29T14:27:14.131-03:00  INFO 9196 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T14:27:14.139-03:00  INFO 9196 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:24eb9f3c-4f90-47ad-a5c4-b582240f227f (H2 2.1)
2023-01-29T14:27:14.179-03:00  INFO 9196 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.010s)
2023-01-29T14:27:14.183-03:00  INFO 9196 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:27:14.200-03:00  INFO 9196 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:27:14.204-03:00  INFO 9196 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:27:14.226-03:00  INFO 9196 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:27:14.237-03:00  INFO 9196 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:27:14.242-03:00  INFO 9196 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:27:14.246-03:00  INFO 9196 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:27:14.252-03:00 ERROR 9196 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:27:14.254-03:00  WARN 9196 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

2023-01-29T14:27:14.255-03:00  INFO 9196 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T14:27:14.266-03:00  INFO 9196 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T14:27:14.269-03:00  INFO 9196 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:27:14.278-03:00  INFO 9196 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:27:14.290-03:00 ERROR 9196 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.example.ec.ExplorecaliApplication.main(ExplorecaliApplication.java:19)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 18 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 36 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 42 common frames omitted

2023-01-29T14:29:41.821-03:00  INFO 26420 --- [main] com.example.ec.ExplorecaliApplication    : Starting ExplorecaliApplication using Java 18.0.2.1 with PID 26420 (D:\javaestudos\explorecali\target\classes started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:29:41.822-03:00 DEBUG 26420 --- [main] com.example.ec.ExplorecaliApplication    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:29:41.823-03:00  INFO 26420 --- [main] com.example.ec.ExplorecaliApplication    : The following 1 profile is active: "default"
2023-01-29T14:29:42.368-03:00  INFO 26420 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:29:42.414-03:00  INFO 26420 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 40 ms. Found 5 JPA repository interfaces.
2023-01-29T14:29:42.866-03:00  INFO 26420 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2023-01-29T14:29:42.873-03:00  INFO 26420 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:29:42.874-03:00  INFO 26420 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:29:42.949-03:00  INFO 26420 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T14:29:42.950-03:00  INFO 26420 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1090 ms
2023-01-29T14:29:43.067-03:00  INFO 26420 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.5.1 by Redgate
2023-01-29T14:29:43.067-03:00  INFO 26420 --- [main] o.f.c.internal.license.VersionPrinter    : See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#9.5.1
2023-01-29T14:29:43.068-03:00  INFO 26420 --- [main] o.f.c.internal.license.VersionPrinter    : 
2023-01-29T14:29:43.075-03:00  INFO 26420 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T14:29:43.213-03:00  INFO 26420 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:70e46ea8-28a8-438a-9225-9b580609e28b user=SA
2023-01-29T14:29:43.214-03:00  INFO 26420 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T14:29:43.223-03:00  INFO 26420 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:70e46ea8-28a8-438a-9225-9b580609e28b (H2 2.1)
2023-01-29T14:29:43.266-03:00  INFO 26420 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.011s)
2023-01-29T14:29:43.270-03:00  INFO 26420 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:29:43.287-03:00  INFO 26420 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:29:43.291-03:00  INFO 26420 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:29:43.317-03:00  INFO 26420 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:29:43.329-03:00  INFO 26420 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:29:43.334-03:00  INFO 26420 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:29:43.339-03:00  INFO 26420 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:29:43.345-03:00 ERROR 26420 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:29:43.347-03:00  WARN 26420 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

2023-01-29T14:29:43.347-03:00  INFO 26420 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T14:29:43.358-03:00  INFO 26420 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T14:29:43.362-03:00  INFO 26420 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:29:43.371-03:00  INFO 26420 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:29:43.384-03:00 ERROR 26420 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.example.ec.ExplorecaliApplication.main(ExplorecaliApplication.java:19)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 18 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 36 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 42 common frames omitted

2023-01-29T14:31:08.969-03:00  INFO 13540 --- [main] com.example.ec.ExplorecaliApplication    : Starting ExplorecaliApplication using Java 18.0.2.1 with PID 13540 (D:\javaestudos\explorecali\target\classes started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:31:08.971-03:00 DEBUG 13540 --- [main] com.example.ec.ExplorecaliApplication    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:31:08.971-03:00  INFO 13540 --- [main] com.example.ec.ExplorecaliApplication    : The following 1 profile is active: "mysql"
2023-01-29T14:31:09.499-03:00  INFO 13540 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:31:09.546-03:00  INFO 13540 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 40 ms. Found 5 JPA repository interfaces.
2023-01-29T14:31:10.009-03:00  INFO 13540 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2023-01-29T14:31:10.016-03:00  INFO 13540 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:31:10.017-03:00  INFO 13540 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:31:10.093-03:00  INFO 13540 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T14:31:10.094-03:00  INFO 13540 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1085 ms
2023-01-29T14:31:10.215-03:00  INFO 13540 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.5.1 by Redgate
2023-01-29T14:31:10.215-03:00  INFO 13540 --- [main] o.f.c.internal.license.VersionPrinter    : See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#9.5.1
2023-01-29T14:31:10.216-03:00  INFO 13540 --- [main] o.f.c.internal.license.VersionPrinter    : 
2023-01-29T14:31:10.222-03:00  INFO 13540 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T14:31:10.441-03:00  INFO 13540 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3c17bd0b
2023-01-29T14:31:10.442-03:00  INFO 13540 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T14:31:10.468-03:00  INFO 13540 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:mysql://localhost:6604/explorecali (MySQL 8.0)
2023-01-29T14:31:10.523-03:00  INFO 13540 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.022s)
2023-01-29T14:31:10.539-03:00  INFO 13540 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema `explorecali`: 2.2
2023-01-29T14:31:10.540-03:00  INFO 13540 --- [main] o.f.core.internal.command.DbMigrate      : Schema `explorecali` is up to date. No migration necessary.
2023-01-29T14:31:10.604-03:00  INFO 13540 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T14:31:10.640-03:00  INFO 13540 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T14:31:10.755-03:00  WARN 13540 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T14:31:10.856-03:00  INFO 13540 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T14:31:11.427-03:00  INFO 13540 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T14:31:11.436-03:00  INFO 13540 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T14:31:11.649-03:00  INFO 13540 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T14:31:11.958-03:00  WARN 13540 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T14:31:12.506-03:00  INFO 13540 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@125ace20, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7dbc77ca, org.springframework.security.web.context.SecurityContextHolderFilter@704ca8a8, org.springframework.security.web.header.HeaderWriterFilter@458500d1, org.springframework.security.web.authentication.logout.LogoutFilter@33c5e52f, com.example.ec.security.JwtTokenFilter@4c25687b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1784d711, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4624e3d1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5c21b22e, org.springframework.security.web.session.SessionManagementFilter@75e068dc, org.springframework.security.web.access.ExceptionTranslationFilter@154fcedd, org.springframework.security.web.access.intercept.AuthorizationFilter@65d3a83]
2023-01-29T14:31:12.796-03:00  INFO 13540 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2023-01-29T14:31:12.802-03:00  INFO 13540 --- [main] com.example.ec.ExplorecaliApplication    : Started ExplorecaliApplication in 4.068 seconds (process running for 4.459)
2023-01-29T14:31:21.193-03:00  INFO 13540 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T14:31:21.194-03:00  INFO 13540 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T14:31:21.205-03:00  INFO 13540 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T14:31:57.503-03:00  INFO 13388 --- [main] com.example.ec.ExplorecaliApplication    : Starting ExplorecaliApplication using Java 18.0.2.1 with PID 13388 (D:\javaestudos\explorecali\target\classes started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:31:57.504-03:00 DEBUG 13388 --- [main] com.example.ec.ExplorecaliApplication    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:31:57.505-03:00  INFO 13388 --- [main] com.example.ec.ExplorecaliApplication    : The following 1 profile is active: "mysql"
2023-01-29T14:31:58.028-03:00  INFO 13388 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:31:58.073-03:00  INFO 13388 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 39 ms. Found 5 JPA repository interfaces.
2023-01-29T14:31:58.535-03:00  INFO 13388 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2023-01-29T14:31:58.542-03:00  INFO 13388 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:31:58.542-03:00  INFO 13388 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:31:58.616-03:00  INFO 13388 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T14:31:58.617-03:00  INFO 13388 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1077 ms
2023-01-29T14:31:58.738-03:00  INFO 13388 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.5.1 by Redgate
2023-01-29T14:31:58.738-03:00  INFO 13388 --- [main] o.f.c.internal.license.VersionPrinter    : See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#9.5.1
2023-01-29T14:31:58.739-03:00  INFO 13388 --- [main] o.f.c.internal.license.VersionPrinter    : 
2023-01-29T14:31:58.745-03:00  INFO 13388 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T14:31:58.963-03:00  INFO 13388 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3c17bd0b
2023-01-29T14:31:58.964-03:00  INFO 13388 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T14:31:58.989-03:00  INFO 13388 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:mysql://localhost:6604/explorecali (MySQL 8.0)
2023-01-29T14:31:59.043-03:00  INFO 13388 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.022s)
2023-01-29T14:31:59.059-03:00  INFO 13388 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema `explorecali`: 2.2
2023-01-29T14:31:59.061-03:00  INFO 13388 --- [main] o.f.core.internal.command.DbMigrate      : Schema `explorecali` is up to date. No migration necessary.
2023-01-29T14:31:59.121-03:00  INFO 13388 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T14:31:59.156-03:00  INFO 13388 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T14:31:59.271-03:00  WARN 13388 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T14:31:59.377-03:00  INFO 13388 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T14:31:59.947-03:00  INFO 13388 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T14:31:59.953-03:00  INFO 13388 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T14:32:00.176-03:00  INFO 13388 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T14:32:00.451-03:00  WARN 13388 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T14:32:00.986-03:00  INFO 13388 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@533165e7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@324e62e2, org.springframework.security.web.context.SecurityContextHolderFilter@65d3a83, org.springframework.security.web.header.HeaderWriterFilter@5c85ed05, org.springframework.security.web.authentication.logout.LogoutFilter@7926d092, com.example.ec.security.JwtTokenFilter@1018552d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@73ac7716, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@125ace20, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@75eca6d8, org.springframework.security.web.session.SessionManagementFilter@475753dd, org.springframework.security.web.access.ExceptionTranslationFilter@2d2710a8, org.springframework.security.web.access.intercept.AuthorizationFilter@690113f0]
2023-01-29T14:32:01.277-03:00  INFO 13388 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2023-01-29T14:32:01.284-03:00  INFO 13388 --- [main] com.example.ec.ExplorecaliApplication    : Started ExplorecaliApplication in 4.022 seconds (process running for 4.414)
2023-01-29T14:32:07.238-03:00  INFO 13388 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T14:32:07.239-03:00  INFO 13388 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T14:32:07.250-03:00  INFO 13388 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T14:32:20.181-03:00  INFO 11528 --- [main] com.example.ec.ExplorecaliApplication    : Starting ExplorecaliApplication using Java 18.0.2.1 with PID 11528 (D:\javaestudos\explorecali\target\classes started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:32:20.183-03:00 DEBUG 11528 --- [main] com.example.ec.ExplorecaliApplication    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:32:20.183-03:00  INFO 11528 --- [main] com.example.ec.ExplorecaliApplication    : The following 1 profile is active: "mysql"
2023-01-29T14:32:20.718-03:00  INFO 11528 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:32:20.764-03:00  INFO 11528 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 40 ms. Found 5 JPA repository interfaces.
2023-01-29T14:32:21.228-03:00  INFO 11528 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2023-01-29T14:32:21.235-03:00  INFO 11528 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:32:21.236-03:00  INFO 11528 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:32:21.310-03:00  INFO 11528 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T14:32:21.310-03:00  INFO 11528 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1086 ms
2023-01-29T14:32:21.431-03:00  INFO 11528 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.5.1 by Redgate
2023-01-29T14:32:21.431-03:00  INFO 11528 --- [main] o.f.c.internal.license.VersionPrinter    : See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#9.5.1
2023-01-29T14:32:21.432-03:00  INFO 11528 --- [main] o.f.c.internal.license.VersionPrinter    : 
2023-01-29T14:32:21.438-03:00  INFO 11528 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T14:32:21.650-03:00  INFO 11528 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1eab8437
2023-01-29T14:32:21.652-03:00  INFO 11528 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T14:32:21.676-03:00  INFO 11528 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:mysql://localhost:6604/explorecali (MySQL 8.0)
2023-01-29T14:32:21.728-03:00  INFO 11528 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.021s)
2023-01-29T14:32:21.745-03:00  INFO 11528 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema `explorecali`: 2.2
2023-01-29T14:32:21.747-03:00  INFO 11528 --- [main] o.f.core.internal.command.DbMigrate      : Schema `explorecali` is up to date. No migration necessary.
2023-01-29T14:32:21.809-03:00  INFO 11528 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T14:32:21.845-03:00  INFO 11528 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T14:32:21.958-03:00  WARN 11528 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T14:32:22.056-03:00  INFO 11528 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T14:32:22.628-03:00  INFO 11528 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T14:32:22.635-03:00  INFO 11528 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T14:32:22.850-03:00  INFO 11528 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T14:32:23.134-03:00  WARN 11528 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T14:32:23.667-03:00  INFO 11528 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@68c05c5b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1b5e6983, org.springframework.security.web.context.SecurityContextHolderFilter@458500d1, org.springframework.security.web.header.HeaderWriterFilter@175377d3, org.springframework.security.web.authentication.logout.LogoutFilter@321bf4b1, com.example.ec.security.JwtTokenFilter@130a99fe, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3299ee2c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@542759f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@31773d5b, org.springframework.security.web.session.SessionManagementFilter@2297c8bf, org.springframework.security.web.access.ExceptionTranslationFilter@85eabca, org.springframework.security.web.access.intercept.AuthorizationFilter@5c85ed05]
2023-01-29T14:32:23.947-03:00  INFO 11528 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2023-01-29T14:32:23.954-03:00  INFO 11528 --- [main] com.example.ec.ExplorecaliApplication    : Started ExplorecaliApplication in 4.024 seconds (process running for 4.417)
2023-01-29T14:33:11.498-03:00  INFO 11528 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T14:33:11.500-03:00  INFO 11528 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T14:33:11.510-03:00  INFO 11528 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T14:33:47.063-03:00  INFO 10584 --- [main] com.example.ec.ExplorecaliApplication    : Starting ExplorecaliApplication using Java 18.0.2.1 with PID 10584 (D:\javaestudos\explorecali\target\classes started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:33:47.064-03:00 DEBUG 10584 --- [main] com.example.ec.ExplorecaliApplication    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:33:47.065-03:00  INFO 10584 --- [main] com.example.ec.ExplorecaliApplication    : The following 1 profile is active: "mysql"
2023-01-29T14:33:47.592-03:00  INFO 10584 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:33:47.640-03:00  INFO 10584 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 42 ms. Found 5 JPA repository interfaces.
2023-01-29T14:33:48.095-03:00  INFO 10584 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2023-01-29T14:33:48.102-03:00  INFO 10584 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:33:48.102-03:00  INFO 10584 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:33:48.176-03:00  INFO 10584 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T14:33:48.177-03:00  INFO 10584 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1076 ms
2023-01-29T14:33:48.296-03:00  INFO 10584 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.5.1 by Redgate
2023-01-29T14:33:48.297-03:00  INFO 10584 --- [main] o.f.c.internal.license.VersionPrinter    : See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#9.5.1
2023-01-29T14:33:48.297-03:00  INFO 10584 --- [main] o.f.c.internal.license.VersionPrinter    : 
2023-01-29T14:33:48.303-03:00  INFO 10584 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T14:33:48.518-03:00  INFO 10584 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2fac80a8
2023-01-29T14:33:48.520-03:00  INFO 10584 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T14:33:48.543-03:00  INFO 10584 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:mysql://localhost:6604/explorecali (MySQL 8.0)
2023-01-29T14:33:48.597-03:00  INFO 10584 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.022s)
2023-01-29T14:33:48.613-03:00  INFO 10584 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema `explorecali`: 2.2
2023-01-29T14:33:48.614-03:00  INFO 10584 --- [main] o.f.core.internal.command.DbMigrate      : Schema `explorecali` is up to date. No migration necessary.
2023-01-29T14:33:48.672-03:00  INFO 10584 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T14:33:48.706-03:00  INFO 10584 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T14:33:48.815-03:00  WARN 10584 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T14:33:48.918-03:00  INFO 10584 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T14:33:49.484-03:00  INFO 10584 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T14:33:49.491-03:00  INFO 10584 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T14:33:49.702-03:00  INFO 10584 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T14:33:49.989-03:00  WARN 10584 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T14:33:50.521-03:00  INFO 10584 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@31773d5b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5bbf8daa, org.springframework.security.web.context.SecurityContextHolderFilter@542759f, org.springframework.security.web.header.HeaderWriterFilter@44a972b4, org.springframework.security.web.authentication.logout.LogoutFilter@623dc0b8, com.example.ec.security.JwtTokenFilter@33c5e52f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6eb6750f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@13231e7b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@74474fc0, org.springframework.security.web.session.SessionManagementFilter@458500d1, org.springframework.security.web.access.ExceptionTranslationFilter@645b67d6, org.springframework.security.web.access.intercept.AuthorizationFilter@68c05c5b]
2023-01-29T14:33:50.800-03:00  INFO 10584 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2023-01-29T14:33:50.807-03:00  INFO 10584 --- [main] com.example.ec.ExplorecaliApplication    : Started ExplorecaliApplication in 3.989 seconds (process running for 4.391)
2023-01-29T14:33:56.268-03:00  INFO 10584 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T14:33:56.269-03:00  INFO 10584 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T14:33:56.280-03:00  INFO 10584 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T14:35:05.100-03:00  INFO 28428 --- [main] com.example.ec.ExplorecaliApplication    : Starting ExplorecaliApplication using Java 18.0.2.1 with PID 28428 (D:\javaestudos\explorecali\target\classes started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:35:05.102-03:00 DEBUG 28428 --- [main] com.example.ec.ExplorecaliApplication    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:35:05.102-03:00  INFO 28428 --- [main] com.example.ec.ExplorecaliApplication    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T14:35:05.620-03:00  INFO 28428 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:35:05.664-03:00  INFO 28428 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 39 ms. Found 5 JPA repository interfaces.
2023-01-29T14:35:06.123-03:00  INFO 28428 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2023-01-29T14:35:06.131-03:00  INFO 28428 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:35:06.131-03:00  INFO 28428 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:35:06.206-03:00  INFO 28428 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T14:35:06.207-03:00  INFO 28428 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1071 ms
2023-01-29T14:35:06.320-03:00  INFO 28428 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.5.1 by Redgate
2023-01-29T14:35:06.320-03:00  INFO 28428 --- [main] o.f.c.internal.license.VersionPrinter    : See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#9.5.1
2023-01-29T14:35:06.321-03:00  INFO 28428 --- [main] o.f.c.internal.license.VersionPrinter    : 
2023-01-29T14:35:06.327-03:00  INFO 28428 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T14:35:06.462-03:00  INFO 28428 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:d1b8c02a-1d2b-4067-af16-cafa911c9ed4 user=SA
2023-01-29T14:35:06.463-03:00  INFO 28428 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T14:35:06.471-03:00  INFO 28428 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:d1b8c02a-1d2b-4067-af16-cafa911c9ed4 (H2 2.1)
2023-01-29T14:35:06.511-03:00  INFO 28428 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.010s)
2023-01-29T14:35:06.515-03:00  INFO 28428 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:35:06.531-03:00  INFO 28428 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:35:06.535-03:00  INFO 28428 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:35:06.559-03:00  INFO 28428 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:35:06.570-03:00  INFO 28428 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:35:06.575-03:00  INFO 28428 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:35:06.580-03:00  INFO 28428 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:35:06.585-03:00 ERROR 28428 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:35:06.587-03:00  WARN 28428 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

2023-01-29T14:35:06.588-03:00  INFO 28428 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T14:35:06.597-03:00  INFO 28428 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T14:35:06.600-03:00  INFO 28428 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:35:06.609-03:00  INFO 28428 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:35:06.621-03:00 ERROR 28428 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.example.ec.ExplorecaliApplication.main(ExplorecaliApplication.java:19)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 18 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 36 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 42 common frames omitted

2023-01-29T14:35:54.142-03:00  INFO 19376 --- [main] com.example.ec.ExplorecaliApplication    : Starting ExplorecaliApplication using Java 18.0.2.1 with PID 19376 (D:\javaestudos\explorecali\target\classes started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:35:54.144-03:00 DEBUG 19376 --- [main] com.example.ec.ExplorecaliApplication    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:35:54.144-03:00  INFO 19376 --- [main] com.example.ec.ExplorecaliApplication    : No active profile set, falling back to 1 default profile: "default"
2023-01-29T14:35:54.676-03:00  INFO 19376 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:35:54.721-03:00  INFO 19376 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 40 ms. Found 5 JPA repository interfaces.
2023-01-29T14:35:55.188-03:00  INFO 19376 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2023-01-29T14:35:55.196-03:00  INFO 19376 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:35:55.196-03:00  INFO 19376 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:35:55.311-03:00  INFO 19376 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T14:35:55.311-03:00  INFO 19376 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1129 ms
2023-01-29T14:35:55.426-03:00  INFO 19376 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.5.1 by Redgate
2023-01-29T14:35:55.427-03:00  INFO 19376 --- [main] o.f.c.internal.license.VersionPrinter    : See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#9.5.1
2023-01-29T14:35:55.427-03:00  INFO 19376 --- [main] o.f.c.internal.license.VersionPrinter    : 
2023-01-29T14:35:55.433-03:00  INFO 19376 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T14:35:55.569-03:00  INFO 19376 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:25ef8f55-7fff-4537-b248-44980b185d33 user=SA
2023-01-29T14:35:55.570-03:00  INFO 19376 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T14:35:55.578-03:00  INFO 19376 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:h2:mem:25ef8f55-7fff-4537-b248-44980b185d33 (H2 2.1)
2023-01-29T14:35:55.620-03:00  INFO 19376 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.012s)
2023-01-29T14:35:55.624-03:00  INFO 19376 --- [main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2023-01-29T14:35:55.641-03:00  INFO 19376 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema "PUBLIC": << Empty Schema >>
2023-01-29T14:35:55.645-03:00  INFO 19376 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.1 - CreateTourSchema"
2023-01-29T14:35:55.668-03:00  INFO 19376 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.2 - AddTours"
2023-01-29T14:35:55.679-03:00  INFO 19376 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.3 - CreateTourRatingSchema"
2023-01-29T14:35:55.683-03:00  INFO 19376 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "1.4 - AddTourRatings"
2023-01-29T14:35:55.688-03:00  INFO 19376 --- [main] o.f.core.internal.command.DbMigrate      : Migrating schema "PUBLIC" to version "2.1 - CreateSecuritySchema"
2023-01-29T14:35:55.694-03:00 ERROR 19376 --- [main] o.f.core.internal.command.DbMigrate      : Migration of schema "PUBLIC" to version "2.1 - CreateSecuritySchema" failed! Please restore backups and roll back database and code!
2023-01-29T14:35:55.696-03:00  WARN 19376 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

2023-01-29T14:35:55.696-03:00  INFO 19376 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T14:35:55.707-03:00  INFO 19376 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-01-29T14:35:55.710-03:00  INFO 19376 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-01-29T14:35:55.719-03:00  INFO 19376 --- [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-01-29T14:35:55.731-03:00 ERROR 19376 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.example.ec.ExplorecaliApplication.main(ExplorecaliApplication.java:19)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:384)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:274)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:273)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:246)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:141)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate$1.call(TableLockingExecutionTemplate.java:36)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.jdbc.TableLockingExecutionTemplate.execute(TableLockingExecutionTemplate.java:31)
	at org.flywaydb.core.internal.database.base.Connection.lock(Connection.java:102)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:143)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:141)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:98)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:176)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:204)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:128)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)
	... 18 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V2.1__CreateSecuritySchema.sql failed
-----------------------------------------------
SQL State  : 42001
Error Code : 42001
Message    : Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
Location   : db/migration/V2.1__CreateSecuritySchema.sql (D:\javaestudos\explorecali\target\classes\db\migration\V2.1__CreateSecuritySchema.sql)
Line       : 1
Statement  : CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:275)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:376)
	... 36 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE security_role (\000d\000a  id BIGINT AUTO_INCREMENT PRIMARY KEY,\000d\000a  description varchar(100) DEFAULT NULL,\000d\000a  role_name varchar(100) DEFAULT NULL\000d\000a) ENGINE [*]= INNODB"; expected "identifier"; SQL statement:
CREATE TABLE security_role (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  description varchar(100) DEFAULT NULL,
  role_name varchar(100) DEFAULT NULL
) ENGINE = INNODB [42001-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:502)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.Parser.readIdentifier(Parser.java:5656)
	at org.h2.command.Parser.parseCreateTable(Parser.java:9279)
	at org.h2.command.Parser.parseCreate(Parser.java:6784)
	at org.h2.command.Parser.parsePrepared(Parser.java:763)
	at org.h2.command.Parser.parse(Parser.java:689)
	at org.h2.command.Parser.parse(Parser.java:661)
	at org.h2.command.Parser.prepareCommand(Parser.java:569)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:631)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:554)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1116)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:237)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:223)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 42 common frames omitted

2023-01-29T14:43:59.575-03:00  INFO 9688 --- [main] com.example.ec.ExplorecaliApplication    : Starting ExplorecaliApplication using Java 18.0.2.1 with PID 9688 (D:\javaestudos\explorecali\target\classes started by Victor in D:\javaestudos\explorecali)
2023-01-29T14:43:59.576-03:00 DEBUG 9688 --- [main] com.example.ec.ExplorecaliApplication    : Running with Spring Boot v3.0.0, Spring v6.0.2
2023-01-29T14:43:59.577-03:00  INFO 9688 --- [main] com.example.ec.ExplorecaliApplication    : The following 1 profile is active: "mysql"
2023-01-29T14:44:00.123-03:00  INFO 9688 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-01-29T14:44:00.173-03:00  INFO 9688 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 44 ms. Found 5 JPA repository interfaces.
2023-01-29T14:44:00.641-03:00  INFO 9688 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
2023-01-29T14:44:00.648-03:00  INFO 9688 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-01-29T14:44:00.649-03:00  INFO 9688 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.1]
2023-01-29T14:44:00.723-03:00  INFO 9688 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-01-29T14:44:00.723-03:00  INFO 9688 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1108 ms
2023-01-29T14:44:00.849-03:00  INFO 9688 --- [main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.5.1 by Redgate
2023-01-29T14:44:00.849-03:00  INFO 9688 --- [main] o.f.c.internal.license.VersionPrinter    : See what's new here: https://flywaydb.org/documentation/learnmore/releaseNotes#9.5.1
2023-01-29T14:44:00.850-03:00  INFO 9688 --- [main] o.f.c.internal.license.VersionPrinter    : 
2023-01-29T14:44:00.856-03:00  INFO 9688 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2023-01-29T14:44:01.075-03:00  INFO 9688 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1eab8437
2023-01-29T14:44:01.077-03:00  INFO 9688 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2023-01-29T14:44:01.102-03:00  INFO 9688 --- [main] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:mysql://localhost:6604/explorecali (MySQL 8.0)
2023-01-29T14:44:01.162-03:00  INFO 9688 --- [main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.025s)
2023-01-29T14:44:01.181-03:00  INFO 9688 --- [main] o.f.core.internal.command.DbMigrate      : Current version of schema `explorecali`: 2.2
2023-01-29T14:44:01.183-03:00  INFO 9688 --- [main] o.f.core.internal.command.DbMigrate      : Schema `explorecali` is up to date. No migration necessary.
2023-01-29T14:44:01.246-03:00  INFO 9688 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-01-29T14:44:01.279-03:00  INFO 9688 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.5.Final
2023-01-29T14:44:01.388-03:00  WARN 9688 --- [main] org.hibernate.orm.deprecation            : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2023-01-29T14:44:01.486-03:00  INFO 9688 --- [main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
2023-01-29T14:44:02.052-03:00  INFO 9688 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-01-29T14:44:02.058-03:00  INFO 9688 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T14:44:02.281-03:00  INFO 9688 --- [main] com.example.ec.security.JwtProvider      : Secret key: QfTjWnZr4u7x!A%D*F-JaNdRgUkXp2s5 Exp: 600000
2023-01-29T14:44:02.561-03:00  WARN 9688 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-01-29T14:44:03.109-03:00  INFO 9688 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1b5e6983, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@130a99fe, org.springframework.security.web.context.SecurityContextHolderFilter@59cbeaee, org.springframework.security.web.header.HeaderWriterFilter@645b67d6, org.springframework.security.web.authentication.logout.LogoutFilter@598f6c93, com.example.ec.security.JwtTokenFilter@31773d5b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@542759f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@68ac6e6e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5bbf8daa, org.springframework.security.web.session.SessionManagementFilter@154fcedd, org.springframework.security.web.access.ExceptionTranslationFilter@3f8c4bcf, org.springframework.security.web.access.intercept.AuthorizationFilter@23657729]
2023-01-29T14:44:03.391-03:00  INFO 9688 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2023-01-29T14:44:03.398-03:00  INFO 9688 --- [main] com.example.ec.ExplorecaliApplication    : Started ExplorecaliApplication in 4.068 seconds (process running for 4.471)
2023-01-29T14:44:32.634-03:00  INFO 9688 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-01-29T14:44:32.636-03:00  INFO 9688 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-01-29T14:44:32.647-03:00  INFO 9688 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
